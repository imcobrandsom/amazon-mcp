function y0(n,t){for(var s=0;s<t.length;s++){const i=t[s];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const c=Object.getOwnPropertyDescriptor(i,o);c&&Object.defineProperty(n,o,c.get?c:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();function _f(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tl={exports:{}},Cs={},Pl={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh;function x0(){if(gh)return le;gh=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function x(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function N(C,M,oe){this.props=C,this.context=M,this.refs=_,this.updater=oe||k}N.prototype.isReactComponent={},N.prototype.setState=function(C,M){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,M,"setState")},N.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function L(){}L.prototype=N.prototype;function O(C,M,oe){this.props=C,this.context=M,this.refs=_,this.updater=oe||k}var I=O.prototype=new L;I.constructor=O,b(I,N.prototype),I.isPureReactComponent=!0;var z=Array.isArray,G=Object.prototype.hasOwnProperty,J={current:null},ae={key:!0,ref:!0,__self:!0,__source:!0};function Ee(C,M,oe){var ue,he={},fe=null,xe=null;if(M!=null)for(ue in M.ref!==void 0&&(xe=M.ref),M.key!==void 0&&(fe=""+M.key),M)G.call(M,ue)&&!ae.hasOwnProperty(ue)&&(he[ue]=M[ue]);var me=arguments.length-2;if(me===1)he.children=oe;else if(1<me){for(var je=Array(me),ft=0;ft<me;ft++)je[ft]=arguments[ft+2];he.children=je}if(C&&C.defaultProps)for(ue in me=C.defaultProps,me)he[ue]===void 0&&(he[ue]=me[ue]);return{$$typeof:n,type:C,key:fe,ref:xe,props:he,_owner:J.current}}function Ae(C,M){return{$$typeof:n,type:C.type,key:M,ref:C.ref,props:C.props,_owner:C._owner}}function Et(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function Wt(C){var M={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(oe){return M[oe]})}var ce=/\/+/g;function Me(C,M){return typeof C=="object"&&C!==null&&C.key!=null?Wt(""+C.key):M.toString(36)}function dt(C,M,oe,ue,he){var fe=typeof C;(fe==="undefined"||fe==="boolean")&&(C=null);var xe=!1;if(C===null)xe=!0;else switch(fe){case"string":case"number":xe=!0;break;case"object":switch(C.$$typeof){case n:case t:xe=!0}}if(xe)return xe=C,he=he(xe),C=ue===""?"."+Me(xe,0):ue,z(he)?(oe="",C!=null&&(oe=C.replace(ce,"$&/")+"/"),dt(he,M,oe,"",function(ft){return ft})):he!=null&&(Et(he)&&(he=Ae(he,oe+(!he.key||xe&&xe.key===he.key?"":(""+he.key).replace(ce,"$&/")+"/")+C)),M.push(he)),1;if(xe=0,ue=ue===""?".":ue+":",z(C))for(var me=0;me<C.length;me++){fe=C[me];var je=ue+Me(fe,me);xe+=dt(fe,M,oe,je,he)}else if(je=x(C),typeof je=="function")for(C=je.call(C),me=0;!(fe=C.next()).done;)fe=fe.value,je=ue+Me(fe,me++),xe+=dt(fe,M,oe,je,he);else if(fe==="object")throw M=String(C),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return xe}function ht(C,M,oe){if(C==null)return C;var ue=[],he=0;return dt(C,ue,"","",function(fe){return M.call(oe,fe,he++)}),ue}function Ce(C){if(C._status===-1){var M=C._result;M=M(),M.then(function(oe){(C._status===0||C._status===-1)&&(C._status=1,C._result=oe)},function(oe){(C._status===0||C._status===-1)&&(C._status=2,C._result=oe)}),C._status===-1&&(C._status=0,C._result=M)}if(C._status===1)return C._result.default;throw C._result}var ye={current:null},F={transition:null},X={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:F,ReactCurrentOwner:J};function H(){throw Error("act(...) is not supported in production builds of React.")}return le.Children={map:ht,forEach:function(C,M,oe){ht(C,function(){M.apply(this,arguments)},oe)},count:function(C){var M=0;return ht(C,function(){M++}),M},toArray:function(C){return ht(C,function(M){return M})||[]},only:function(C){if(!Et(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},le.Component=N,le.Fragment=s,le.Profiler=o,le.PureComponent=O,le.StrictMode=i,le.Suspense=m,le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,le.act=H,le.cloneElement=function(C,M,oe){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ue=b({},C.props),he=C.key,fe=C.ref,xe=C._owner;if(M!=null){if(M.ref!==void 0&&(fe=M.ref,xe=J.current),M.key!==void 0&&(he=""+M.key),C.type&&C.type.defaultProps)var me=C.type.defaultProps;for(je in M)G.call(M,je)&&!ae.hasOwnProperty(je)&&(ue[je]=M[je]===void 0&&me!==void 0?me[je]:M[je])}var je=arguments.length-2;if(je===1)ue.children=oe;else if(1<je){me=Array(je);for(var ft=0;ft<je;ft++)me[ft]=arguments[ft+2];ue.children=me}return{$$typeof:n,type:C.type,key:he,ref:fe,props:ue,_owner:xe}},le.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:c,_context:C},C.Consumer=C},le.createElement=Ee,le.createFactory=function(C){var M=Ee.bind(null,C);return M.type=C,M},le.createRef=function(){return{current:null}},le.forwardRef=function(C){return{$$typeof:p,render:C}},le.isValidElement=Et,le.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:Ce}},le.memo=function(C,M){return{$$typeof:g,type:C,compare:M===void 0?null:M}},le.startTransition=function(C){var M=F.transition;F.transition={};try{C()}finally{F.transition=M}},le.unstable_act=H,le.useCallback=function(C,M){return ye.current.useCallback(C,M)},le.useContext=function(C){return ye.current.useContext(C)},le.useDebugValue=function(){},le.useDeferredValue=function(C){return ye.current.useDeferredValue(C)},le.useEffect=function(C,M){return ye.current.useEffect(C,M)},le.useId=function(){return ye.current.useId()},le.useImperativeHandle=function(C,M,oe){return ye.current.useImperativeHandle(C,M,oe)},le.useInsertionEffect=function(C,M){return ye.current.useInsertionEffect(C,M)},le.useLayoutEffect=function(C,M){return ye.current.useLayoutEffect(C,M)},le.useMemo=function(C,M){return ye.current.useMemo(C,M)},le.useReducer=function(C,M,oe){return ye.current.useReducer(C,M,oe)},le.useRef=function(C){return ye.current.useRef(C)},le.useState=function(C){return ye.current.useState(C)},le.useSyncExternalStore=function(C,M,oe){return ye.current.useSyncExternalStore(C,M,oe)},le.useTransition=function(){return ye.current.useTransition()},le.version="18.3.1",le}var vh;function lu(){return vh||(vh=1,Pl.exports=x0()),Pl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function w0(){if(yh)return Cs;yh=1;var n=lu(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,g){var y,w={},x=null,k=null;g!==void 0&&(x=""+g),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(k=m.ref);for(y in m)i.call(m,y)&&!c.hasOwnProperty(y)&&(w[y]=m[y]);if(p&&p.defaultProps)for(y in m=p.defaultProps,m)w[y]===void 0&&(w[y]=m[y]);return{$$typeof:t,type:p,key:x,ref:k,props:w,_owner:o.current}}return Cs.Fragment=s,Cs.jsx=h,Cs.jsxs=h,Cs}var xh;function _0(){return xh||(xh=1,Tl.exports=w0()),Tl.exports}var u=_0(),T=lu();const uu=_f(T),b0=y0({__proto__:null,default:uu},[T]);var aa={},Rl={exports:{}},ct={},Ol={exports:{}},Al={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh;function k0(){return wh||(wh=1,(function(n){function t(F,X){var H=F.length;F.push(X);e:for(;0<H;){var C=H-1>>>1,M=F[C];if(0<o(M,X))F[C]=X,F[H]=M,H=C;else break e}}function s(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],H=F.pop();if(H!==X){F[0]=H;e:for(var C=0,M=F.length,oe=M>>>1;C<oe;){var ue=2*(C+1)-1,he=F[ue],fe=ue+1,xe=F[fe];if(0>o(he,H))fe<M&&0>o(xe,he)?(F[C]=xe,F[fe]=H,C=fe):(F[C]=he,F[ue]=H,C=ue);else if(fe<M&&0>o(xe,H))F[C]=xe,F[fe]=H,C=fe;else break e}}return X}function o(F,X){var H=F.sortIndex-X.sortIndex;return H!==0?H:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();n.unstable_now=function(){return h.now()-p}}var m=[],g=[],y=1,w=null,x=3,k=!1,b=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var X=s(g);X!==null;){if(X.callback===null)i(g);else if(X.startTime<=F)i(g),X.sortIndex=X.expirationTime,t(m,X);else break;X=s(g)}}function z(F){if(_=!1,I(F),!b)if(s(m)!==null)b=!0,Ce(G);else{var X=s(g);X!==null&&ye(z,X.startTime-F)}}function G(F,X){b=!1,_&&(_=!1,L(Ee),Ee=-1),k=!0;var H=x;try{for(I(X),w=s(m);w!==null&&(!(w.expirationTime>X)||F&&!Wt());){var C=w.callback;if(typeof C=="function"){w.callback=null,x=w.priorityLevel;var M=C(w.expirationTime<=X);X=n.unstable_now(),typeof M=="function"?w.callback=M:w===s(m)&&i(m),I(X)}else i(m);w=s(m)}if(w!==null)var oe=!0;else{var ue=s(g);ue!==null&&ye(z,ue.startTime-X),oe=!1}return oe}finally{w=null,x=H,k=!1}}var J=!1,ae=null,Ee=-1,Ae=5,Et=-1;function Wt(){return!(n.unstable_now()-Et<Ae)}function ce(){if(ae!==null){var F=n.unstable_now();Et=F;var X=!0;try{X=ae(!0,F)}finally{X?Me():(J=!1,ae=null)}}else J=!1}var Me;if(typeof O=="function")Me=function(){O(ce)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,ht=dt.port2;dt.port1.onmessage=ce,Me=function(){ht.postMessage(null)}}else Me=function(){N(ce,0)};function Ce(F){ae=F,J||(J=!0,Me())}function ye(F,X){Ee=N(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){b||k||(b=!0,Ce(G))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return s(m)},n.unstable_next=function(F){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var H=x;x=X;try{return F()}finally{x=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=x;x=F;try{return X()}finally{x=H}},n.unstable_scheduleCallback=function(F,X,H){var C=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?C+H:C):H=C,F){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=H+M,F={id:y++,callback:X,priorityLevel:F,startTime:H,expirationTime:M,sortIndex:-1},H>C?(F.sortIndex=H,t(g,F),s(m)===null&&F===s(g)&&(_?(L(Ee),Ee=-1):_=!0,ye(z,H-C))):(F.sortIndex=M,t(m,F),b||k||(b=!0,Ce(G))),F},n.unstable_shouldYield=Wt,n.unstable_wrapCallback=function(F){var X=x;return function(){var H=x;x=X;try{return F.apply(this,arguments)}finally{x=H}}}})(Al)),Al}var _h;function j0(){return _h||(_h=1,Ol.exports=k0()),Ol.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function S0(){if(bh)return ct;bh=1;var n=lu(),t=j0();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function c(e,r){h(e,r),h(e+"Capture",r)}function h(e,r){for(o[e]=r,e=0;e<r.length;e++)i.add(r[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function x(e){return m.call(w,e)?!0:m.call(y,e)?!1:g.test(e)?w[e]=!0:(y[e]=!0,!1)}function k(e,r,a,l){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return l?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b(e,r,a,l){if(r===null||typeof r>"u"||k(e,r,a,l))return!0;if(l)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function _(e,r,a,l,d,f,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=f,this.removeEmptyString=v}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];N[r]=new _(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(L,O);N[r]=new _(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(L,O);N[r]=new _(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(L,O);N[r]=new _(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});function I(e,r,a,l){var d=N.hasOwnProperty(r)?N[r]:null;(d!==null?d.type!==0:l||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(b(r,a,d,l)&&(a=null),l||d===null?x(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):d.mustUseProperty?e[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,l=d.attributeNamespace,a===null?e.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,l?e.setAttributeNS(l,r,a):e.setAttribute(r,a))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),J=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),Et=Symbol.for("react.provider"),Wt=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),F=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var H=Object.assign,C;function M(e){if(C===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);C=r&&r[1]||""}return`
`+C+e}var oe=!1;function ue(e,r){if(!e||oe)return"";oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(A){var l=A}Reflect.construct(e,[],r)}else{try{r.call()}catch(A){l=A}e.call(r.prototype)}else{try{throw Error()}catch(A){l=A}e()}}catch(A){if(A&&l&&typeof A.stack=="string"){for(var d=A.stack.split(`
`),f=l.stack.split(`
`),v=d.length-1,j=f.length-1;1<=v&&0<=j&&d[v]!==f[j];)j--;for(;1<=v&&0<=j;v--,j--)if(d[v]!==f[j]){if(v!==1||j!==1)do if(v--,j--,0>j||d[v]!==f[j]){var S=`
`+d[v].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=v&&0<=j);break}}}finally{oe=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?M(e):""}function he(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ae:return"Fragment";case J:return"Portal";case Ae:return"Profiler";case Ee:return"StrictMode";case Me:return"Suspense";case dt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wt:return(e.displayName||"Context")+".Consumer";case Et:return(e._context.displayName||"Context")+".Provider";case ce:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ht:return r=e.displayName||null,r!==null?r:fe(e.type)||"Memo";case Ce:r=e._payload,e=e._init;try{return fe(e(r))}catch{}}return null}function xe(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(r);case 8:return r===Ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function me(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function je(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ft(e){var r=je(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),l=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return d.call(this)},set:function(v){l=""+v,f.call(this,v)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Ys(e){e._valueTracker||(e._valueTracker=ft(e))}function bu(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return e&&(l=je(e)?e.checked?"true":"false":e.value),e=l,e!==a?(r.setValue(e),!0):!1}function Qs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function La(e,r){var a=r.checked;return H({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function ku(e,r){var a=r.defaultValue==null?"":r.defaultValue,l=r.checked!=null?r.checked:r.defaultChecked;a=me(r.value!=null?r.value:a),e._wrapperState={initialChecked:l,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ju(e,r){r=r.checked,r!=null&&I(e,"checked",r,!1)}function Da(e,r){ju(e,r);var a=me(r.value),l=r.type;if(a!=null)l==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Ma(e,r.type,a):r.hasOwnProperty("defaultValue")&&Ma(e,r.type,me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Su(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var l=r.type;if(!(l!=="submit"&&l!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Ma(e,r,a){(r!=="number"||Qs(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Wn=Array.isArray;function Xr(e,r,a,l){if(e=e.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=r.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+me(a),r=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}r!==null||e[d].disabled||(r=e[d])}r!==null&&(r.selected=!0)}}function $a(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return H({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nu(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(s(92));if(Wn(a)){if(1<a.length)throw Error(s(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:me(a)}}function Eu(e,r){var a=me(r.value),l=me(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),l!=null&&(e.defaultValue=""+l)}function Cu(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Tu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ua(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Tu(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xs,Pu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,l,d){MSApp.execUnsafeLocalFunction(function(){return e(r,a,l,d)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function qn(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bp=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(e){bp.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Hn[r]=Hn[e]})});function Ru(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Hn.hasOwnProperty(e)&&Hn[e]?(""+r).trim():r+"px"}function Ou(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var l=a.indexOf("--")===0,d=Ru(a,r[a],l);a==="float"&&(a="cssFloat"),l?e.setProperty(a,d):e[a]=d}}var kp=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(e,r){if(r){if(kp[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function Ba(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fa=null;function Wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qa=null,Zr=null,en=null;function Au(e){if(e=fs(e)){if(typeof qa!="function")throw Error(s(280));var r=e.stateNode;r&&(r=_i(r),qa(e.stateNode,e.type,r))}}function Iu(e){Zr?en?en.push(e):en=[e]:Zr=e}function Lu(){if(Zr){var e=Zr,r=en;if(en=Zr=null,Au(e),r)for(e=0;e<r.length;e++)Au(r[e])}}function Du(e,r){return e(r)}function Mu(){}var Ha=!1;function $u(e,r,a){if(Ha)return e(r,a);Ha=!0;try{return Du(e,r,a)}finally{Ha=!1,(Zr!==null||en!==null)&&(Mu(),Lu())}}function Vn(e,r){var a=e.stateNode;if(a===null)return null;var l=_i(a);if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Va=!1;if(p)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){Va=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{Va=!1}function jp(e,r,a,l,d,f,v,j,S){var A=Array.prototype.slice.call(arguments,3);try{r.apply(a,A)}catch($){this.onError($)}}var Gn=!1,Zs=null,ei=!1,Ka=null,Sp={onError:function(e){Gn=!0,Zs=e}};function Np(e,r,a,l,d,f,v,j,S){Gn=!1,Zs=null,jp.apply(Sp,arguments)}function Ep(e,r,a,l,d,f,v,j,S){if(Np.apply(this,arguments),Gn){if(Gn){var A=Zs;Gn=!1,Zs=null}else throw Error(s(198));ei||(ei=!0,Ka=A)}}function Tr(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function Uu(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function zu(e){if(Tr(e)!==e)throw Error(s(188))}function Cp(e){var r=e.alternate;if(!r){if(r=Tr(e),r===null)throw Error(s(188));return r!==e?null:e}for(var a=e,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return zu(d),e;if(f===l)return zu(d),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var v=!1,j=d.child;j;){if(j===a){v=!0,a=d,l=f;break}if(j===l){v=!0,l=d,a=f;break}j=j.sibling}if(!v){for(j=f.child;j;){if(j===a){v=!0,a=f,l=d;break}if(j===l){v=!0,l=f,a=d;break}j=j.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:r}function Bu(e){return e=Cp(e),e!==null?Fu(e):null}function Fu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Fu(e);if(r!==null)return r;e=e.sibling}return null}var Wu=t.unstable_scheduleCallback,qu=t.unstable_cancelCallback,Tp=t.unstable_shouldYield,Pp=t.unstable_requestPaint,Ie=t.unstable_now,Rp=t.unstable_getCurrentPriorityLevel,Ga=t.unstable_ImmediatePriority,Hu=t.unstable_UserBlockingPriority,ti=t.unstable_NormalPriority,Op=t.unstable_LowPriority,Vu=t.unstable_IdlePriority,ri=null,$t=null;function Ap(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(ri,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:Dp,Ip=Math.log,Lp=Math.LN2;function Dp(e){return e>>>=0,e===0?32:31-(Ip(e)/Lp|0)|0}var ni=64,si=4194304;function Jn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ii(e,r){var a=e.pendingLanes;if(a===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,v=a&268435455;if(v!==0){var j=v&~d;j!==0?l=Jn(j):(f&=v,f!==0&&(l=Jn(f)))}else v=a&~d,v!==0?l=Jn(v):f!==0&&(l=Jn(f));if(l===0)return 0;if(r!==0&&r!==l&&(r&d)===0&&(d=l&-l,f=r&-r,d>=f||d===16&&(f&4194240)!==0))return r;if((l&4)!==0&&(l|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=l;0<r;)a=31-Ct(r),d=1<<a,l|=e[a],r&=~d;return l}function Mp(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $p(e,r){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-Ct(f),j=1<<v,S=d[v];S===-1?((j&a)===0||(j&l)!==0)&&(d[v]=Mp(j,r)):S<=r&&(e.expiredLanes|=j),f&=~j}}function Ja(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ku(){var e=ni;return ni<<=1,(ni&4194240)===0&&(ni=64),e}function Ya(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Yn(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Ct(r),e[r]=a}function Up(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<a;){var d=31-Ct(a),f=1<<d;r[d]=0,l[d]=-1,e[d]=-1,a&=~f}}function Qa(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var l=31-Ct(a),d=1<<l;d&r|e[l]&r&&(e[l]|=r),a&=~d}}var ge=0;function Gu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ju,Xa,Yu,Qu,Xu,Za=!1,ai=[],nr=null,sr=null,ir=null,Qn=new Map,Xn=new Map,ar=[],zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(e,r){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Qn.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(r.pointerId)}}function Zn(e,r,a,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=fs(r),r!==null&&Xa(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),e)}function Bp(e,r,a,l,d){switch(r){case"focusin":return nr=Zn(nr,e,r,a,l,d),!0;case"dragenter":return sr=Zn(sr,e,r,a,l,d),!0;case"mouseover":return ir=Zn(ir,e,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Qn.set(f,Zn(Qn.get(f)||null,e,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Xn.set(f,Zn(Xn.get(f)||null,e,r,a,l,d)),!0}return!1}function ec(e){var r=Pr(e.target);if(r!==null){var a=Tr(r);if(a!==null){if(r=a.tag,r===13){if(r=Uu(a),r!==null){e.blockedOn=r,Xu(e.priority,function(){Yu(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=to(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Fa=l,a.target.dispatchEvent(l),Fa=null}else return r=fs(a),r!==null&&Xa(r),e.blockedOn=a,!1;r.shift()}return!0}function tc(e,r,a){oi(e)&&a.delete(r)}function Fp(){Za=!1,nr!==null&&oi(nr)&&(nr=null),sr!==null&&oi(sr)&&(sr=null),ir!==null&&oi(ir)&&(ir=null),Qn.forEach(tc),Xn.forEach(tc)}function es(e,r){e.blockedOn===r&&(e.blockedOn=null,Za||(Za=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Fp)))}function ts(e){function r(d){return es(d,e)}if(0<ai.length){es(ai[0],e);for(var a=1;a<ai.length;a++){var l=ai[a];l.blockedOn===e&&(l.blockedOn=null)}}for(nr!==null&&es(nr,e),sr!==null&&es(sr,e),ir!==null&&es(ir,e),Qn.forEach(r),Xn.forEach(r),a=0;a<ar.length;a++)l=ar[a],l.blockedOn===e&&(l.blockedOn=null);for(;0<ar.length&&(a=ar[0],a.blockedOn===null);)ec(a),a.blockedOn===null&&ar.shift()}var tn=z.ReactCurrentBatchConfig,li=!0;function Wp(e,r,a,l){var d=ge,f=tn.transition;tn.transition=null;try{ge=1,eo(e,r,a,l)}finally{ge=d,tn.transition=f}}function qp(e,r,a,l){var d=ge,f=tn.transition;tn.transition=null;try{ge=4,eo(e,r,a,l)}finally{ge=d,tn.transition=f}}function eo(e,r,a,l){if(li){var d=to(e,r,a,l);if(d===null)xo(e,r,l,ui,a),Zu(e,l);else if(Bp(d,e,r,a,l))l.stopPropagation();else if(Zu(e,l),r&4&&-1<zp.indexOf(e)){for(;d!==null;){var f=fs(d);if(f!==null&&Ju(f),f=to(e,r,a,l),f===null&&xo(e,r,l,ui,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else xo(e,r,l,null,a)}}var ui=null;function to(e,r,a,l){if(ui=null,e=Wa(l),e=Pr(e),e!==null)if(r=Tr(e),r===null)e=null;else if(a=r.tag,a===13){if(e=Uu(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return ui=e,null}function rc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rp()){case Ga:return 1;case Hu:return 4;case ti:case Op:return 16;case Vu:return 536870912;default:return 16}default:return 16}}var or=null,ro=null,ci=null;function nc(){if(ci)return ci;var e,r=ro,a=r.length,l,d="value"in or?or.value:or.textContent,f=d.length;for(e=0;e<a&&r[e]===d[e];e++);var v=a-e;for(l=1;l<=v&&r[a-l]===d[f-l];l++);return ci=d.slice(e,1<l?1-l:void 0)}function di(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function sc(){return!1}function pt(e){function r(a,l,d,f,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(a=e[j],this[j]=a?a(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?hi:sc,this.isPropagationStopped=sc,this}return H(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),r}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=pt(rn),rs=H({},rn,{view:0,detail:0}),Hp=pt(rs),so,io,ns,fi=H({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?(so=e.screenX-ns.screenX,io=e.screenY-ns.screenY):io=so=0,ns=e),so)},movementY:function(e){return"movementY"in e?e.movementY:io}}),ic=pt(fi),Vp=H({},fi,{dataTransfer:0}),Kp=pt(Vp),Gp=H({},rs,{relatedTarget:0}),ao=pt(Gp),Jp=H({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Yp=pt(Jp),Qp=H({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xp=pt(Qp),Zp=H({},rn,{data:0}),ac=pt(Zp),em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nm(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=rm[e])?!!r[e]:!1}function oo(){return nm}var sm=H({},rs,{key:function(e){if(e.key){var r=em[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(e){return e.type==="keypress"?di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),im=pt(sm),am=H({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=pt(am),om=H({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),lm=pt(om),um=H({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cm=pt(um),dm=H({},fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hm=pt(dm),fm=[9,13,27,32],lo=p&&"CompositionEvent"in window,ss=null;p&&"documentMode"in document&&(ss=document.documentMode);var pm=p&&"TextEvent"in window&&!ss,lc=p&&(!lo||ss&&8<ss&&11>=ss),uc=" ",cc=!1;function dc(e,r){switch(e){case"keyup":return fm.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nn=!1;function mm(e,r){switch(e){case"compositionend":return hc(r);case"keypress":return r.which!==32?null:(cc=!0,uc);case"textInput":return e=r.data,e===uc&&cc?null:e;default:return null}}function gm(e,r){if(nn)return e==="compositionend"||!lo&&dc(e,r)?(e=nc(),ci=ro=or=null,nn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return lc&&r.locale!=="ko"?null:r.data;default:return null}}var vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fc(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!vm[e.type]:r==="textarea"}function pc(e,r,a,l){Iu(l),r=yi(r,"onChange"),0<r.length&&(a=new no("onChange","change",null,a,l),e.push({event:a,listeners:r}))}var is=null,as=null;function ym(e){Oc(e,0)}function pi(e){var r=un(e);if(bu(r))return e}function xm(e,r){if(e==="change")return r}var mc=!1;if(p){var uo;if(p){var co="oninput"in document;if(!co){var gc=document.createElement("div");gc.setAttribute("oninput","return;"),co=typeof gc.oninput=="function"}uo=co}else uo=!1;mc=uo&&(!document.documentMode||9<document.documentMode)}function vc(){is&&(is.detachEvent("onpropertychange",yc),as=is=null)}function yc(e){if(e.propertyName==="value"&&pi(as)){var r=[];pc(r,as,e,Wa(e)),$u(ym,r)}}function wm(e,r,a){e==="focusin"?(vc(),is=r,as=a,is.attachEvent("onpropertychange",yc)):e==="focusout"&&vc()}function _m(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pi(as)}function bm(e,r){if(e==="click")return pi(r)}function km(e,r){if(e==="input"||e==="change")return pi(r)}function jm(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Tt=typeof Object.is=="function"?Object.is:jm;function os(e,r){if(Tt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!m.call(r,d)||!Tt(e[d],r[d]))return!1}return!0}function xc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wc(e,r){var a=xc(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=r&&l>=r)return{node:a,offset:r-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xc(a)}}function _c(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?_c(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function bc(){for(var e=window,r=Qs();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Qs(e.document)}return r}function ho(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function Sm(e){var r=bc(),a=e.focusedElem,l=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&_c(a.ownerDocument.documentElement,a)){if(l!==null&&ho(a)){if(r=l.start,e=l.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var d=a.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=wc(a,f);var v=wc(a,l);d&&v&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(r),e.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nm=p&&"documentMode"in document&&11>=document.documentMode,sn=null,fo=null,ls=null,po=!1;function kc(e,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;po||sn==null||sn!==Qs(l)||(l=sn,"selectionStart"in l&&ho(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ls&&os(ls,l)||(ls=l,l=yi(fo,"onSelect"),0<l.length&&(r=new no("onSelect","select",null,r,a),e.push({event:r,listeners:l}),r.target=sn)))}function mi(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var an={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionend:mi("Transition","TransitionEnd")},mo={},jc={};p&&(jc=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function gi(e){if(mo[e])return mo[e];if(!an[e])return e;var r=an[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in jc)return mo[e]=r[a];return e}var Sc=gi("animationend"),Nc=gi("animationiteration"),Ec=gi("animationstart"),Cc=gi("transitionend"),Tc=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(e,r){Tc.set(e,r),c(r,[e])}for(var go=0;go<Pc.length;go++){var vo=Pc[go],Em=vo.toLowerCase(),Cm=vo[0].toUpperCase()+vo.slice(1);lr(Em,"on"+Cm)}lr(Sc,"onAnimationEnd"),lr(Nc,"onAnimationIteration"),lr(Ec,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(Cc,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(us));function Rc(e,r,a){var l=e.type||"unknown-event";e.currentTarget=a,Ep(l,r,void 0,e),e.currentTarget=null}function Oc(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var v=l.length-1;0<=v;v--){var j=l[v],S=j.instance,A=j.currentTarget;if(j=j.listener,S!==f&&d.isPropagationStopped())break e;Rc(d,j,A),f=S}else for(v=0;v<l.length;v++){if(j=l[v],S=j.instance,A=j.currentTarget,j=j.listener,S!==f&&d.isPropagationStopped())break e;Rc(d,j,A),f=S}}}if(ei)throw e=Ka,ei=!1,Ka=null,e}function be(e,r){var a=r[So];a===void 0&&(a=r[So]=new Set);var l=e+"__bubble";a.has(l)||(Ac(r,e,2,!1),a.add(l))}function yo(e,r,a){var l=0;r&&(l|=4),Ac(a,e,l,r)}var vi="_reactListening"+Math.random().toString(36).slice(2);function cs(e){if(!e[vi]){e[vi]=!0,i.forEach(function(a){a!=="selectionchange"&&(Tm.has(a)||yo(a,!1,e),yo(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[vi]||(r[vi]=!0,yo("selectionchange",!1,r))}}function Ac(e,r,a,l){switch(rc(r)){case 1:var d=Wp;break;case 4:d=qp;break;default:d=eo}a=d.bind(null,r,a,e),d=void 0,!Va||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(r,a,{capture:!0,passive:d}):e.addEventListener(r,a,!0):d!==void 0?e.addEventListener(r,a,{passive:d}):e.addEventListener(r,a,!1)}function xo(e,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var j=l.stateNode.containerInfo;if(j===d||j.nodeType===8&&j.parentNode===d)break;if(v===4)for(v=l.return;v!==null;){var S=v.tag;if((S===3||S===4)&&(S=v.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;v=v.return}for(;j!==null;){if(v=Pr(j),v===null)return;if(S=v.tag,S===5||S===6){l=f=v;continue e}j=j.parentNode}}l=l.return}$u(function(){var A=f,$=Wa(a),U=[];e:{var D=Tc.get(e);if(D!==void 0){var W=no,V=e;switch(e){case"keypress":if(di(a)===0)break e;case"keydown":case"keyup":W=im;break;case"focusin":V="focus",W=ao;break;case"focusout":V="blur",W=ao;break;case"beforeblur":case"afterblur":W=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Kp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=lm;break;case Sc:case Nc:case Ec:W=Yp;break;case Cc:W=cm;break;case"scroll":W=Hp;break;case"wheel":W=hm;break;case"copy":case"cut":case"paste":W=Xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=oc}var K=(r&4)!==0,Le=!K&&e==="scroll",P=K?D!==null?D+"Capture":null:D;K=[];for(var E=A,R;E!==null;){R=E;var B=R.stateNode;if(R.tag===5&&B!==null&&(R=B,P!==null&&(B=Vn(E,P),B!=null&&K.push(ds(E,B,R)))),Le)break;E=E.return}0<K.length&&(D=new W(D,V,null,a,$),U.push({event:D,listeners:K}))}}if((r&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",D&&a!==Fa&&(V=a.relatedTarget||a.fromElement)&&(Pr(V)||V[qt]))break e;if((W||D)&&(D=$.window===$?$:(D=$.ownerDocument)?D.defaultView||D.parentWindow:window,W?(V=a.relatedTarget||a.toElement,W=A,V=V?Pr(V):null,V!==null&&(Le=Tr(V),V!==Le||V.tag!==5&&V.tag!==6)&&(V=null)):(W=null,V=A),W!==V)){if(K=ic,B="onMouseLeave",P="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(K=oc,B="onPointerLeave",P="onPointerEnter",E="pointer"),Le=W==null?D:un(W),R=V==null?D:un(V),D=new K(B,E+"leave",W,a,$),D.target=Le,D.relatedTarget=R,B=null,Pr($)===A&&(K=new K(P,E+"enter",V,a,$),K.target=R,K.relatedTarget=Le,B=K),Le=B,W&&V)t:{for(K=W,P=V,E=0,R=K;R;R=on(R))E++;for(R=0,B=P;B;B=on(B))R++;for(;0<E-R;)K=on(K),E--;for(;0<R-E;)P=on(P),R--;for(;E--;){if(K===P||P!==null&&K===P.alternate)break t;K=on(K),P=on(P)}K=null}else K=null;W!==null&&Ic(U,D,W,K,!1),V!==null&&Le!==null&&Ic(U,Le,V,K,!0)}}e:{if(D=A?un(A):window,W=D.nodeName&&D.nodeName.toLowerCase(),W==="select"||W==="input"&&D.type==="file")var Y=xm;else if(fc(D))if(mc)Y=km;else{Y=_m;var Z=wm}else(W=D.nodeName)&&W.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(Y=bm);if(Y&&(Y=Y(e,A))){pc(U,Y,a,$);break e}Z&&Z(e,D,A),e==="focusout"&&(Z=D._wrapperState)&&Z.controlled&&D.type==="number"&&Ma(D,"number",D.value)}switch(Z=A?un(A):window,e){case"focusin":(fc(Z)||Z.contentEditable==="true")&&(sn=Z,fo=A,ls=null);break;case"focusout":ls=fo=sn=null;break;case"mousedown":po=!0;break;case"contextmenu":case"mouseup":case"dragend":po=!1,kc(U,a,$);break;case"selectionchange":if(Nm)break;case"keydown":case"keyup":kc(U,a,$)}var ee;if(lo)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else nn?dc(e,a)&&(ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ne="onCompositionStart");ne&&(lc&&a.locale!=="ko"&&(nn||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&nn&&(ee=nc()):(or=$,ro="value"in or?or.value:or.textContent,nn=!0)),Z=yi(A,ne),0<Z.length&&(ne=new ac(ne,e,null,a,$),U.push({event:ne,listeners:Z}),ee?ne.data=ee:(ee=hc(a),ee!==null&&(ne.data=ee)))),(ee=pm?mm(e,a):gm(e,a))&&(A=yi(A,"onBeforeInput"),0<A.length&&($=new ac("onBeforeInput","beforeinput",null,a,$),U.push({event:$,listeners:A}),$.data=ee))}Oc(U,r)})}function ds(e,r,a){return{instance:e,listener:r,currentTarget:a}}function yi(e,r){for(var a=r+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Vn(e,a),f!=null&&l.unshift(ds(e,f,d)),f=Vn(e,r),f!=null&&l.push(ds(e,f,d))),e=e.return}return l}function on(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ic(e,r,a,l,d){for(var f=r._reactName,v=[];a!==null&&a!==l;){var j=a,S=j.alternate,A=j.stateNode;if(S!==null&&S===l)break;j.tag===5&&A!==null&&(j=A,d?(S=Vn(a,f),S!=null&&v.unshift(ds(a,S,j))):d||(S=Vn(a,f),S!=null&&v.push(ds(a,S,j)))),a=a.return}v.length!==0&&e.push({event:r,listeners:v})}var Pm=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function Lc(e){return(typeof e=="string"?e:""+e).replace(Pm,`
`).replace(Rm,"")}function xi(e,r,a){if(r=Lc(r),Lc(e)!==r&&a)throw Error(s(425))}function wi(){}var wo=null,_o=null;function bo(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,Om=typeof clearTimeout=="function"?clearTimeout:void 0,Dc=typeof Promise=="function"?Promise:void 0,Am=typeof queueMicrotask=="function"?queueMicrotask:typeof Dc<"u"?function(e){return Dc.resolve(null).then(e).catch(Im)}:ko;function Im(e){setTimeout(function(){throw e})}function jo(e,r){var a=r,l=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(l===0){e.removeChild(d),ts(r);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=d}while(a);ts(r)}function ur(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Mc(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var ln=Math.random().toString(36).slice(2),Ut="__reactFiber$"+ln,hs="__reactProps$"+ln,qt="__reactContainer$"+ln,So="__reactEvents$"+ln,Lm="__reactListeners$"+ln,Dm="__reactHandles$"+ln;function Pr(e){var r=e[Ut];if(r)return r;for(var a=e.parentNode;a;){if(r=a[qt]||a[Ut]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=Mc(e);e!==null;){if(a=e[Ut])return a;e=Mc(e)}return r}e=a,a=e.parentNode}return null}function fs(e){return e=e[Ut]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function un(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function _i(e){return e[hs]||null}var No=[],cn=-1;function cr(e){return{current:e}}function ke(e){0>cn||(e.current=No[cn],No[cn]=null,cn--)}function we(e,r){cn++,No[cn]=e.current,e.current=r}var dr={},Ze=cr(dr),it=cr(!1),Rr=dr;function dn(e,r){var a=e.type.contextTypes;if(!a)return dr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===r)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=r[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=d),d}function at(e){return e=e.childContextTypes,e!=null}function bi(){ke(it),ke(Ze)}function $c(e,r,a){if(Ze.current!==dr)throw Error(s(168));we(Ze,r),we(it,a)}function Uc(e,r,a){var l=e.stateNode;if(r=r.childContextTypes,typeof l.getChildContext!="function")return a;l=l.getChildContext();for(var d in l)if(!(d in r))throw Error(s(108,xe(e)||"Unknown",d));return H({},a,l)}function ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Rr=Ze.current,we(Ze,e),we(it,it.current),!0}function zc(e,r,a){var l=e.stateNode;if(!l)throw Error(s(169));a?(e=Uc(e,r,Rr),l.__reactInternalMemoizedMergedChildContext=e,ke(it),ke(Ze),we(Ze,e)):ke(it),we(it,a)}var Ht=null,ji=!1,Eo=!1;function Bc(e){Ht===null?Ht=[e]:Ht.push(e)}function Mm(e){ji=!0,Bc(e)}function hr(){if(!Eo&&Ht!==null){Eo=!0;var e=0,r=ge;try{var a=Ht;for(ge=1;e<a.length;e++){var l=a[e];do l=l(!0);while(l!==null)}Ht=null,ji=!1}catch(d){throw Ht!==null&&(Ht=Ht.slice(e+1)),Wu(Ga,hr),d}finally{ge=r,Eo=!1}}return null}var hn=[],fn=0,Si=null,Ni=0,wt=[],_t=0,Or=null,Vt=1,Kt="";function Ar(e,r){hn[fn++]=Ni,hn[fn++]=Si,Si=e,Ni=r}function Fc(e,r,a){wt[_t++]=Vt,wt[_t++]=Kt,wt[_t++]=Or,Or=e;var l=Vt;e=Kt;var d=32-Ct(l)-1;l&=~(1<<d),a+=1;var f=32-Ct(r)+d;if(30<f){var v=d-d%5;f=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Vt=1<<32-Ct(r)+d|a<<d|l,Kt=f+e}else Vt=1<<f|a<<d|l,Kt=e}function Co(e){e.return!==null&&(Ar(e,1),Fc(e,1,0))}function To(e){for(;e===Si;)Si=hn[--fn],hn[fn]=null,Ni=hn[--fn],hn[fn]=null;for(;e===Or;)Or=wt[--_t],wt[_t]=null,Kt=wt[--_t],wt[_t]=null,Vt=wt[--_t],wt[_t]=null}var mt=null,gt=null,Se=!1,Pt=null;function Wc(e,r){var a=St(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function qc(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,mt=e,gt=ur(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,mt=e,gt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Or!==null?{id:Vt,overflow:Kt}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=St(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,mt=e,gt=null,!0):!1;default:return!1}}function Po(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ro(e){if(Se){var r=gt;if(r){var a=r;if(!qc(e,r)){if(Po(e))throw Error(s(418));r=ur(a.nextSibling);var l=mt;r&&qc(e,r)?Wc(l,a):(e.flags=e.flags&-4097|2,Se=!1,mt=e)}}else{if(Po(e))throw Error(s(418));e.flags=e.flags&-4097|2,Se=!1,mt=e}}}function Hc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function Ei(e){if(e!==mt)return!1;if(!Se)return Hc(e),Se=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!bo(e.type,e.memoizedProps)),r&&(r=gt)){if(Po(e))throw Vc(),Error(s(418));for(;r;)Wc(e,r),r=ur(r.nextSibling)}if(Hc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){gt=ur(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}gt=null}}else gt=mt?ur(e.stateNode.nextSibling):null;return!0}function Vc(){for(var e=gt;e;)e=ur(e.nextSibling)}function pn(){gt=mt=null,Se=!1}function Oo(e){Pt===null?Pt=[e]:Pt.push(e)}var $m=z.ReactCurrentBatchConfig;function ps(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var l=a.stateNode}if(!l)throw Error(s(147,e));var d=l,f=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===f?r.ref:(r=function(v){var j=d.refs;v===null?delete j[f]:j[f]=v},r._stringRef=f,r)}if(typeof e!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function Ci(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Kc(e){var r=e._init;return r(e._payload)}function Gc(e){function r(P,E){if(e){var R=P.deletions;R===null?(P.deletions=[E],P.flags|=16):R.push(E)}}function a(P,E){if(!e)return null;for(;E!==null;)r(P,E),E=E.sibling;return null}function l(P,E){for(P=new Map;E!==null;)E.key!==null?P.set(E.key,E):P.set(E.index,E),E=E.sibling;return P}function d(P,E){return P=wr(P,E),P.index=0,P.sibling=null,P}function f(P,E,R){return P.index=R,e?(R=P.alternate,R!==null?(R=R.index,R<E?(P.flags|=2,E):R):(P.flags|=2,E)):(P.flags|=1048576,E)}function v(P){return e&&P.alternate===null&&(P.flags|=2),P}function j(P,E,R,B){return E===null||E.tag!==6?(E=kl(R,P.mode,B),E.return=P,E):(E=d(E,R),E.return=P,E)}function S(P,E,R,B){var Y=R.type;return Y===ae?$(P,E,R.props.children,B,R.key):E!==null&&(E.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Ce&&Kc(Y)===E.type)?(B=d(E,R.props),B.ref=ps(P,E,R),B.return=P,B):(B=Xi(R.type,R.key,R.props,null,P.mode,B),B.ref=ps(P,E,R),B.return=P,B)}function A(P,E,R,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=jl(R,P.mode,B),E.return=P,E):(E=d(E,R.children||[]),E.return=P,E)}function $(P,E,R,B,Y){return E===null||E.tag!==7?(E=Br(R,P.mode,B,Y),E.return=P,E):(E=d(E,R),E.return=P,E)}function U(P,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=kl(""+E,P.mode,R),E.return=P,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case G:return R=Xi(E.type,E.key,E.props,null,P.mode,R),R.ref=ps(P,null,E),R.return=P,R;case J:return E=jl(E,P.mode,R),E.return=P,E;case Ce:var B=E._init;return U(P,B(E._payload),R)}if(Wn(E)||X(E))return E=Br(E,P.mode,R,null),E.return=P,E;Ci(P,E)}return null}function D(P,E,R,B){var Y=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Y!==null?null:j(P,E,""+R,B);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case G:return R.key===Y?S(P,E,R,B):null;case J:return R.key===Y?A(P,E,R,B):null;case Ce:return Y=R._init,D(P,E,Y(R._payload),B)}if(Wn(R)||X(R))return Y!==null?null:$(P,E,R,B,null);Ci(P,R)}return null}function W(P,E,R,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return P=P.get(R)||null,j(E,P,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case G:return P=P.get(B.key===null?R:B.key)||null,S(E,P,B,Y);case J:return P=P.get(B.key===null?R:B.key)||null,A(E,P,B,Y);case Ce:var Z=B._init;return W(P,E,R,Z(B._payload),Y)}if(Wn(B)||X(B))return P=P.get(R)||null,$(E,P,B,Y,null);Ci(E,B)}return null}function V(P,E,R,B){for(var Y=null,Z=null,ee=E,ne=E=0,He=null;ee!==null&&ne<R.length;ne++){ee.index>ne?(He=ee,ee=null):He=ee.sibling;var pe=D(P,ee,R[ne],B);if(pe===null){ee===null&&(ee=He);break}e&&ee&&pe.alternate===null&&r(P,ee),E=f(pe,E,ne),Z===null?Y=pe:Z.sibling=pe,Z=pe,ee=He}if(ne===R.length)return a(P,ee),Se&&Ar(P,ne),Y;if(ee===null){for(;ne<R.length;ne++)ee=U(P,R[ne],B),ee!==null&&(E=f(ee,E,ne),Z===null?Y=ee:Z.sibling=ee,Z=ee);return Se&&Ar(P,ne),Y}for(ee=l(P,ee);ne<R.length;ne++)He=W(ee,P,ne,R[ne],B),He!==null&&(e&&He.alternate!==null&&ee.delete(He.key===null?ne:He.key),E=f(He,E,ne),Z===null?Y=He:Z.sibling=He,Z=He);return e&&ee.forEach(function(_r){return r(P,_r)}),Se&&Ar(P,ne),Y}function K(P,E,R,B){var Y=X(R);if(typeof Y!="function")throw Error(s(150));if(R=Y.call(R),R==null)throw Error(s(151));for(var Z=Y=null,ee=E,ne=E=0,He=null,pe=R.next();ee!==null&&!pe.done;ne++,pe=R.next()){ee.index>ne?(He=ee,ee=null):He=ee.sibling;var _r=D(P,ee,pe.value,B);if(_r===null){ee===null&&(ee=He);break}e&&ee&&_r.alternate===null&&r(P,ee),E=f(_r,E,ne),Z===null?Y=_r:Z.sibling=_r,Z=_r,ee=He}if(pe.done)return a(P,ee),Se&&Ar(P,ne),Y;if(ee===null){for(;!pe.done;ne++,pe=R.next())pe=U(P,pe.value,B),pe!==null&&(E=f(pe,E,ne),Z===null?Y=pe:Z.sibling=pe,Z=pe);return Se&&Ar(P,ne),Y}for(ee=l(P,ee);!pe.done;ne++,pe=R.next())pe=W(ee,P,ne,pe.value,B),pe!==null&&(e&&pe.alternate!==null&&ee.delete(pe.key===null?ne:pe.key),E=f(pe,E,ne),Z===null?Y=pe:Z.sibling=pe,Z=pe);return e&&ee.forEach(function(v0){return r(P,v0)}),Se&&Ar(P,ne),Y}function Le(P,E,R,B){if(typeof R=="object"&&R!==null&&R.type===ae&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case G:e:{for(var Y=R.key,Z=E;Z!==null;){if(Z.key===Y){if(Y=R.type,Y===ae){if(Z.tag===7){a(P,Z.sibling),E=d(Z,R.props.children),E.return=P,P=E;break e}}else if(Z.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Ce&&Kc(Y)===Z.type){a(P,Z.sibling),E=d(Z,R.props),E.ref=ps(P,Z,R),E.return=P,P=E;break e}a(P,Z);break}else r(P,Z);Z=Z.sibling}R.type===ae?(E=Br(R.props.children,P.mode,B,R.key),E.return=P,P=E):(B=Xi(R.type,R.key,R.props,null,P.mode,B),B.ref=ps(P,E,R),B.return=P,P=B)}return v(P);case J:e:{for(Z=R.key;E!==null;){if(E.key===Z)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){a(P,E.sibling),E=d(E,R.children||[]),E.return=P,P=E;break e}else{a(P,E);break}else r(P,E);E=E.sibling}E=jl(R,P.mode,B),E.return=P,P=E}return v(P);case Ce:return Z=R._init,Le(P,E,Z(R._payload),B)}if(Wn(R))return V(P,E,R,B);if(X(R))return K(P,E,R,B);Ci(P,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(a(P,E.sibling),E=d(E,R),E.return=P,P=E):(a(P,E),E=kl(R,P.mode,B),E.return=P,P=E),v(P)):a(P,E)}return Le}var mn=Gc(!0),Jc=Gc(!1),Ti=cr(null),Pi=null,gn=null,Ao=null;function Io(){Ao=gn=Pi=null}function Lo(e){var r=Ti.current;ke(Ti),e._currentValue=r}function Do(e,r,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===a)break;e=e.return}}function vn(e,r){Pi=e,Ao=gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(ot=!0),e.firstContext=null)}function bt(e){var r=e._currentValue;if(Ao!==e)if(e={context:e,memoizedValue:r,next:null},gn===null){if(Pi===null)throw Error(s(308));gn=e,Pi.dependencies={lanes:0,firstContext:e}}else gn=gn.next=e;return r}var Ir=null;function Mo(e){Ir===null?Ir=[e]:Ir.push(e)}function Yc(e,r,a,l){var d=r.interleaved;return d===null?(a.next=a,Mo(r)):(a.next=d.next,d.next=a),r.interleaved=a,Gt(e,l)}function Gt(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var fr=!1;function $o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qc(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jt(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function pr(e,r,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(de&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,Gt(e,a)}return d=l.interleaved,d===null?(r.next=r,Mo(l)):(r.next=d.next,d.next=r),l.interleaved=r,Gt(e,a)}function Ri(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,Qa(e,a)}}function Xc(e,r){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function Oi(e,r,a,l){var d=e.updateQueue;fr=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var S=j,A=S.next;S.next=null,v===null?f=A:v.next=A,v=S;var $=e.alternate;$!==null&&($=$.updateQueue,j=$.lastBaseUpdate,j!==v&&(j===null?$.firstBaseUpdate=A:j.next=A,$.lastBaseUpdate=S))}if(f!==null){var U=d.baseState;v=0,$=A=S=null,j=f;do{var D=j.lane,W=j.eventTime;if((l&D)===D){$!==null&&($=$.next={eventTime:W,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var V=e,K=j;switch(D=r,W=a,K.tag){case 1:if(V=K.payload,typeof V=="function"){U=V.call(W,U,D);break e}U=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=K.payload,D=typeof V=="function"?V.call(W,U,D):V,D==null)break e;U=H({},U,D);break e;case 2:fr=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,D=d.effects,D===null?d.effects=[j]:D.push(j))}else W={eventTime:W,lane:D,tag:j.tag,payload:j.payload,callback:j.callback,next:null},$===null?(A=$=W,S=U):$=$.next=W,v|=D;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;D=j,j=D.next,D.next=null,d.lastBaseUpdate=D,d.shared.pending=null}}while(!0);if($===null&&(S=U),d.baseState=S,d.firstBaseUpdate=A,d.lastBaseUpdate=$,r=d.shared.interleaved,r!==null){d=r;do v|=d.lane,d=d.next;while(d!==r)}else f===null&&(d.shared.lanes=0);Mr|=v,e.lanes=v,e.memoizedState=U}}function Zc(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var l=e[r],d=l.callback;if(d!==null){if(l.callback=null,l=a,typeof d!="function")throw Error(s(191,d));d.call(l)}}}var ms={},zt=cr(ms),gs=cr(ms),vs=cr(ms);function Lr(e){if(e===ms)throw Error(s(174));return e}function Uo(e,r){switch(we(vs,r),we(gs,e),we(zt,ms),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ua(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Ua(r,e)}ke(zt),we(zt,r)}function yn(){ke(zt),ke(gs),ke(vs)}function ed(e){Lr(vs.current);var r=Lr(zt.current),a=Ua(r,e.type);r!==a&&(we(gs,e),we(zt,a))}function zo(e){gs.current===e&&(ke(zt),ke(gs))}var Te=cr(0);function Ai(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bo=[];function Fo(){for(var e=0;e<Bo.length;e++)Bo[e]._workInProgressVersionPrimary=null;Bo.length=0}var Ii=z.ReactCurrentDispatcher,Wo=z.ReactCurrentBatchConfig,Dr=0,Pe=null,ze=null,We=null,Li=!1,ys=!1,xs=0,Um=0;function et(){throw Error(s(321))}function qo(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!Tt(e[a],r[a]))return!1;return!0}function Ho(e,r,a,l,d,f){if(Dr=f,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ii.current=e===null||e.memoizedState===null?Wm:qm,e=a(l,d),ys){f=0;do{if(ys=!1,xs=0,25<=f)throw Error(s(301));f+=1,We=ze=null,r.updateQueue=null,Ii.current=Hm,e=a(l,d)}while(ys)}if(Ii.current=$i,r=ze!==null&&ze.next!==null,Dr=0,We=ze=Pe=null,Li=!1,r)throw Error(s(300));return e}function Vo(){var e=xs!==0;return xs=0,e}function Bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Pe.memoizedState=We=e:We=We.next=e,We}function kt(){if(ze===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var r=We===null?Pe.memoizedState:We.next;if(r!==null)We=r,ze=e;else{if(e===null)throw Error(s(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},We===null?Pe.memoizedState=We=e:We=We.next=e}return We}function ws(e,r){return typeof r=="function"?r(e):r}function Ko(e){var r=kt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=ze,d=l.baseQueue,f=a.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}l.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,l=l.baseState;var j=v=null,S=null,A=f;do{var $=A.lane;if((Dr&$)===$)S!==null&&(S=S.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),l=A.hasEagerState?A.eagerState:e(l,A.action);else{var U={lane:$,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};S===null?(j=S=U,v=l):S=S.next=U,Pe.lanes|=$,Mr|=$}A=A.next}while(A!==null&&A!==f);S===null?v=l:S.next=j,Tt(l,r.memoizedState)||(ot=!0),r.memoizedState=l,r.baseState=v,r.baseQueue=S,a.lastRenderedState=l}if(e=a.interleaved,e!==null){d=e;do f=d.lane,Pe.lanes|=f,Mr|=f,d=d.next;while(d!==e)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Go(e){var r=kt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);Tt(f,r.memoizedState)||(ot=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function td(){}function rd(e,r){var a=Pe,l=kt(),d=r(),f=!Tt(l.memoizedState,d);if(f&&(l.memoizedState=d,ot=!0),l=l.queue,Jo(id.bind(null,a,l,e),[e]),l.getSnapshot!==r||f||We!==null&&We.memoizedState.tag&1){if(a.flags|=2048,_s(9,sd.bind(null,a,l,d,r),void 0,null),qe===null)throw Error(s(349));(Dr&30)!==0||nd(a,r,d)}return d}function nd(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r={lastEffect:null,stores:null},Pe.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function sd(e,r,a,l){r.value=a,r.getSnapshot=l,ad(r)&&od(e)}function id(e,r,a){return a(function(){ad(r)&&od(e)})}function ad(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!Tt(e,a)}catch{return!0}}function od(e){var r=Gt(e,1);r!==null&&It(r,e,1,-1)}function ld(e){var r=Bt();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},r.queue=e,e=e.dispatch=Fm.bind(null,Pe,e),[r.memoizedState,e]}function _s(e,r,a,l){return e={tag:e,create:r,destroy:a,deps:l,next:null},r=Pe.updateQueue,r===null?(r={lastEffect:null,stores:null},Pe.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,r.lastEffect=e)),e}function ud(){return kt().memoizedState}function Di(e,r,a,l){var d=Bt();Pe.flags|=e,d.memoizedState=_s(1|r,a,void 0,l===void 0?null:l)}function Mi(e,r,a,l){var d=kt();l=l===void 0?null:l;var f=void 0;if(ze!==null){var v=ze.memoizedState;if(f=v.destroy,l!==null&&qo(l,v.deps)){d.memoizedState=_s(r,a,f,l);return}}Pe.flags|=e,d.memoizedState=_s(1|r,a,f,l)}function cd(e,r){return Di(8390656,8,e,r)}function Jo(e,r){return Mi(2048,8,e,r)}function dd(e,r){return Mi(4,2,e,r)}function hd(e,r){return Mi(4,4,e,r)}function fd(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function pd(e,r,a){return a=a!=null?a.concat([e]):null,Mi(4,4,fd.bind(null,r,e),a)}function Yo(){}function md(e,r){var a=kt();r=r===void 0?null:r;var l=a.memoizedState;return l!==null&&r!==null&&qo(r,l[1])?l[0]:(a.memoizedState=[e,r],e)}function gd(e,r){var a=kt();r=r===void 0?null:r;var l=a.memoizedState;return l!==null&&r!==null&&qo(r,l[1])?l[0]:(e=e(),a.memoizedState=[e,r],e)}function vd(e,r,a){return(Dr&21)===0?(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=a):(Tt(a,r)||(a=Ku(),Pe.lanes|=a,Mr|=a,e.baseState=!0),r)}function zm(e,r){var a=ge;ge=a!==0&&4>a?a:4,e(!0);var l=Wo.transition;Wo.transition={};try{e(!1),r()}finally{ge=a,Wo.transition=l}}function yd(){return kt().memoizedState}function Bm(e,r,a){var l=yr(e);if(a={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null},xd(e))wd(r,a);else if(a=Yc(e,r,a,l),a!==null){var d=st();It(a,e,l,d),_d(a,r,l)}}function Fm(e,r,a){var l=yr(e),d={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null};if(xd(e))wd(r,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,j=f(v,a);if(d.hasEagerState=!0,d.eagerState=j,Tt(j,v)){var S=r.interleaved;S===null?(d.next=d,Mo(r)):(d.next=S.next,S.next=d),r.interleaved=d;return}}catch{}finally{}a=Yc(e,r,d,l),a!==null&&(d=st(),It(a,e,l,d),_d(a,r,l))}}function xd(e){var r=e.alternate;return e===Pe||r!==null&&r===Pe}function wd(e,r){ys=Li=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function _d(e,r,a){if((a&4194240)!==0){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,Qa(e,a)}}var $i={readContext:bt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Wm={readContext:bt,useCallback:function(e,r){return Bt().memoizedState=[e,r===void 0?null:r],e},useContext:bt,useEffect:cd,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Di(4194308,4,fd.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Di(4194308,4,e,r)},useInsertionEffect:function(e,r){return Di(4,2,e,r)},useMemo:function(e,r){var a=Bt();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var l=Bt();return r=a!==void 0?a(r):r,l.memoizedState=l.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=Bm.bind(null,Pe,e),[l.memoizedState,e]},useRef:function(e){var r=Bt();return e={current:e},r.memoizedState=e},useState:ld,useDebugValue:Yo,useDeferredValue:function(e){return Bt().memoizedState=e},useTransition:function(){var e=ld(!1),r=e[0];return e=zm.bind(null,e[1]),Bt().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var l=Pe,d=Bt();if(Se){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),qe===null)throw Error(s(349));(Dr&30)!==0||nd(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,cd(id.bind(null,l,f,e),[e]),l.flags|=2048,_s(9,sd.bind(null,l,f,a,r),void 0,null),a},useId:function(){var e=Bt(),r=qe.identifierPrefix;if(Se){var a=Kt,l=Vt;a=(l&~(1<<32-Ct(l)-1)).toString(32)+a,r=":"+r+"R"+a,a=xs++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Um++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},qm={readContext:bt,useCallback:md,useContext:bt,useEffect:Jo,useImperativeHandle:pd,useInsertionEffect:dd,useLayoutEffect:hd,useMemo:gd,useReducer:Ko,useRef:ud,useState:function(){return Ko(ws)},useDebugValue:Yo,useDeferredValue:function(e){var r=kt();return vd(r,ze.memoizedState,e)},useTransition:function(){var e=Ko(ws)[0],r=kt().memoizedState;return[e,r]},useMutableSource:td,useSyncExternalStore:rd,useId:yd,unstable_isNewReconciler:!1},Hm={readContext:bt,useCallback:md,useContext:bt,useEffect:Jo,useImperativeHandle:pd,useInsertionEffect:dd,useLayoutEffect:hd,useMemo:gd,useReducer:Go,useRef:ud,useState:function(){return Go(ws)},useDebugValue:Yo,useDeferredValue:function(e){var r=kt();return ze===null?r.memoizedState=e:vd(r,ze.memoizedState,e)},useTransition:function(){var e=Go(ws)[0],r=kt().memoizedState;return[e,r]},useMutableSource:td,useSyncExternalStore:rd,useId:yd,unstable_isNewReconciler:!1};function Rt(e,r){if(e&&e.defaultProps){r=H({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function Qo(e,r,a,l){r=e.memoizedState,a=a(l,r),a=a==null?r:H({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ui={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var l=st(),d=yr(e),f=Jt(l,d);f.payload=r,a!=null&&(f.callback=a),r=pr(e,f,d),r!==null&&(It(r,e,d,l),Ri(r,e,d))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var l=st(),d=yr(e),f=Jt(l,d);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=pr(e,f,d),r!==null&&(It(r,e,d,l),Ri(r,e,d))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=st(),l=yr(e),d=Jt(a,l);d.tag=2,r!=null&&(d.callback=r),r=pr(e,d,l),r!==null&&(It(r,e,l,a),Ri(r,e,l))}};function bd(e,r,a,l,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,v):r.prototype&&r.prototype.isPureReactComponent?!os(a,l)||!os(d,f):!0}function kd(e,r,a){var l=!1,d=dr,f=r.contextType;return typeof f=="object"&&f!==null?f=bt(f):(d=at(r)?Rr:Ze.current,l=r.contextTypes,f=(l=l!=null)?dn(e,d):dr),r=new r(a,f),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ui,e.stateNode=r,r._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),r}function jd(e,r,a,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==e&&Ui.enqueueReplaceState(r,r.state,null)}function Xo(e,r,a,l){var d=e.stateNode;d.props=a,d.state=e.memoizedState,d.refs={},$o(e);var f=r.contextType;typeof f=="object"&&f!==null?d.context=bt(f):(f=at(r)?Rr:Ze.current,d.context=dn(e,f)),d.state=e.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(Qo(e,r,f,a),d.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Ui.enqueueReplaceState(d,d.state,null),Oi(e,a,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function xn(e,r){try{var a="",l=r;do a+=he(l),l=l.return;while(l);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:r,stack:d,digest:null}}function Zo(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function el(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Vm=typeof WeakMap=="function"?WeakMap:Map;function Sd(e,r,a){a=Jt(-1,a),a.tag=3,a.payload={element:null};var l=r.value;return a.callback=function(){Vi||(Vi=!0,ml=l),el(e,r)},a}function Nd(e,r,a){a=Jt(-1,a),a.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=r.value;a.payload=function(){return l(d)},a.callback=function(){el(e,r)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){el(e,r),typeof l!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),a}function Ed(e,r,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Vm;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(d.add(a),e=a0.bind(null,e,r,a),r.then(e,e))}function Cd(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Td(e,r,a,l,d){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Jt(-1,1),r.tag=2,pr(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Km=z.ReactCurrentOwner,ot=!1;function nt(e,r,a,l){r.child=e===null?Jc(r,null,a,l):mn(r,e.child,a,l)}function Pd(e,r,a,l,d){a=a.render;var f=r.ref;return vn(r,d),l=Ho(e,r,a,l,f,d),a=Vo(),e!==null&&!ot?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~d,Yt(e,r,d)):(Se&&a&&Co(r),r.flags|=1,nt(e,r,l,d),r.child)}function Rd(e,r,a,l,d){if(e===null){var f=a.type;return typeof f=="function"&&!bl(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=f,Od(e,r,f,l,d)):(e=Xi(a.type,null,l,r,r.mode,d),e.ref=r.ref,e.return=r,r.child=e)}if(f=e.child,(e.lanes&d)===0){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:os,a(v,l)&&e.ref===r.ref)return Yt(e,r,d)}return r.flags|=1,e=wr(f,l),e.ref=r.ref,e.return=r,r.child=e}function Od(e,r,a,l,d){if(e!==null){var f=e.memoizedProps;if(os(f,l)&&e.ref===r.ref)if(ot=!1,r.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ot=!0);else return r.lanes=e.lanes,Yt(e,r,d)}return tl(e,r,a,l,d)}function Ad(e,r,a){var l=r.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(_n,vt),vt|=a;else{if((a&1073741824)===0)return e=f!==null?f.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,we(_n,vt),vt|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:a,we(_n,vt),vt|=l}else f!==null?(l=f.baseLanes|a,r.memoizedState=null):l=a,we(_n,vt),vt|=l;return nt(e,r,d,a),r.child}function Id(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function tl(e,r,a,l,d){var f=at(a)?Rr:Ze.current;return f=dn(r,f),vn(r,d),a=Ho(e,r,a,l,f,d),l=Vo(),e!==null&&!ot?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~d,Yt(e,r,d)):(Se&&l&&Co(r),r.flags|=1,nt(e,r,a,d),r.child)}function Ld(e,r,a,l,d){if(at(a)){var f=!0;ki(r)}else f=!1;if(vn(r,d),r.stateNode===null)Bi(e,r),kd(r,a,l),Xo(r,a,l,d),l=!0;else if(e===null){var v=r.stateNode,j=r.memoizedProps;v.props=j;var S=v.context,A=a.contextType;typeof A=="object"&&A!==null?A=bt(A):(A=at(a)?Rr:Ze.current,A=dn(r,A));var $=a.getDerivedStateFromProps,U=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function";U||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(j!==l||S!==A)&&jd(r,v,l,A),fr=!1;var D=r.memoizedState;v.state=D,Oi(r,l,v,d),S=r.memoizedState,j!==l||D!==S||it.current||fr?(typeof $=="function"&&(Qo(r,a,$,l),S=r.memoizedState),(j=fr||bd(r,a,j,l,D,S,A))?(U||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=S),v.props=l,v.state=S,v.context=A,l=j):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{v=r.stateNode,Qc(e,r),j=r.memoizedProps,A=r.type===r.elementType?j:Rt(r.type,j),v.props=A,U=r.pendingProps,D=v.context,S=a.contextType,typeof S=="object"&&S!==null?S=bt(S):(S=at(a)?Rr:Ze.current,S=dn(r,S));var W=a.getDerivedStateFromProps;($=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(j!==U||D!==S)&&jd(r,v,l,S),fr=!1,D=r.memoizedState,v.state=D,Oi(r,l,v,d);var V=r.memoizedState;j!==U||D!==V||it.current||fr?(typeof W=="function"&&(Qo(r,a,W,l),V=r.memoizedState),(A=fr||bd(r,a,A,l,D,V,S)||!1)?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(l,V,S),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(l,V,S)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||j===e.memoizedProps&&D===e.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&D===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=V),v.props=l,v.state=V,v.context=S,l=A):(typeof v.componentDidUpdate!="function"||j===e.memoizedProps&&D===e.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&D===e.memoizedState||(r.flags|=1024),l=!1)}return rl(e,r,a,l,f,d)}function rl(e,r,a,l,d,f){Id(e,r);var v=(r.flags&128)!==0;if(!l&&!v)return d&&zc(r,a,!1),Yt(e,r,f);l=r.stateNode,Km.current=r;var j=v&&typeof a.getDerivedStateFromError!="function"?null:l.render();return r.flags|=1,e!==null&&v?(r.child=mn(r,e.child,null,f),r.child=mn(r,null,j,f)):nt(e,r,j,f),r.memoizedState=l.state,d&&zc(r,a,!0),r.child}function Dd(e){var r=e.stateNode;r.pendingContext?$c(e,r.pendingContext,r.pendingContext!==r.context):r.context&&$c(e,r.context,!1),Uo(e,r.containerInfo)}function Md(e,r,a,l,d){return pn(),Oo(d),r.flags|=256,nt(e,r,a,l),r.child}var nl={dehydrated:null,treeContext:null,retryLane:0};function sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function $d(e,r,a){var l=r.pendingProps,d=Te.current,f=!1,v=(r.flags&128)!==0,j;if((j=v)||(j=e!==null&&e.memoizedState===null?!1:(d&2)!==0),j?(f=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),we(Te,d&1),e===null)return Ro(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(v=l.children,e=l.fallback,f?(l=r.mode,f=r.child,v={mode:"hidden",children:v},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=Zi(v,l,0,null),e=Br(e,l,a,null),f.return=r,e.return=r,f.sibling=e,r.child=f,r.child.memoizedState=sl(a),r.memoizedState=nl,e):il(r,v));if(d=e.memoizedState,d!==null&&(j=d.dehydrated,j!==null))return Gm(e,r,v,l,j,d,a);if(f){f=l.fallback,v=r.mode,d=e.child,j=d.sibling;var S={mode:"hidden",children:l.children};return(v&1)===0&&r.child!==d?(l=r.child,l.childLanes=0,l.pendingProps=S,r.deletions=null):(l=wr(d,S),l.subtreeFlags=d.subtreeFlags&14680064),j!==null?f=wr(j,f):(f=Br(f,v,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,v=e.child.memoizedState,v=v===null?sl(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=e.childLanes&~a,r.memoizedState=nl,l}return f=e.child,e=f.sibling,l=wr(f,{mode:"visible",children:l.children}),(r.mode&1)===0&&(l.lanes=a),l.return=r,l.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=l,r.memoizedState=null,l}function il(e,r){return r=Zi({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function zi(e,r,a,l){return l!==null&&Oo(l),mn(r,e.child,null,a),e=il(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Gm(e,r,a,l,d,f,v){if(a)return r.flags&256?(r.flags&=-257,l=Zo(Error(s(422))),zi(e,r,v,l)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(f=l.fallback,d=r.mode,l=Zi({mode:"visible",children:l.children},d,0,null),f=Br(f,d,v,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,(r.mode&1)!==0&&mn(r,e.child,null,v),r.child.memoizedState=sl(v),r.memoizedState=nl,f);if((r.mode&1)===0)return zi(e,r,v,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var j=l.dgst;return l=j,f=Error(s(419)),l=Zo(f,l,void 0),zi(e,r,v,l)}if(j=(v&e.childLanes)!==0,ot||j){if(l=qe,l!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Gt(e,d),It(l,e,d,-1))}return _l(),l=Zo(Error(s(421))),zi(e,r,v,l)}return d.data==="$?"?(r.flags|=128,r.child=e.child,r=o0.bind(null,e),d._reactRetry=r,null):(e=f.treeContext,gt=ur(d.nextSibling),mt=r,Se=!0,Pt=null,e!==null&&(wt[_t++]=Vt,wt[_t++]=Kt,wt[_t++]=Or,Vt=e.id,Kt=e.overflow,Or=r),r=il(r,l.children),r.flags|=4096,r)}function Ud(e,r,a){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),Do(e.return,r,a)}function al(e,r,a,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function zd(e,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;if(nt(e,r,l.children,a),l=Te.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ud(e,a,r);else if(e.tag===19)Ud(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(we(Te,l),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)e=a.alternate,e!==null&&Ai(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),al(r,!1,d,a,f);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(e=d.alternate,e!==null&&Ai(e)===null){r.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}al(r,!0,a,null,f);break;case"together":al(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bi(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Yt(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Mr|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,a=wr(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=wr(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Jm(e,r,a){switch(r.tag){case 3:Dd(r),pn();break;case 5:ed(r);break;case 1:at(r.type)&&ki(r);break;case 4:Uo(r,r.stateNode.containerInfo);break;case 10:var l=r.type._context,d=r.memoizedProps.value;we(Ti,l._currentValue),l._currentValue=d;break;case 13:if(l=r.memoizedState,l!==null)return l.dehydrated!==null?(we(Te,Te.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?$d(e,r,a):(we(Te,Te.current&1),e=Yt(e,r,a),e!==null?e.sibling:null);we(Te,Te.current&1);break;case 19:if(l=(a&r.childLanes)!==0,(e.flags&128)!==0){if(l)return zd(e,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),we(Te,Te.current),l)break;return null;case 22:case 23:return r.lanes=0,Ad(e,r,a)}return Yt(e,r,a)}var Bd,ol,Fd,Wd;Bd=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ol=function(){},Fd=function(e,r,a,l){var d=e.memoizedProps;if(d!==l){e=r.stateNode,Lr(zt.current);var f=null;switch(a){case"input":d=La(e,d),l=La(e,l),f=[];break;case"select":d=H({},d,{value:void 0}),l=H({},l,{value:void 0}),f=[];break;case"textarea":d=$a(e,d),l=$a(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=wi)}za(a,l);var v;a=null;for(A in d)if(!l.hasOwnProperty(A)&&d.hasOwnProperty(A)&&d[A]!=null)if(A==="style"){var j=d[A];for(v in j)j.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(o.hasOwnProperty(A)?f||(f=[]):(f=f||[]).push(A,null));for(A in l){var S=l[A];if(j=d!=null?d[A]:void 0,l.hasOwnProperty(A)&&S!==j&&(S!=null||j!=null))if(A==="style")if(j){for(v in j)!j.hasOwnProperty(v)||S&&S.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in S)S.hasOwnProperty(v)&&j[v]!==S[v]&&(a||(a={}),a[v]=S[v])}else a||(f||(f=[]),f.push(A,a)),a=S;else A==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,j=j?j.__html:void 0,S!=null&&j!==S&&(f=f||[]).push(A,S)):A==="children"?typeof S!="string"&&typeof S!="number"||(f=f||[]).push(A,""+S):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(o.hasOwnProperty(A)?(S!=null&&A==="onScroll"&&be("scroll",e),f||j===S||(f=[])):(f=f||[]).push(A,S))}a&&(f=f||[]).push("style",a);var A=f;(r.updateQueue=A)&&(r.flags|=4)}},Wd=function(e,r,a,l){a!==l&&(r.flags|=4)};function bs(e,r){if(!Se)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function tt(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(r)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,r}function Ym(e,r,a){var l=r.pendingProps;switch(To(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(r),null;case 1:return at(r.type)&&bi(),tt(r),null;case 3:return l=r.stateNode,yn(),ke(it),ke(Ze),Fo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ei(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pt!==null&&(yl(Pt),Pt=null))),ol(e,r),tt(r),null;case 5:zo(r);var d=Lr(vs.current);if(a=r.type,e!==null&&r.stateNode!=null)Fd(e,r,a,l,d),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!l){if(r.stateNode===null)throw Error(s(166));return tt(r),null}if(e=Lr(zt.current),Ei(r)){l=r.stateNode,a=r.type;var f=r.memoizedProps;switch(l[Ut]=r,l[hs]=f,e=(r.mode&1)!==0,a){case"dialog":be("cancel",l),be("close",l);break;case"iframe":case"object":case"embed":be("load",l);break;case"video":case"audio":for(d=0;d<us.length;d++)be(us[d],l);break;case"source":be("error",l);break;case"img":case"image":case"link":be("error",l),be("load",l);break;case"details":be("toggle",l);break;case"input":ku(l,f),be("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},be("invalid",l);break;case"textarea":Nu(l,f),be("invalid",l)}za(a,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var j=f[v];v==="children"?typeof j=="string"?l.textContent!==j&&(f.suppressHydrationWarning!==!0&&xi(l.textContent,j,e),d=["children",j]):typeof j=="number"&&l.textContent!==""+j&&(f.suppressHydrationWarning!==!0&&xi(l.textContent,j,e),d=["children",""+j]):o.hasOwnProperty(v)&&j!=null&&v==="onScroll"&&be("scroll",l)}switch(a){case"input":Ys(l),Su(l,f,!0);break;case"textarea":Ys(l),Cu(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=wi)}l=d,r.updateQueue=l,l!==null&&(r.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tu(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=v.createElement(a,{is:l.is}):(e=v.createElement(a),a==="select"&&(v=e,l.multiple?v.multiple=!0:l.size&&(v.size=l.size))):e=v.createElementNS(e,a),e[Ut]=r,e[hs]=l,Bd(e,r,!1,!1),r.stateNode=e;e:{switch(v=Ba(a,l),a){case"dialog":be("cancel",e),be("close",e),d=l;break;case"iframe":case"object":case"embed":be("load",e),d=l;break;case"video":case"audio":for(d=0;d<us.length;d++)be(us[d],e);d=l;break;case"source":be("error",e),d=l;break;case"img":case"image":case"link":be("error",e),be("load",e),d=l;break;case"details":be("toggle",e),d=l;break;case"input":ku(e,l),d=La(e,l),be("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=H({},l,{value:void 0}),be("invalid",e);break;case"textarea":Nu(e,l),d=$a(e,l),be("invalid",e);break;default:d=l}za(a,d),j=d;for(f in j)if(j.hasOwnProperty(f)){var S=j[f];f==="style"?Ou(e,S):f==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Pu(e,S)):f==="children"?typeof S=="string"?(a!=="textarea"||S!=="")&&qn(e,S):typeof S=="number"&&qn(e,""+S):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?S!=null&&f==="onScroll"&&be("scroll",e):S!=null&&I(e,f,S,v))}switch(a){case"input":Ys(e),Su(e,l,!1);break;case"textarea":Ys(e),Cu(e);break;case"option":l.value!=null&&e.setAttribute("value",""+me(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Xr(e,!!l.multiple,f,!1):l.defaultValue!=null&&Xr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=wi)}switch(a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return tt(r),null;case 6:if(e&&r.stateNode!=null)Wd(e,r,e.memoizedProps,l);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(a=Lr(vs.current),Lr(zt.current),Ei(r)){if(l=r.stateNode,a=r.memoizedProps,l[Ut]=r,(f=l.nodeValue!==a)&&(e=mt,e!==null))switch(e.tag){case 3:xi(l.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xi(l.nodeValue,a,(e.mode&1)!==0)}f&&(r.flags|=4)}else l=(a.nodeType===9?a:a.ownerDocument).createTextNode(l),l[Ut]=r,r.stateNode=l}return tt(r),null;case 13:if(ke(Te),l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&gt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Vc(),pn(),r.flags|=98560,f=!1;else if(f=Ei(r),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ut]=r}else pn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tt(r),f=!1}else Pt!==null&&(yl(Pt),Pt=null),f=!0;if(!f)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Te.current&1)!==0?Be===0&&(Be=3):_l())),r.updateQueue!==null&&(r.flags|=4),tt(r),null);case 4:return yn(),ol(e,r),e===null&&cs(r.stateNode.containerInfo),tt(r),null;case 10:return Lo(r.type._context),tt(r),null;case 17:return at(r.type)&&bi(),tt(r),null;case 19:if(ke(Te),f=r.memoizedState,f===null)return tt(r),null;if(l=(r.flags&128)!==0,v=f.rendering,v===null)if(l)bs(f,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(v=Ai(e),v!==null){for(r.flags|=128,bs(f,!1),l=v.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),r.subtreeFlags=0,l=a,a=r.child;a!==null;)f=a,e=l,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,e=v.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return we(Te,Te.current&1|2),r.child}e=e.sibling}f.tail!==null&&Ie()>bn&&(r.flags|=128,l=!0,bs(f,!1),r.lanes=4194304)}else{if(!l)if(e=Ai(v),e!==null){if(r.flags|=128,l=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),bs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!Se)return tt(r),null}else 2*Ie()-f.renderingStartTime>bn&&a!==1073741824&&(r.flags|=128,l=!0,bs(f,!1),r.lanes=4194304);f.isBackwards?(v.sibling=r.child,r.child=v):(a=f.last,a!==null?a.sibling=v:r.child=v,f.last=v)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Ie(),r.sibling=null,a=Te.current,we(Te,l?a&1|2:a&1),r):(tt(r),null);case 22:case 23:return wl(),l=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(r.flags|=8192),l&&(r.mode&1)!==0?(vt&1073741824)!==0&&(tt(r),r.subtreeFlags&6&&(r.flags|=8192)):tt(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function Qm(e,r){switch(To(r),r.tag){case 1:return at(r.type)&&bi(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return yn(),ke(it),ke(Ze),Fo(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return zo(r),null;case 13:if(ke(Te),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));pn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return ke(Te),null;case 4:return yn(),null;case 10:return Lo(r.type._context),null;case 22:case 23:return wl(),null;case 24:return null;default:return null}}var Fi=!1,rt=!1,Xm=typeof WeakSet=="function"?WeakSet:Set,q=null;function wn(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){Re(e,r,l)}else a.current=null}function ll(e,r,a){try{a()}catch(l){Re(e,r,l)}}var qd=!1;function Zm(e,r){if(wo=li,e=bc(),ho(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,j=-1,S=-1,A=0,$=0,U=e,D=null;t:for(;;){for(var W;U!==a||d!==0&&U.nodeType!==3||(j=v+d),U!==f||l!==0&&U.nodeType!==3||(S=v+l),U.nodeType===3&&(v+=U.nodeValue.length),(W=U.firstChild)!==null;)D=U,U=W;for(;;){if(U===e)break t;if(D===a&&++A===d&&(j=v),D===f&&++$===l&&(S=v),(W=U.nextSibling)!==null)break;U=D,D=U.parentNode}U=W}a=j===-1||S===-1?null:{start:j,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(_o={focusedElem:e,selectionRange:a},li=!1,q=r;q!==null;)if(r=q,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,q=e;else for(;q!==null;){r=q;try{var V=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var K=V.memoizedProps,Le=V.memoizedState,P=r.stateNode,E=P.getSnapshotBeforeUpdate(r.elementType===r.type?K:Rt(r.type,K),Le);P.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=r.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(B){Re(r,r.return,B)}if(e=r.sibling,e!==null){e.return=r.return,q=e;break}q=r.return}return V=qd,qd=!1,V}function ks(e,r,a){var l=r.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&ll(r,a,f)}d=d.next}while(d!==l)}}function Wi(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.create;a.destroy=l()}a=a.next}while(a!==r)}}function ul(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function Hd(e){var r=e.alternate;r!==null&&(e.alternate=null,Hd(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Ut],delete r[hs],delete r[So],delete r[Lm],delete r[Dm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vd(e){return e.tag===5||e.tag===3||e.tag===4}function Kd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cl(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=wi));else if(l!==4&&(e=e.child,e!==null))for(cl(e,r,a),e=e.sibling;e!==null;)cl(e,r,a),e=e.sibling}function dl(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(dl(e,r,a),e=e.sibling;e!==null;)dl(e,r,a),e=e.sibling}var Ge=null,Ot=!1;function mr(e,r,a){for(a=a.child;a!==null;)Gd(e,r,a),a=a.sibling}function Gd(e,r,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 5:rt||wn(a,r);case 6:var l=Ge,d=Ot;Ge=null,mr(e,r,a),Ge=l,Ot=d,Ge!==null&&(Ot?(e=Ge,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Ge.removeChild(a.stateNode));break;case 18:Ge!==null&&(Ot?(e=Ge,a=a.stateNode,e.nodeType===8?jo(e.parentNode,a):e.nodeType===1&&jo(e,a),ts(e)):jo(Ge,a.stateNode));break;case 4:l=Ge,d=Ot,Ge=a.stateNode.containerInfo,Ot=!0,mr(e,r,a),Ge=l,Ot=d;break;case 0:case 11:case 14:case 15:if(!rt&&(l=a.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&ll(a,r,v),d=d.next}while(d!==l)}mr(e,r,a);break;case 1:if(!rt&&(wn(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=a.memoizedProps,l.state=a.memoizedState,l.componentWillUnmount()}catch(j){Re(a,r,j)}mr(e,r,a);break;case 21:mr(e,r,a);break;case 22:a.mode&1?(rt=(l=rt)||a.memoizedState!==null,mr(e,r,a),rt=l):mr(e,r,a);break;default:mr(e,r,a)}}function Jd(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Xm),r.forEach(function(l){var d=l0.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}}function At(e,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];try{var f=e,v=r,j=v;e:for(;j!==null;){switch(j.tag){case 5:Ge=j.stateNode,Ot=!1;break e;case 3:Ge=j.stateNode.containerInfo,Ot=!0;break e;case 4:Ge=j.stateNode.containerInfo,Ot=!0;break e}j=j.return}if(Ge===null)throw Error(s(160));Gd(f,v,d),Ge=null,Ot=!1;var S=d.alternate;S!==null&&(S.return=null),d.return=null}catch(A){Re(d,r,A)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Yd(r,e),r=r.sibling}function Yd(e,r){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(r,e),Ft(e),l&4){try{ks(3,e,e.return),Wi(3,e)}catch(K){Re(e,e.return,K)}try{ks(5,e,e.return)}catch(K){Re(e,e.return,K)}}break;case 1:At(r,e),Ft(e),l&512&&a!==null&&wn(a,a.return);break;case 5:if(At(r,e),Ft(e),l&512&&a!==null&&wn(a,a.return),e.flags&32){var d=e.stateNode;try{qn(d,"")}catch(K){Re(e,e.return,K)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,v=a!==null?a.memoizedProps:f,j=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{j==="input"&&f.type==="radio"&&f.name!=null&&ju(d,f),Ba(j,v);var A=Ba(j,f);for(v=0;v<S.length;v+=2){var $=S[v],U=S[v+1];$==="style"?Ou(d,U):$==="dangerouslySetInnerHTML"?Pu(d,U):$==="children"?qn(d,U):I(d,$,U,A)}switch(j){case"input":Da(d,f);break;case"textarea":Eu(d,f);break;case"select":var D=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var W=f.value;W!=null?Xr(d,!!f.multiple,W,!1):D!==!!f.multiple&&(f.defaultValue!=null?Xr(d,!!f.multiple,f.defaultValue,!0):Xr(d,!!f.multiple,f.multiple?[]:"",!1))}d[hs]=f}catch(K){Re(e,e.return,K)}}break;case 6:if(At(r,e),Ft(e),l&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(K){Re(e,e.return,K)}}break;case 3:if(At(r,e),Ft(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ts(r.containerInfo)}catch(K){Re(e,e.return,K)}break;case 4:At(r,e),Ft(e);break;case 13:At(r,e),Ft(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(pl=Ie())),l&4&&Jd(e);break;case 22:if($=a!==null&&a.memoizedState!==null,e.mode&1?(rt=(A=rt)||$,At(r,e),rt=A):At(r,e),Ft(e),l&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!$&&(e.mode&1)!==0)for(q=e,$=e.child;$!==null;){for(U=q=$;q!==null;){switch(D=q,W=D.child,D.tag){case 0:case 11:case 14:case 15:ks(4,D,D.return);break;case 1:wn(D,D.return);var V=D.stateNode;if(typeof V.componentWillUnmount=="function"){l=D,a=D.return;try{r=l,V.props=r.memoizedProps,V.state=r.memoizedState,V.componentWillUnmount()}catch(K){Re(l,a,K)}}break;case 5:wn(D,D.return);break;case 22:if(D.memoizedState!==null){Zd(U);continue}}W!==null?(W.return=D,q=W):Zd(U)}$=$.sibling}e:for($=null,U=e;;){if(U.tag===5){if($===null){$=U;try{d=U.stateNode,A?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(j=U.stateNode,S=U.memoizedProps.style,v=S!=null&&S.hasOwnProperty("display")?S.display:null,j.style.display=Ru("display",v))}catch(K){Re(e,e.return,K)}}}else if(U.tag===6){if($===null)try{U.stateNode.nodeValue=A?"":U.memoizedProps}catch(K){Re(e,e.return,K)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===e)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===e)break e;for(;U.sibling===null;){if(U.return===null||U.return===e)break e;$===U&&($=null),U=U.return}$===U&&($=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:At(r,e),Ft(e),l&4&&Jd(e);break;case 21:break;default:At(r,e),Ft(e)}}function Ft(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Vd(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(qn(d,""),l.flags&=-33);var f=Kd(e);dl(e,f,d);break;case 3:case 4:var v=l.stateNode.containerInfo,j=Kd(e);cl(e,j,v);break;default:throw Error(s(161))}}catch(S){Re(e,e.return,S)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function e0(e,r,a){q=e,Qd(e)}function Qd(e,r,a){for(var l=(e.mode&1)!==0;q!==null;){var d=q,f=d.child;if(d.tag===22&&l){var v=d.memoizedState!==null||Fi;if(!v){var j=d.alternate,S=j!==null&&j.memoizedState!==null||rt;j=Fi;var A=rt;if(Fi=v,(rt=S)&&!A)for(q=d;q!==null;)v=q,S=v.child,v.tag===22&&v.memoizedState!==null?eh(d):S!==null?(S.return=v,q=S):eh(d);for(;f!==null;)q=f,Qd(f),f=f.sibling;q=d,Fi=j,rt=A}Xd(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,q=f):Xd(e)}}function Xd(e){for(;q!==null;){var r=q;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:rt||Wi(5,r);break;case 1:var l=r.stateNode;if(r.flags&4&&!rt)if(a===null)l.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Rt(r.type,a.memoizedProps);l.componentDidUpdate(d,a.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=r.updateQueue;f!==null&&Zc(r,f,l);break;case 3:var v=r.updateQueue;if(v!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Zc(r,v,a)}break;case 5:var j=r.stateNode;if(a===null&&r.flags&4){a=j;var S=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&a.focus();break;case"img":S.src&&(a.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var A=r.alternate;if(A!==null){var $=A.memoizedState;if($!==null){var U=$.dehydrated;U!==null&&ts(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}rt||r.flags&512&&ul(r)}catch(D){Re(r,r.return,D)}}if(r===e){q=null;break}if(a=r.sibling,a!==null){a.return=r.return,q=a;break}q=r.return}}function Zd(e){for(;q!==null;){var r=q;if(r===e){q=null;break}var a=r.sibling;if(a!==null){a.return=r.return,q=a;break}q=r.return}}function eh(e){for(;q!==null;){var r=q;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Wi(4,r)}catch(S){Re(r,a,S)}break;case 1:var l=r.stateNode;if(typeof l.componentDidMount=="function"){var d=r.return;try{l.componentDidMount()}catch(S){Re(r,d,S)}}var f=r.return;try{ul(r)}catch(S){Re(r,f,S)}break;case 5:var v=r.return;try{ul(r)}catch(S){Re(r,v,S)}}}catch(S){Re(r,r.return,S)}if(r===e){q=null;break}var j=r.sibling;if(j!==null){j.return=r.return,q=j;break}q=r.return}}var t0=Math.ceil,qi=z.ReactCurrentDispatcher,hl=z.ReactCurrentOwner,jt=z.ReactCurrentBatchConfig,de=0,qe=null,$e=null,Je=0,vt=0,_n=cr(0),Be=0,js=null,Mr=0,Hi=0,fl=0,Ss=null,lt=null,pl=0,bn=1/0,Qt=null,Vi=!1,ml=null,gr=null,Ki=!1,vr=null,Gi=0,Ns=0,gl=null,Ji=-1,Yi=0;function st(){return(de&6)!==0?Ie():Ji!==-1?Ji:Ji=Ie()}function yr(e){return(e.mode&1)===0?1:(de&2)!==0&&Je!==0?Je&-Je:$m.transition!==null?(Yi===0&&(Yi=Ku()),Yi):(e=ge,e!==0||(e=window.event,e=e===void 0?16:rc(e.type)),e)}function It(e,r,a,l){if(50<Ns)throw Ns=0,gl=null,Error(s(185));Yn(e,a,l),((de&2)===0||e!==qe)&&(e===qe&&((de&2)===0&&(Hi|=a),Be===4&&xr(e,Je)),ut(e,l),a===1&&de===0&&(r.mode&1)===0&&(bn=Ie()+500,ji&&hr()))}function ut(e,r){var a=e.callbackNode;$p(e,r);var l=ii(e,e===qe?Je:0);if(l===0)a!==null&&qu(a),e.callbackNode=null,e.callbackPriority=0;else if(r=l&-l,e.callbackPriority!==r){if(a!=null&&qu(a),r===1)e.tag===0?Mm(rh.bind(null,e)):Bc(rh.bind(null,e)),Am(function(){(de&6)===0&&hr()}),a=null;else{switch(Gu(l)){case 1:a=Ga;break;case 4:a=Hu;break;case 16:a=ti;break;case 536870912:a=Vu;break;default:a=ti}a=ch(a,th.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function th(e,r){if(Ji=-1,Yi=0,(de&6)!==0)throw Error(s(327));var a=e.callbackNode;if(kn()&&e.callbackNode!==a)return null;var l=ii(e,e===qe?Je:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||r)r=Qi(e,l);else{r=l;var d=de;de|=2;var f=sh();(qe!==e||Je!==r)&&(Qt=null,bn=Ie()+500,Ur(e,r));do try{s0();break}catch(j){nh(e,j)}while(!0);Io(),qi.current=f,de=d,$e!==null?r=0:(qe=null,Je=0,r=Be)}if(r!==0){if(r===2&&(d=Ja(e),d!==0&&(l=d,r=vl(e,d))),r===1)throw a=js,Ur(e,0),xr(e,l),ut(e,Ie()),a;if(r===6)xr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!r0(d)&&(r=Qi(e,l),r===2&&(f=Ja(e),f!==0&&(l=f,r=vl(e,f))),r===1))throw a=js,Ur(e,0),xr(e,l),ut(e,Ie()),a;switch(e.finishedWork=d,e.finishedLanes=l,r){case 0:case 1:throw Error(s(345));case 2:zr(e,lt,Qt);break;case 3:if(xr(e,l),(l&130023424)===l&&(r=pl+500-Ie(),10<r)){if(ii(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){st(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ko(zr.bind(null,e,lt,Qt),r);break}zr(e,lt,Qt);break;case 4:if(xr(e,l),(l&4194240)===l)break;for(r=e.eventTimes,d=-1;0<l;){var v=31-Ct(l);f=1<<v,v=r[v],v>d&&(d=v),l&=~f}if(l=d,l=Ie()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*t0(l/1960))-l,10<l){e.timeoutHandle=ko(zr.bind(null,e,lt,Qt),l);break}zr(e,lt,Qt);break;case 5:zr(e,lt,Qt);break;default:throw Error(s(329))}}}return ut(e,Ie()),e.callbackNode===a?th.bind(null,e):null}function vl(e,r){var a=Ss;return e.current.memoizedState.isDehydrated&&(Ur(e,r).flags|=256),e=Qi(e,r),e!==2&&(r=lt,lt=a,r!==null&&yl(r)),e}function yl(e){lt===null?lt=e:lt.push.apply(lt,e)}function r0(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Tt(f(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function xr(e,r){for(r&=~fl,r&=~Hi,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-Ct(r),l=1<<a;e[a]=-1,r&=~l}}function rh(e){if((de&6)!==0)throw Error(s(327));kn();var r=ii(e,0);if((r&1)===0)return ut(e,Ie()),null;var a=Qi(e,r);if(e.tag!==0&&a===2){var l=Ja(e);l!==0&&(r=l,a=vl(e,l))}if(a===1)throw a=js,Ur(e,0),xr(e,r),ut(e,Ie()),a;if(a===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,zr(e,lt,Qt),ut(e,Ie()),null}function xl(e,r){var a=de;de|=1;try{return e(r)}finally{de=a,de===0&&(bn=Ie()+500,ji&&hr())}}function $r(e){vr!==null&&vr.tag===0&&(de&6)===0&&kn();var r=de;de|=1;var a=jt.transition,l=ge;try{if(jt.transition=null,ge=1,e)return e()}finally{ge=l,jt.transition=a,de=r,(de&6)===0&&hr()}}function wl(){vt=_n.current,ke(_n)}function Ur(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,Om(a)),$e!==null)for(a=$e.return;a!==null;){var l=a;switch(To(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&bi();break;case 3:yn(),ke(it),ke(Ze),Fo();break;case 5:zo(l);break;case 4:yn();break;case 13:ke(Te);break;case 19:ke(Te);break;case 10:Lo(l.type._context);break;case 22:case 23:wl()}a=a.return}if(qe=e,$e=e=wr(e.current,null),Je=vt=r,Be=0,js=null,fl=Hi=Mr=0,lt=Ss=null,Ir!==null){for(r=0;r<Ir.length;r++)if(a=Ir[r],l=a.interleaved,l!==null){a.interleaved=null;var d=l.next,f=a.pending;if(f!==null){var v=f.next;f.next=d,l.next=v}a.pending=l}Ir=null}return e}function nh(e,r){do{var a=$e;try{if(Io(),Ii.current=$i,Li){for(var l=Pe.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Li=!1}if(Dr=0,We=ze=Pe=null,ys=!1,xs=0,hl.current=null,a===null||a.return===null){Be=1,js=r,$e=null;break}e:{var f=e,v=a.return,j=a,S=r;if(r=Je,j.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var A=S,$=j,U=$.tag;if(($.mode&1)===0&&(U===0||U===11||U===15)){var D=$.alternate;D?($.updateQueue=D.updateQueue,$.memoizedState=D.memoizedState,$.lanes=D.lanes):($.updateQueue=null,$.memoizedState=null)}var W=Cd(v);if(W!==null){W.flags&=-257,Td(W,v,j,f,r),W.mode&1&&Ed(f,A,r),r=W,S=A;var V=r.updateQueue;if(V===null){var K=new Set;K.add(S),r.updateQueue=K}else V.add(S);break e}else{if((r&1)===0){Ed(f,A,r),_l();break e}S=Error(s(426))}}else if(Se&&j.mode&1){var Le=Cd(v);if(Le!==null){(Le.flags&65536)===0&&(Le.flags|=256),Td(Le,v,j,f,r),Oo(xn(S,j));break e}}f=S=xn(S,j),Be!==4&&(Be=2),Ss===null?Ss=[f]:Ss.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,r&=-r,f.lanes|=r;var P=Sd(f,S,r);Xc(f,P);break e;case 1:j=S;var E=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(gr===null||!gr.has(R)))){f.flags|=65536,r&=-r,f.lanes|=r;var B=Nd(f,j,r);Xc(f,B);break e}}f=f.return}while(f!==null)}ah(a)}catch(Y){r=Y,$e===a&&a!==null&&($e=a=a.return);continue}break}while(!0)}function sh(){var e=qi.current;return qi.current=$i,e===null?$i:e}function _l(){(Be===0||Be===3||Be===2)&&(Be=4),qe===null||(Mr&268435455)===0&&(Hi&268435455)===0||xr(qe,Je)}function Qi(e,r){var a=de;de|=2;var l=sh();(qe!==e||Je!==r)&&(Qt=null,Ur(e,r));do try{n0();break}catch(d){nh(e,d)}while(!0);if(Io(),de=a,qi.current=l,$e!==null)throw Error(s(261));return qe=null,Je=0,Be}function n0(){for(;$e!==null;)ih($e)}function s0(){for(;$e!==null&&!Tp();)ih($e)}function ih(e){var r=uh(e.alternate,e,vt);e.memoizedProps=e.pendingProps,r===null?ah(e):$e=r,hl.current=null}function ah(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=Ym(a,r,vt),a!==null){$e=a;return}}else{if(a=Qm(a,r),a!==null){a.flags&=32767,$e=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,$e=null;return}}if(r=r.sibling,r!==null){$e=r;return}$e=r=e}while(r!==null);Be===0&&(Be=5)}function zr(e,r,a){var l=ge,d=jt.transition;try{jt.transition=null,ge=1,i0(e,r,a,l)}finally{jt.transition=d,ge=l}return null}function i0(e,r,a,l){do kn();while(vr!==null);if((de&6)!==0)throw Error(s(327));a=e.finishedWork;var d=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=a.lanes|a.childLanes;if(Up(e,f),e===qe&&($e=qe=null,Je=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ki||(Ki=!0,ch(ti,function(){return kn(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=jt.transition,jt.transition=null;var v=ge;ge=1;var j=de;de|=4,hl.current=null,Zm(e,a),Yd(a,e),Sm(_o),li=!!wo,_o=wo=null,e.current=a,e0(a),Pp(),de=j,ge=v,jt.transition=f}else e.current=a;if(Ki&&(Ki=!1,vr=e,Gi=d),f=e.pendingLanes,f===0&&(gr=null),Ap(a.stateNode),ut(e,Ie()),r!==null)for(l=e.onRecoverableError,a=0;a<r.length;a++)d=r[a],l(d.value,{componentStack:d.stack,digest:d.digest});if(Vi)throw Vi=!1,e=ml,ml=null,e;return(Gi&1)!==0&&e.tag!==0&&kn(),f=e.pendingLanes,(f&1)!==0?e===gl?Ns++:(Ns=0,gl=e):Ns=0,hr(),null}function kn(){if(vr!==null){var e=Gu(Gi),r=jt.transition,a=ge;try{if(jt.transition=null,ge=16>e?16:e,vr===null)var l=!1;else{if(e=vr,vr=null,Gi=0,(de&6)!==0)throw Error(s(331));var d=de;for(de|=4,q=e.current;q!==null;){var f=q,v=f.child;if((q.flags&16)!==0){var j=f.deletions;if(j!==null){for(var S=0;S<j.length;S++){var A=j[S];for(q=A;q!==null;){var $=q;switch($.tag){case 0:case 11:case 15:ks(8,$,f)}var U=$.child;if(U!==null)U.return=$,q=U;else for(;q!==null;){$=q;var D=$.sibling,W=$.return;if(Hd($),$===A){q=null;break}if(D!==null){D.return=W,q=D;break}q=W}}}var V=f.alternate;if(V!==null){var K=V.child;if(K!==null){V.child=null;do{var Le=K.sibling;K.sibling=null,K=Le}while(K!==null)}}q=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,q=v;else e:for(;q!==null;){if(f=q,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:ks(9,f,f.return)}var P=f.sibling;if(P!==null){P.return=f.return,q=P;break e}q=f.return}}var E=e.current;for(q=E;q!==null;){v=q;var R=v.child;if((v.subtreeFlags&2064)!==0&&R!==null)R.return=v,q=R;else e:for(v=E;q!==null;){if(j=q,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Wi(9,j)}}catch(Y){Re(j,j.return,Y)}if(j===v){q=null;break e}var B=j.sibling;if(B!==null){B.return=j.return,q=B;break e}q=j.return}}if(de=d,hr(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(ri,e)}catch{}l=!0}return l}finally{ge=a,jt.transition=r}}return!1}function oh(e,r,a){r=xn(a,r),r=Sd(e,r,1),e=pr(e,r,1),r=st(),e!==null&&(Yn(e,1,r),ut(e,r))}function Re(e,r,a){if(e.tag===3)oh(e,e,a);else for(;r!==null;){if(r.tag===3){oh(r,e,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gr===null||!gr.has(l))){e=xn(a,e),e=Nd(r,e,1),r=pr(r,e,1),e=st(),r!==null&&(Yn(r,1,e),ut(r,e));break}}r=r.return}}function a0(e,r,a){var l=e.pingCache;l!==null&&l.delete(r),r=st(),e.pingedLanes|=e.suspendedLanes&a,qe===e&&(Je&a)===a&&(Be===4||Be===3&&(Je&130023424)===Je&&500>Ie()-pl?Ur(e,0):fl|=a),ut(e,r)}function lh(e,r){r===0&&((e.mode&1)===0?r=1:(r=si,si<<=1,(si&130023424)===0&&(si=4194304)));var a=st();e=Gt(e,r),e!==null&&(Yn(e,r,a),ut(e,a))}function o0(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),lh(e,a)}function l0(e,r){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(r),lh(e,a)}var uh;uh=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||it.current)ot=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return ot=!1,Jm(e,r,a);ot=(e.flags&131072)!==0}else ot=!1,Se&&(r.flags&1048576)!==0&&Fc(r,Ni,r.index);switch(r.lanes=0,r.tag){case 2:var l=r.type;Bi(e,r),e=r.pendingProps;var d=dn(r,Ze.current);vn(r,a),d=Ho(null,r,l,e,d,a);var f=Vo();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,at(l)?(f=!0,ki(r)):f=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,$o(r),d.updater=Ui,r.stateNode=d,d._reactInternals=r,Xo(r,l,e,a),r=rl(null,r,l,!0,f,a)):(r.tag=0,Se&&f&&Co(r),nt(null,r,d,a),r=r.child),r;case 16:l=r.elementType;e:{switch(Bi(e,r),e=r.pendingProps,d=l._init,l=d(l._payload),r.type=l,d=r.tag=c0(l),e=Rt(l,e),d){case 0:r=tl(null,r,l,e,a);break e;case 1:r=Ld(null,r,l,e,a);break e;case 11:r=Pd(null,r,l,e,a);break e;case 14:r=Rd(null,r,l,Rt(l.type,e),a);break e}throw Error(s(306,l,""))}return r;case 0:return l=r.type,d=r.pendingProps,d=r.elementType===l?d:Rt(l,d),tl(e,r,l,d,a);case 1:return l=r.type,d=r.pendingProps,d=r.elementType===l?d:Rt(l,d),Ld(e,r,l,d,a);case 3:e:{if(Dd(r),e===null)throw Error(s(387));l=r.pendingProps,f=r.memoizedState,d=f.element,Qc(e,r),Oi(r,l,null,a);var v=r.memoizedState;if(l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){d=xn(Error(s(423)),r),r=Md(e,r,l,a,d);break e}else if(l!==d){d=xn(Error(s(424)),r),r=Md(e,r,l,a,d);break e}else for(gt=ur(r.stateNode.containerInfo.firstChild),mt=r,Se=!0,Pt=null,a=Jc(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(pn(),l===d){r=Yt(e,r,a);break e}nt(e,r,l,a)}r=r.child}return r;case 5:return ed(r),e===null&&Ro(r),l=r.type,d=r.pendingProps,f=e!==null?e.memoizedProps:null,v=d.children,bo(l,d)?v=null:f!==null&&bo(l,f)&&(r.flags|=32),Id(e,r),nt(e,r,v,a),r.child;case 6:return e===null&&Ro(r),null;case 13:return $d(e,r,a);case 4:return Uo(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=mn(r,null,l,a):nt(e,r,l,a),r.child;case 11:return l=r.type,d=r.pendingProps,d=r.elementType===l?d:Rt(l,d),Pd(e,r,l,d,a);case 7:return nt(e,r,r.pendingProps,a),r.child;case 8:return nt(e,r,r.pendingProps.children,a),r.child;case 12:return nt(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(l=r.type._context,d=r.pendingProps,f=r.memoizedProps,v=d.value,we(Ti,l._currentValue),l._currentValue=v,f!==null)if(Tt(f.value,v)){if(f.children===d.children&&!it.current){r=Yt(e,r,a);break e}}else for(f=r.child,f!==null&&(f.return=r);f!==null;){var j=f.dependencies;if(j!==null){v=f.child;for(var S=j.firstContext;S!==null;){if(S.context===l){if(f.tag===1){S=Jt(-1,a&-a),S.tag=2;var A=f.updateQueue;if(A!==null){A=A.shared;var $=A.pending;$===null?S.next=S:(S.next=$.next,$.next=S),A.pending=S}}f.lanes|=a,S=f.alternate,S!==null&&(S.lanes|=a),Do(f.return,a,r),j.lanes|=a;break}S=S.next}}else if(f.tag===10)v=f.type===r.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,j=v.alternate,j!==null&&(j.lanes|=a),Do(v,a,r),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}nt(e,r,d.children,a),r=r.child}return r;case 9:return d=r.type,l=r.pendingProps.children,vn(r,a),d=bt(d),l=l(d),r.flags|=1,nt(e,r,l,a),r.child;case 14:return l=r.type,d=Rt(l,r.pendingProps),d=Rt(l.type,d),Rd(e,r,l,d,a);case 15:return Od(e,r,r.type,r.pendingProps,a);case 17:return l=r.type,d=r.pendingProps,d=r.elementType===l?d:Rt(l,d),Bi(e,r),r.tag=1,at(l)?(e=!0,ki(r)):e=!1,vn(r,a),kd(r,l,d),Xo(r,l,d,a),rl(null,r,l,!0,e,a);case 19:return zd(e,r,a);case 22:return Ad(e,r,a)}throw Error(s(156,r.tag))};function ch(e,r){return Wu(e,r)}function u0(e,r,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,r,a,l){return new u0(e,r,a,l)}function bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function c0(e){if(typeof e=="function")return bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ce)return 11;if(e===ht)return 14}return 2}function wr(e,r){var a=e.alternate;return a===null?(a=St(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Xi(e,r,a,l,d,f){var v=2;if(l=e,typeof e=="function")bl(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case ae:return Br(a.children,d,f,r);case Ee:v=8,d|=8;break;case Ae:return e=St(12,a,r,d|2),e.elementType=Ae,e.lanes=f,e;case Me:return e=St(13,a,r,d),e.elementType=Me,e.lanes=f,e;case dt:return e=St(19,a,r,d),e.elementType=dt,e.lanes=f,e;case ye:return Zi(a,d,f,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Et:v=10;break e;case Wt:v=9;break e;case ce:v=11;break e;case ht:v=14;break e;case Ce:v=16,l=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=St(v,a,r,d),r.elementType=e,r.type=l,r.lanes=f,r}function Br(e,r,a,l){return e=St(7,e,l,r),e.lanes=a,e}function Zi(e,r,a,l){return e=St(22,e,l,r),e.elementType=ye,e.lanes=a,e.stateNode={isHidden:!1},e}function kl(e,r,a){return e=St(6,e,null,r),e.lanes=a,e}function jl(e,r,a){return r=St(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function d0(e,r,a,l,d){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ya(0),this.expirationTimes=Ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Sl(e,r,a,l,d,f,v,j,S){return e=new d0(e,r,a,j,S),r===1?(r=1,f===!0&&(r|=8)):r=0,f=St(3,null,null,r),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},$o(f),e}function h0(e,r,a){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:l==null?null:""+l,children:e,containerInfo:r,implementation:a}}function dh(e){if(!e)return dr;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(at(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var a=e.type;if(at(a))return Uc(e,a,r)}return r}function hh(e,r,a,l,d,f,v,j,S){return e=Sl(a,l,!0,e,d,f,v,j,S),e.context=dh(null),a=e.current,l=st(),d=yr(a),f=Jt(l,d),f.callback=r??null,pr(a,f,d),e.current.lanes=d,Yn(e,d,l),ut(e,l),e}function ea(e,r,a,l){var d=r.current,f=st(),v=yr(d);return a=dh(a),r.context===null?r.context=a:r.pendingContext=a,r=Jt(f,v),r.payload={element:e},l=l===void 0?null:l,l!==null&&(r.callback=l),e=pr(d,r,v),e!==null&&(It(e,d,v,f),Ri(e,d,v)),v}function ta(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Nl(e,r){fh(e,r),(e=e.alternate)&&fh(e,r)}function f0(){return null}var ph=typeof reportError=="function"?reportError:function(e){console.error(e)};function El(e){this._internalRoot=e}ra.prototype.render=El.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));ea(e,r,null,null)},ra.prototype.unmount=El.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;$r(function(){ea(null,e,null,null)}),r[qt]=null}};function ra(e){this._internalRoot=e}ra.prototype.unstable_scheduleHydration=function(e){if(e){var r=Qu();e={blockedOn:null,target:e,priority:r};for(var a=0;a<ar.length&&r!==0&&r<ar[a].priority;a++);ar.splice(a,0,e),a===0&&ec(e)}};function Cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function na(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mh(){}function p0(e,r,a,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var A=ta(v);f.call(A)}}var v=hh(r,l,e,0,null,!1,!1,"",mh);return e._reactRootContainer=v,e[qt]=v.current,cs(e.nodeType===8?e.parentNode:e),$r(),v}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var j=l;l=function(){var A=ta(S);j.call(A)}}var S=Sl(e,0,!1,null,null,!1,!1,"",mh);return e._reactRootContainer=S,e[qt]=S.current,cs(e.nodeType===8?e.parentNode:e),$r(function(){ea(r,S,a,l)}),S}function sa(e,r,a,l,d){var f=a._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var j=d;d=function(){var S=ta(v);j.call(S)}}ea(r,v,e,d)}else v=p0(a,r,e,d,l);return ta(v)}Ju=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=Jn(r.pendingLanes);a!==0&&(Qa(r,a|1),ut(r,Ie()),(de&6)===0&&(bn=Ie()+500,hr()))}break;case 13:$r(function(){var l=Gt(e,1);if(l!==null){var d=st();It(l,e,1,d)}}),Nl(e,1)}},Xa=function(e){if(e.tag===13){var r=Gt(e,134217728);if(r!==null){var a=st();It(r,e,134217728,a)}Nl(e,134217728)}},Yu=function(e){if(e.tag===13){var r=yr(e),a=Gt(e,r);if(a!==null){var l=st();It(a,e,r,l)}Nl(e,r)}},Qu=function(){return ge},Xu=function(e,r){var a=ge;try{return ge=e,r()}finally{ge=a}},qa=function(e,r,a){switch(r){case"input":if(Da(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==e&&l.form===e.form){var d=_i(l);if(!d)throw Error(s(90));bu(l),Da(l,d)}}}break;case"textarea":Eu(e,a);break;case"select":r=a.value,r!=null&&Xr(e,!!a.multiple,r,!1)}},Du=xl,Mu=$r;var m0={usingClientEntryPoint:!1,Events:[fs,un,_i,Iu,Lu,xl]},Es={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g0={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bu(e),e===null?null:e.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||f0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{ri=ia.inject(g0),$t=ia}catch{}}return ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m0,ct.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cl(r))throw Error(s(200));return h0(e,r,null,a)},ct.createRoot=function(e,r){if(!Cl(e))throw Error(s(299));var a=!1,l="",d=ph;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Sl(e,1,!1,null,null,a,!1,l,d),e[qt]=r.current,cs(e.nodeType===8?e.parentNode:e),new El(r)},ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Bu(r),e=e===null?null:e.stateNode,e},ct.flushSync=function(e){return $r(e)},ct.hydrate=function(e,r,a){if(!na(r))throw Error(s(200));return sa(null,e,r,!0,a)},ct.hydrateRoot=function(e,r,a){if(!Cl(e))throw Error(s(405));var l=a!=null&&a.hydratedSources||null,d=!1,f="",v=ph;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),r=hh(r,null,e,1,a??null,d,!1,f,v),e[qt]=r.current,cs(e),l)for(e=0;e<l.length;e++)a=l[e],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new ra(r)},ct.render=function(e,r,a){if(!na(r))throw Error(s(200));return sa(null,e,r,!1,a)},ct.unmountComponentAtNode=function(e){if(!na(e))throw Error(s(40));return e._reactRootContainer?($r(function(){sa(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1},ct.unstable_batchedUpdates=xl,ct.unstable_renderSubtreeIntoContainer=function(e,r,a,l){if(!na(a))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return sa(e,r,a,!1,l)},ct.version="18.3.1-next-f1338f8080-20240426",ct}var kh;function bf(){if(kh)return Rl.exports;kh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Rl.exports=S0(),Rl.exports}var jh;function N0(){if(jh)return aa;jh=1;var n=bf();return aa.createRoot=n.createRoot,aa.hydrateRoot=n.hydrateRoot,aa}var E0=N0();const C0=_f(E0);bf();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ls(){return Ls=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}return n},Ls.apply(this,arguments)}var Sr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Sr||(Sr={}));const Sh="popstate";function T0(n){n===void 0&&(n={});function t(i,o){let{pathname:c,search:h,hash:p}=i.location;return Vl("",{pathname:c,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){return typeof o=="string"?o:va(o)}return R0(t,s,null,n)}function De(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function cu(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function P0(){return Math.random().toString(36).substr(2,8)}function Nh(n,t){return{usr:n.state,key:n.key,idx:t}}function Vl(n,t,s,i){return s===void 0&&(s=null),Ls({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?Un(t):t,{state:s,key:t&&t.key||i||P0()})}function va(n){let{pathname:t="/",search:s="",hash:i=""}=n;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Un(n){let t={};if(n){let s=n.indexOf("#");s>=0&&(t.hash=n.substr(s),n=n.substr(0,s));let i=n.indexOf("?");i>=0&&(t.search=n.substr(i),n=n.substr(0,i)),n&&(t.pathname=n)}return t}function R0(n,t,s,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:c=!1}=i,h=o.history,p=Sr.Pop,m=null,g=y();g==null&&(g=0,h.replaceState(Ls({},h.state,{idx:g}),""));function y(){return(h.state||{idx:null}).idx}function w(){p=Sr.Pop;let N=y(),L=N==null?null:N-g;g=N,m&&m({action:p,location:_.location,delta:L})}function x(N,L){p=Sr.Push;let O=Vl(_.location,N,L);g=y()+1;let I=Nh(O,g),z=_.createHref(O);try{h.pushState(I,"",z)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;o.location.assign(z)}c&&m&&m({action:p,location:_.location,delta:1})}function k(N,L){p=Sr.Replace;let O=Vl(_.location,N,L);g=y();let I=Nh(O,g),z=_.createHref(O);h.replaceState(I,"",z),c&&m&&m({action:p,location:_.location,delta:0})}function b(N){let L=o.location.origin!=="null"?o.location.origin:o.location.href,O=typeof N=="string"?N:va(N);return O=O.replace(/ $/,"%20"),De(L,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,L)}let _={get action(){return p},get location(){return n(o,h)},listen(N){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Sh,w),m=N,()=>{o.removeEventListener(Sh,w),m=null}},createHref(N){return t(o,N)},createURL:b,encodeLocation(N){let L=b(N);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:x,replace:k,go(N){return h.go(N)}};return _}var Eh;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Eh||(Eh={}));function O0(n,t,s){return s===void 0&&(s="/"),A0(n,t,s)}function A0(n,t,s,i){let o=typeof t=="string"?Un(t):t,c=du(o.pathname||"/",s);if(c==null)return null;let h=kf(n);I0(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=V0(c);p=W0(h[m],g)}return p}function kf(n,t,s,i){t===void 0&&(t=[]),s===void 0&&(s=[]),i===void 0&&(i="");let o=(c,h,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};m.relativePath.startsWith("/")&&(De(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let g=Nr([i,m.relativePath]),y=s.concat(m);c.children&&c.children.length>0&&(De(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),kf(c.children,t,y,g)),!(c.path==null&&!c.index)&&t.push({path:g,score:B0(g,c.index),routesMeta:y})};return n.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,h);else for(let m of jf(c.path))o(c,h,m)}),t}function jf(n){let t=n.split("/");if(t.length===0)return[];let[s,...i]=t,o=s.endsWith("?"),c=s.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let h=jf(i.join("/")),p=[];return p.push(...h.map(m=>m===""?c:[c,m].join("/"))),o&&p.push(...h),p.map(m=>n.startsWith("/")&&m===""?"/":m)}function I0(n){n.sort((t,s)=>t.score!==s.score?s.score-t.score:F0(t.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}const L0=/^:[\w-]+$/,D0=3,M0=2,$0=1,U0=10,z0=-2,Ch=n=>n==="*";function B0(n,t){let s=n.split("/"),i=s.length;return s.some(Ch)&&(i+=z0),t&&(i+=M0),s.filter(o=>!Ch(o)).reduce((o,c)=>o+(L0.test(c)?D0:c===""?$0:U0),i)}function F0(n,t){return n.length===t.length&&n.slice(0,-1).every((i,o)=>i===t[o])?n[n.length-1]-t[t.length-1]:0}function W0(n,t,s){let{routesMeta:i}=n,o={},c="/",h=[];for(let p=0;p<i.length;++p){let m=i[p],g=p===i.length-1,y=c==="/"?t:t.slice(c.length)||"/",w=q0({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),x=m.route;if(!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Nr([c,w.pathname]),pathnameBase:Q0(Nr([c,w.pathnameBase])),route:x}),w.pathnameBase!=="/"&&(c=Nr([c,w.pathnameBase]))}return h}function q0(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,i]=H0(n.path,n.caseSensitive,n.end),o=t.match(s);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((g,y,w)=>{let{paramName:x,isOptional:k}=y;if(x==="*"){let _=p[w]||"";h=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const b=p[w];return k&&!b?g[x]=void 0:g[x]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:h,pattern:n}}function H0(n,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),cu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function V0(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function du(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,i=n.charAt(s);return i&&i!=="/"?null:n.slice(s)||"/"}const K0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G0=n=>K0.test(n);function J0(n,t){t===void 0&&(t="/");let{pathname:s,search:i="",hash:o=""}=typeof n=="string"?Un(n):n,c;if(s)if(G0(s))c=s;else{if(s.includes("//")){let h=s;s=s.replace(/\/\/+/g,"/"),cu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+s))}s.startsWith("/")?c=Th(s.substring(1),"/"):c=Th(s,t)}else c=t;return{pathname:c,search:X0(i),hash:Z0(o)}}function Th(n,t){let s=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Il(n,t,s,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y0(n){return n.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function hu(n,t){let s=Y0(n);return t?s.map((i,o)=>o===s.length-1?i.pathname:i.pathnameBase):s.map(i=>i.pathnameBase)}function fu(n,t,s,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Un(n):(o=Ls({},n),De(!o.pathname||!o.pathname.includes("?"),Il("?","pathname","search",o)),De(!o.pathname||!o.pathname.includes("#"),Il("#","pathname","hash",o)),De(!o.search||!o.search.includes("#"),Il("#","search","hash",o)));let c=n===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=s;else{let w=t.length-1;if(!i&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),w-=1;o.pathname=x.join("/")}p=w>=0?t[w]:"/"}let m=J0(o,p),g=h&&h!=="/"&&h.endsWith("/"),y=(c||h===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}const Nr=n=>n.join("/").replace(/\/\/+/g,"/"),Q0=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),X0=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Z0=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Sf=["post","put","patch","delete"];new Set(Sf);const tg=["get",...Sf];new Set(tg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ds(){return Ds=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}return n},Ds.apply(this,arguments)}const pu=T.createContext(null),rg=T.createContext(null),Er=T.createContext(null),Na=T.createContext(null),tr=T.createContext({outlet:null,matches:[],isDataRoute:!1}),Nf=T.createContext(null);function ng(n,t){let{relative:s}=t===void 0?{}:t;zn()||De(!1);let{basename:i,navigator:o}=T.useContext(Er),{hash:c,pathname:h,search:p}=Cf(n,{relative:s}),m=h;return i!=="/"&&(m=h==="/"?i:Nr([i,h])),o.createHref({pathname:m,search:p,hash:c})}function zn(){return T.useContext(Na)!=null}function Cr(){return zn()||De(!1),T.useContext(Na).location}function Ef(n){T.useContext(Er).static||T.useLayoutEffect(n)}function Ea(){let{isDataRoute:n}=T.useContext(tr);return n?gg():sg()}function sg(){zn()||De(!1);let n=T.useContext(pu),{basename:t,future:s,navigator:i}=T.useContext(Er),{matches:o}=T.useContext(tr),{pathname:c}=Cr(),h=JSON.stringify(hu(o,s.v7_relativeSplatPath)),p=T.useRef(!1);return Ef(()=>{p.current=!0}),T.useCallback(function(g,y){if(y===void 0&&(y={}),!p.current)return;if(typeof g=="number"){i.go(g);return}let w=fu(g,JSON.parse(h),c,y.relative==="path");n==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:Nr([t,w.pathname])),(y.replace?i.replace:i.push)(w,y.state,y)},[t,i,h,c,n])}function mu(){let{matches:n}=T.useContext(tr),t=n[n.length-1];return t?t.params:{}}function Cf(n,t){let{relative:s}=t===void 0?{}:t,{future:i}=T.useContext(Er),{matches:o}=T.useContext(tr),{pathname:c}=Cr(),h=JSON.stringify(hu(o,i.v7_relativeSplatPath));return T.useMemo(()=>fu(n,JSON.parse(h),c,s==="path"),[n,h,c,s])}function ig(n,t){return ag(n,t)}function ag(n,t,s,i){zn()||De(!1);let{navigator:o}=T.useContext(Er),{matches:c}=T.useContext(tr),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let g=Cr(),y;if(t){var w;let N=typeof t=="string"?Un(t):t;m==="/"||(w=N.pathname)!=null&&w.startsWith(m)||De(!1),y=N}else y=g;let x=y.pathname||"/",k=x;if(m!=="/"){let N=m.replace(/^\//,"").split("/");k="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=O0(n,{pathname:k}),_=dg(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:Nr([m,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:Nr([m,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),c,s,i);return t&&_?T.createElement(Na.Provider,{value:{location:Ds({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Sr.Pop}},_):_}function og(){let n=mg(),t=eg(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),s?T.createElement("pre",{style:o},s):null,null)}const lg=T.createElement(og,null);class ug extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?T.createElement(tr.Provider,{value:this.props.routeContext},T.createElement(Nf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cg(n){let{routeContext:t,match:s,children:i}=n,o=T.useContext(pu);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),T.createElement(tr.Provider,{value:t},i)}function dg(n,t,s,i){var o;if(t===void 0&&(t=[]),s===void 0&&(s=null),i===void 0&&(i=null),n==null){var c;if(!s)return null;if(s.errors)n=s.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let h=n,p=(o=s)==null?void 0:o.errors;if(p!=null){let y=h.findIndex(w=>w.route.id&&(p==null?void 0:p[w.route.id])!==void 0);y>=0||De(!1),h=h.slice(0,Math.min(h.length,y+1))}let m=!1,g=-1;if(s&&i&&i.v7_partialHydration)for(let y=0;y<h.length;y++){let w=h[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=y),w.route.id){let{loaderData:x,errors:k}=s,b=w.route.loader&&x[w.route.id]===void 0&&(!k||k[w.route.id]===void 0);if(w.route.lazy||b){m=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((y,w,x)=>{let k,b=!1,_=null,N=null;s&&(k=p&&w.route.id?p[w.route.id]:void 0,_=w.route.errorElement||lg,m&&(g<0&&x===0?(vg("route-fallback"),b=!0,N=null):g===x&&(b=!0,N=w.route.hydrateFallbackElement||null)));let L=t.concat(h.slice(0,x+1)),O=()=>{let I;return k?I=_:b?I=N:w.route.Component?I=T.createElement(w.route.Component,null):w.route.element?I=w.route.element:I=y,T.createElement(cg,{match:w,routeContext:{outlet:y,matches:L,isDataRoute:s!=null},children:I})};return s&&(w.route.ErrorBoundary||w.route.errorElement||x===0)?T.createElement(ug,{location:s.location,revalidation:s.revalidation,component:_,error:k,children:O(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):O()},null)}var Tf=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Tf||{}),Pf=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Pf||{});function hg(n){let t=T.useContext(pu);return t||De(!1),t}function fg(n){let t=T.useContext(rg);return t||De(!1),t}function pg(n){let t=T.useContext(tr);return t||De(!1),t}function Rf(n){let t=pg(),s=t.matches[t.matches.length-1];return s.route.id||De(!1),s.route.id}function mg(){var n;let t=T.useContext(Nf),s=fg(),i=Rf();return t!==void 0?t:(n=s.errors)==null?void 0:n[i]}function gg(){let{router:n}=hg(Tf.UseNavigateStable),t=Rf(Pf.UseNavigateStable),s=T.useRef(!1);return Ef(()=>{s.current=!0}),T.useCallback(function(o,c){c===void 0&&(c={}),s.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Ds({fromRouteId:t},c)))},[n,t])}const Ph={};function vg(n,t,s){Ph[n]||(Ph[n]=!0)}function yg(n,t){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Kl(n){let{to:t,replace:s,state:i,relative:o}=n;zn()||De(!1);let{future:c,static:h}=T.useContext(Er),{matches:p}=T.useContext(tr),{pathname:m}=Cr(),g=Ea(),y=fu(t,hu(p,c.v7_relativeSplatPath),m,o==="path"),w=JSON.stringify(y);return T.useEffect(()=>g(JSON.parse(w),{replace:s,state:i,relative:o}),[g,w,o,s,i]),null}function Zt(n){De(!1)}function xg(n){let{basename:t="/",children:s=null,location:i,navigationType:o=Sr.Pop,navigator:c,static:h=!1,future:p}=n;zn()&&De(!1);let m=t.replace(/^\/*/,"/"),g=T.useMemo(()=>({basename:m,navigator:c,static:h,future:Ds({v7_relativeSplatPath:!1},p)}),[m,p,c,h]);typeof i=="string"&&(i=Un(i));let{pathname:y="/",search:w="",hash:x="",state:k=null,key:b="default"}=i,_=T.useMemo(()=>{let N=du(y,m);return N==null?null:{location:{pathname:N,search:w,hash:x,state:k,key:b},navigationType:o}},[m,y,w,x,k,b,o]);return _==null?null:T.createElement(Er.Provider,{value:g},T.createElement(Na.Provider,{children:s,value:_}))}function Of(n){let{children:t,location:s}=n;return ig(Gl(t),s)}new Promise(()=>{});function Gl(n,t){t===void 0&&(t=[]);let s=[];return T.Children.forEach(n,(i,o)=>{if(!T.isValidElement(i))return;let c=[...t,o];if(i.type===T.Fragment){s.push.apply(s,Gl(i.props.children,c));return}i.type!==Zt&&De(!1),!i.props.index||!i.props.children||De(!1);let h={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Gl(i.props.children,c)),s.push(h)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}return n},Jl.apply(this,arguments)}function wg(n,t){if(n==null)return{};var s={},i=Object.keys(n),o,c;for(c=0;c<i.length;c++)o=i[c],!(t.indexOf(o)>=0)&&(s[o]=n[o]);return s}function _g(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bg(n,t){return n.button===0&&(!t||t==="_self")&&!_g(n)}function Yl(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((t,s)=>{let i=n[s];return t.concat(Array.isArray(i)?i.map(o=>[s,o]):[[s,i]])},[]))}function kg(n,t){let s=Yl(n);return t&&t.forEach((i,o)=>{s.has(o)||t.getAll(o).forEach(c=>{s.append(o,c)})}),s}const jg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Sg="6";try{window.__reactRouterVersion=Sg}catch{}const Ng="startTransition",Rh=b0[Ng];function Eg(n){let{basename:t,children:s,future:i,window:o}=n,c=T.useRef();c.current==null&&(c.current=T0({window:o,v5Compat:!0}));let h=c.current,[p,m]=T.useState({action:h.action,location:h.location}),{v7_startTransition:g}=i||{},y=T.useCallback(w=>{g&&Rh?Rh(()=>m(w)):m(w)},[m,g]);return T.useLayoutEffect(()=>h.listen(y),[h,y]),T.useEffect(()=>yg(i),[i]),T.createElement(xg,{basename:t,children:s,location:p.location,navigationType:p.action,navigator:h,future:i})}const Cg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=T.forwardRef(function(t,s){let{onClick:i,relative:o,reloadDocument:c,replace:h,state:p,target:m,to:g,preventScrollReset:y,viewTransition:w}=t,x=wg(t,jg),{basename:k}=T.useContext(Er),b,_=!1;if(typeof g=="string"&&Tg.test(g)&&(b=g,Cg))try{let I=new URL(window.location.href),z=g.startsWith("//")?new URL(I.protocol+g):new URL(g),G=du(z.pathname,k);z.origin===I.origin&&G!=null?g=G+z.search+z.hash:_=!0}catch{}let N=ng(g,{relative:o}),L=Pg(g,{replace:h,state:p,target:m,preventScrollReset:y,relative:o,viewTransition:w});function O(I){i&&i(I),I.defaultPrevented||L(I)}return T.createElement("a",Jl({},x,{href:b||N,onClick:_||c?i:O,ref:s,target:m}))});var Oh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Oh||(Oh={}));var Ah;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ah||(Ah={}));function Pg(n,t){let{target:s,replace:i,state:o,preventScrollReset:c,relative:h,viewTransition:p}=t===void 0?{}:t,m=Ea(),g=Cr(),y=Cf(n,{relative:h});return T.useCallback(w=>{if(bg(w,s)){w.preventDefault();let x=i!==void 0?i:va(g)===va(y);m(n,{replace:x,state:o,preventScrollReset:c,relative:h,viewTransition:p})}},[g,m,y,i,o,s,n,c,h,p])}function Rg(n){let t=T.useRef(Yl(n)),s=T.useRef(!1),i=Cr(),o=T.useMemo(()=>kg(i.search,s.current?null:t.current),[i.search]),c=Ea(),h=T.useCallback((p,m)=>{const g=Yl(typeof p=="function"?p(o):p);s.current=!0,c("?"+g,m)},[c,o]);return[o,h]}function Ca(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s}function Og(n,t,s,i){function o(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{g(i.next(y))}catch(w){h(w)}}function m(y){try{g(i.throw(y))}catch(w){h(w)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((i=i.apply(n,t||[])).next())})}const Ag=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class gu extends Error{constructor(t,s="FunctionsError",i){super(t),this.name=s,this.context=i}}class Ig extends gu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ih extends gu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Lh extends gu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ql;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Ql||(Ql={}));class Lg{constructor(t,{headers:s={},customFetch:i,region:o=Ql.Any}={}){this.url=t,this.headers=s,this.region=o,this.fetch=Ag(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Og(this,arguments,void 0,function*(s,i={}){var o;let c,h;try{const{headers:p,method:m,body:g,signal:y,timeout:w}=i;let x={},{region:k}=i;k||(k=this.region);const b=new URL(`${this.url}/${s}`);k&&k!=="any"&&(x["x-region"]=k,b.searchParams.set("forceFunctionRegion",k));let _;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",_=g):typeof g=="string"?(x["Content-Type"]="text/plain",_=g):typeof FormData<"u"&&g instanceof FormData?_=g:(x["Content-Type"]="application/json",_=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?_=JSON.stringify(g):_=g;let N=y;w&&(h=new AbortController,c=setTimeout(()=>h.abort(),w),y?(N=h.signal,y.addEventListener("abort",()=>h.abort())):N=h.signal);const L=yield this.fetch(b.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),p),body:_,signal:N}).catch(G=>{throw new Ig(G)}),O=L.headers.get("x-relay-error");if(O&&O==="true")throw new Ih(L);if(!L.ok)throw new Lh(L);let I=((o=L.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),z;return I==="application/json"?z=yield L.json():I==="application/octet-stream"||I==="application/pdf"?z=yield L.blob():I==="text/event-stream"?z=L:I==="multipart/form-data"?z=yield L.formData():z=yield L.text(),{data:z,error:null,response:L}}catch(p){return{data:null,error:p,response:p instanceof Lh||p instanceof Ih?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var Dg=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Mg=class{constructor(n){var t,s,i;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(i=n.urlLengthLimit)!==null&&i!==void 0?i:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let h=null,p=null,m=null,g=c.status,y=c.statusText;if(c.ok){var w,x;if(s.method!=="HEAD"){var k;const L=await c.text();L===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((k=s.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?p=L:p=JSON.parse(L))}const _=(w=s.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),N=(x=c.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");_&&N&&N.length>1&&(m=parseInt(N[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,g=406,y="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var b;const _=await c.text();try{h=JSON.parse(_),Array.isArray(h)&&c.status===404&&(p=[],h=null,g=200,y="OK")}catch{c.status===404&&_===""?(g=204,y="No Content"):h={message:_}}if(h&&s.isMaybeSingle&&(!(h==null||(b=h.details)===null||b===void 0)&&b.includes("0 rows"))&&(h=null,g=200,y="OK"),h&&s.shouldThrowOnError)throw new Dg(h)}return{error:h,data:p,count:m,status:g,statusText:y}});return this.shouldThrowOnError||(o=o.catch(c=>{var h;let p="",m="",g="";const y=c==null?void 0:c.cause;if(y){var w,x,k,b;const L=(w=y==null?void 0:y.message)!==null&&w!==void 0?w:"",O=(x=y==null?void 0:y.code)!==null&&x!==void 0?x:"";p=`${(k=c==null?void 0:c.name)!==null&&k!==void 0?k:"FetchError"}: ${c==null?void 0:c.message}`,p+=`

Caused by: ${(b=y==null?void 0:y.name)!==null&&b!==void 0?b:"Error"}: ${L}`,O&&(p+=` (${O})`),y!=null&&y.stack&&(p+=`
${y.stack}`)}else{var _;p=(_=c==null?void 0:c.stack)!==null&&_!==void 0?_:""}const N=this.url.toString().length;return(c==null?void 0:c.name)==="AbortError"||(c==null?void 0:c.code)==="ABORT_ERR"?(g="",m="Request was aborted (timeout or manual cancellation)",N>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${N} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(g="",m="HTTP headers exceeded server limits (typically 16KB)",N>this.urlLengthLimit&&(m+=`. Your request URL is ${N} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,details:p,hint:m,code:g},data:null,count:null,status:0,statusText:""}})),o.then(n,t)}returns(){return this}overrideTypes(){return this}},$g=class extends Mg{select(n){let t=!1;const s=(n??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:s,foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${n}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:s=t}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,t,{foreignTable:s,referencedTable:i=s}={}){const o=typeof i>"u"?"offset":`${i}.offset`,c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${n}`),this.url.searchParams.set(c,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:s=!1,buffers:i=!1,wal:o=!1,format:c="text"}={}){var h;const p=[n?"analyze":null,t?"verbose":null,s?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Dh=new RegExp("[,()]");var On=class extends $g{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const s=Array.from(new Set(t)).map(i=>typeof i=="string"&&Dh.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,t){const s=Array.from(new Set(t)).map(i=>typeof i=="string"&&Dh.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:s,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${o}fts${c}.${t}`),this}match(n){return Object.entries(n).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(n,t,s){return this.url.searchParams.append(n,`not.${t}.${s}`),this}or(n,{foreignTable:t,referencedTable:s=t}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,t,s){return this.url.searchParams.append(n,`${t}.${s}`),this}},Ug=class{constructor(n,{headers:t={},schema:s,fetch:i,urlLengthLimit:o=8e3}){this.url=n,this.headers=new Headers(t),this.schema=s,this.fetch=i,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:s=!1,count:i}=t??{},o=s?"HEAD":"GET";let c=!1;const h=(n??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join(""),{url:p,headers:m}=this.cloneRequestState();return p.searchParams.set("select",h),i&&m.append("Prefer",`count=${i}`),new On({method:o,url:p,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:t,defaultToNull:s=!0}={}){var i;const o="POST",{url:c,headers:h}=this.cloneRequestState();if(t&&h.append("Prefer",`count=${t}`),s||h.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);c.searchParams.set("columns",m.join(","))}}return new On({method:o,url:c,headers:h,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:t,ignoreDuplicates:s=!1,count:i,defaultToNull:o=!0}={}){var c;const h="POST",{url:p,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&p.searchParams.set("on_conflict",t),i&&m.append("Prefer",`count=${i}`),o||m.append("Prefer","missing=default"),Array.isArray(n)){const g=n.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(g.length>0){const y=[...new Set(g)].map(w=>`"${w}"`);p.searchParams.set("columns",y.join(","))}}return new On({method:h,url:p,headers:m,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:t}={}){var s;const i="PATCH",{url:o,headers:c}=this.cloneRequestState();return t&&c.append("Prefer",`count=${t}`),new On({method:i,url:o,headers:c,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var t;const s="DELETE",{url:i,headers:o}=this.cloneRequestState();return n&&o.append("Prefer",`count=${n}`),new On({method:s,url:i,headers:o,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ms(n){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(n)}function zg(n,t){if(Ms(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,t);if(Ms(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Bg(n){var t=zg(n,"string");return Ms(t)=="symbol"?t:t+""}function Fg(n,t,s){return(t=Bg(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Mh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),s.push.apply(s,i)}return s}function oa(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Mh(Object(s),!0).forEach(function(i){Fg(n,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Mh(Object(s)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(s,i))})}return n}var Wg=class Af{constructor(t,{headers:s={},schema:i,fetch:o,timeout:c,urlLengthLimit:h=8e3}={}){this.url=t,this.headers=new Headers(s),this.schemaName=i,this.urlLengthLimit=h;const p=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(m,g)=>{const y=new AbortController,w=setTimeout(()=>y.abort(),c),x=g==null?void 0:g.signal;if(x){if(x.aborted)return clearTimeout(w),p(m,g);const k=()=>{clearTimeout(w),y.abort()};return x.addEventListener("abort",k,{once:!0}),p(m,oa(oa({},g),{},{signal:y.signal})).finally(()=>{clearTimeout(w),x.removeEventListener("abort",k)})}return p(m,oa(oa({},g),{},{signal:y.signal})).finally(()=>clearTimeout(w))}:this.fetch=p}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ug(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Af(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,s={},{head:i=!1,get:o=!1,count:c}={}){var h;let p;const m=new URL(`${this.url}/rpc/${t}`);let g;const y=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(y)),w=i&&Object.values(s).some(y);w?(p="POST",g=s):i||o?(p=i?"HEAD":"GET",Object.entries(s).filter(([k,b])=>b!==void 0).map(([k,b])=>[k,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([k,b])=>{m.searchParams.append(k,b)})):(p="POST",g=s);const x=new Headers(this.headers);return w?x.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&x.set("Prefer",`count=${c}`),new On({method:p,url:m,headers:x,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class qg{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const i=s.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const i=this.getWebSocketConstructor();return new i(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Hg="2.97.0",Vg=`realtime-js/${Hg}`,Kg="1.0.0",If="2.0.0",$h=If,Xl=1e4,Gg=1e3,Jg=100;var kr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(kr||(kr={}));var Fe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Fe||(Fe={}));var Mt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Mt||(Mt={}));var Zl;(function(n){n.websocket="websocket"})(Zl||(Zl={}));var Vr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Vr||(Vr={}));class Yg{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,i;const o=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var s,i;const o=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},h=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,s,i){var o,c;const h=t.topic,p=(o=t.ref)!==null&&o!==void 0?o:"",m=(c=t.join_ref)!==null&&c!==void 0?c:"",g=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},w=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+g.length+w.length,k=new ArrayBuffer(this.HEADER_LENGTH+x);let b=new DataView(k),_=0;b.setUint8(_++,this.KINDS.userBroadcastPush),b.setUint8(_++,m.length),b.setUint8(_++,p.length),b.setUint8(_++,h.length),b.setUint8(_++,g.length),b.setUint8(_++,w.length),b.setUint8(_++,s),Array.from(m,L=>b.setUint8(_++,L.charCodeAt(0))),Array.from(p,L=>b.setUint8(_++,L.charCodeAt(0))),Array.from(h,L=>b.setUint8(_++,L.charCodeAt(0))),Array.from(g,L=>b.setUint8(_++,L.charCodeAt(0))),Array.from(w,L=>b.setUint8(_++,L.charCodeAt(0)));var N=new Uint8Array(k.byteLength+i.byteLength);return N.set(new Uint8Array(k),0),N.set(new Uint8Array(i),k.byteLength),N.buffer}decode(t,s){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return s(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,c,h,p,m]=i;return s({join_ref:o,ref:c,topic:h,event:p,payload:m})}return s({})}_binaryDecode(t){const s=new DataView(t),i=s.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,s,o)}}_decodeUserBroadcast(t,s,i){const o=s.getUint8(1),c=s.getUint8(2),h=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const g=i.decode(t.slice(m,m+o));m=m+o;const y=i.decode(t.slice(m,m+c));m=m+c;const w=i.decode(t.slice(m,m+h));m=m+h;const x=t.slice(m,t.byteLength),k=p===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,b={type:this.BROADCAST_EVENT,event:y,payload:k};return h>0&&(b.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>s.includes(i)))}}class Lf{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _e;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(_e||(_e={}));const Uh=(n,t,s={})=>{var i;const o=(i=s.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((c,h)=>(c[h]=Qg(h,n,t,o),c),{}):{}},Qg=(n,t,s,i)=>{const o=t.find(p=>p.name===n),c=o==null?void 0:o.type,h=s[n];return c&&!i.includes(c)?Df(c,h):eu(h)},Df=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return tv(t,s)}switch(n){case _e.bool:return Xg(t);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return Zg(t);case _e.json:case _e.jsonb:return ev(t);case _e.timestamp:return rv(t);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return eu(t);default:return eu(t)}},eu=n=>n,Xg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Zg=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},ev=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},tv=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,i=n[s];if(n[0]==="{"&&i==="}"){let c;const h=n.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>Df(t,p))}return n},rv=n=>typeof n=="string"?n.replace(" ","T"):n,Mf=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ll{constructor(t,s,i={},o=Xl){this.channel=t,this.event=s,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var i;return this._hasReceived(t)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(zh||(zh={}));class As{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,o,c,h),this.pendingDiffs.forEach(m=>{this.state=As.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=As.syncDiff(this.state,o,c,h),p())}),this.onJoin((o,c,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:h})}),this.onLeave((o,c,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,i,o){const c=this.cloneDeep(t),h=this.transformState(s),p={},m={};return this.map(c,(g,y)=>{h[g]||(m[g]=y)}),this.map(h,(g,y)=>{const w=c[g];if(w){const x=y.map(N=>N.presence_ref),k=w.map(N=>N.presence_ref),b=y.filter(N=>k.indexOf(N.presence_ref)<0),_=w.filter(N=>x.indexOf(N.presence_ref)<0);b.length>0&&(p[g]=b),_.length>0&&(m[g]=_)}else p[g]=y}),this.syncDiff(c,{joins:p,leaves:m},i,o)}static syncDiff(t,s,i,o){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(p,m)=>{var g;const y=(g=t[p])!==null&&g!==void 0?g:[];if(t[p]=this.cloneDeep(m),y.length>0){const w=t[p].map(k=>k.presence_ref),x=y.filter(k=>w.indexOf(k.presence_ref)<0);t[p].unshift(...x)}i(p,y,m)}),this.map(h,(p,m)=>{let g=t[p];if(!g)return;const y=m.map(w=>w.presence_ref);g=g.filter(w=>y.indexOf(w.presence_ref)<0),t[p]=g,o(p,g,m),g.length===0&&delete t[p]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(i=>s(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,i)=>{const o=t[i];return"metas"in o?s[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[i]=o,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bh;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Bh||(Bh={}));var Is;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Is||(Is={}));var Xt;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class Ln{constructor(t,s={config:{}},i){var o,c;if(this.topic=t,this.params=s,this.socket=i,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ll(this,Mt.join,this.params,this.timeout),this.rejoinTimer=new Lf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mt.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new As(this),this.broadcastEndpointURL=Mf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var i,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,g=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(k=>k.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[Is.PRESENCE]&&this.bindings[Is.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,w={},x={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(k=>t==null?void 0:t(Xt.CHANNEL_ERROR,k)),this._onClose(()=>t==null?void 0:t(Xt.CLOSED)),this.updateJoinPayload(Object.assign({config:x},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:k})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){t==null||t(Xt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,N=(b=_==null?void 0:_.length)!==null&&b!==void 0?b:0,L=[];for(let O=0;O<N;O++){const I=_[O],{filter:{event:z,schema:G,table:J,filter:ae}}=I,Ee=k&&k[O];if(Ee&&Ee.event===z&&Ln.isFilterValueEqual(Ee.schema,G)&&Ln.isFilterValueEqual(Ee.table,J)&&Ln.isFilterValueEqual(Ee.filter,ae))L.push(Object.assign(Object.assign({},I),{id:Ee.id}));else{this.unsubscribe(),this.state=Fe.errored,t==null||t(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,t&&t(Xt.SUBSCRIBED);return}}).receive("error",k=>{this.state=Fe.errored,t==null||t(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,i){return this.state===Fe.joined&&t===Is.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,i)}async httpSend(t,s,i={}){var o;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(t,s={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=t,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,m;const g=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fe.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Ll(this,Mt.leave,{},t),i.receive("ok",()=>{s(),o("ok")}).receive("timeout",()=>{s(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(t,s,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),h=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(c),h}_push(t,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Ll(this,t,s,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Jg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,i){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,i){var o,c;const h=t.toLocaleLowerCase(),{close:p,error:m,leave:g,join:y}=Mt;if(i&&[p,m,g,y].indexOf(h)>=0&&i!==this._joinRef())return;let x=this._onMessage(h,s,i);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(k=>{var b,_,N;return((b=k.filter)===null||b===void 0?void 0:b.event)==="*"||((N=(_=k.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===h}).map(k=>k.callback(x,i)):(c=this.bindings[h])===null||c===void 0||c.filter(k=>{var b,_,N,L,O,I;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in k){const z=k.id,G=(b=k.filter)===null||b===void 0?void 0:b.event;return z&&((_=s.ids)===null||_===void 0?void 0:_.includes(z))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const z=(O=(L=k==null?void 0:k.filter)===null||L===void 0?void 0:L.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return z==="*"||z===((I=s==null?void 0:s.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===h}).map(k=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:_,table:N,commit_timestamp:L,type:O,errors:I}=b;x=Object.assign(Object.assign({},{schema:_,table:N,commit_timestamp:L,eventType:O,new:{},old:{},errors:I}),this._getPayloadRecords(b))}k.callback(x,i)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,i){const o=t.toLocaleLowerCase(),c={type:o,filter:s,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(t,s){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Ln.isEqual(o.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const i in t)if(t[i]!==s[i])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Mt.close,{},t)}_onError(t){this._on(Mt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Uh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Uh(t.columns,t.old_record)),s}}const Dl=()=>{},la={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nv=[1e3,2e3,5e3,1e4],sv=1e4,iv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class av{constructor(t,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xl,this.transport=null,this.heartbeatIntervalMs=la.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dl,this.ref=0,this.reconnectTimer=null,this.vsn=$h,this.logger=Dl,this.conn=null,this.sendBuffer=[],this.serializer=new Yg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((i=s==null?void 0:s.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${Zl.websocket}`,this.httpEndpoint=Mf(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,i){this.logger(t,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case kr.connecting:return Vr.Connecting;case kr.open:return Vr.Open;case kr.closing:return Vr.Closing;default:return Vr.Closed}}isConnected(){return this.connectionState()===Vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(c=>c.topic===i);if(o)return o;{const c=new Ln(`realtime:${t}`,s,this);return this.channels.push(c),c}}push(t){const{topic:s,event:i,payload:o,ref:c}=t,h=()=>{this.encode(t,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${i} (${c})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Gg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},la.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",g)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:c,ref:h}=s,p=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${i} ${o} ${p}`.trim(),c),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,c,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===kr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===kr.open||this.conn.readyState===kr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Mt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${t}${i}${o}`}_workerObjectUrl(t){let s;if(t)s=t;else{const i=new Blob([iv],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,i=!1;if(t)s=t,i=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),s=this.accessTokenValue}else s=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const c={access_token:s,version:Vg};s&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(Mt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(s)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Lf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},la.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,i,o,c,h,p,m,g,y,w,x,k;switch(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Xl,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:la.HEARTBEAT_INTERVAL,this.worker=(c=t==null?void 0:t.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=t==null?void 0:t.heartbeatCallback)!==null&&p!==void 0?p:Dl,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:$h,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=t==null?void 0:t.reconnectAfterMs)!==null&&g!==void 0?g:(b=>nv[b-1]||sv),this.vsn){case Kg:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:((b,_)=>_(JSON.stringify(b))),this.decode=(w=t==null?void 0:t.decode)!==null&&w!==void 0?w:((b,_)=>_(JSON.parse(b)));break;case If:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(k=t==null?void 0:t.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var $s=class extends Error{constructor(n,t){var s;super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((s=t.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ov(n,t,s){const i=new URL(t,n);if(s)for(const[o,c]of Object.entries(s))c!==void 0&&i.searchParams.set(o,c);return i.toString()}async function lv(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function uv(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:i,query:o,body:c,headers:h}){const p=ov(n.baseUrl,i,o),m=await lv(n.auth),g=await t(p,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...m,...h},body:c?JSON.stringify(c):void 0}),y=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),x=w&&y?JSON.parse(y):y;if(!g.ok){const k=w?x:void 0,b=k==null?void 0:k.error;throw new $s((b==null?void 0:b.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:k})}return{status:g.status,headers:g.headers,data:x}}}}function ua(n){return n.join("")}var cv=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:ua(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,t){const s={namespace:n.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ua(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ua(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ua(n.namespace)}`}),!0}catch(t){if(t instanceof $s&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(s){if(s instanceof $s&&s.status===409)return;throw s}}};function jn(n){return n.join("")}var dv=class{constructor(n,t="",s){this.client=n,this.prefix=t,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jn(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${jn(n.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(n,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${jn(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jn(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jn(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(s){if(s instanceof $s&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(s){if(s instanceof $s&&s.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw s}}},hv=class{constructor(n){var i;let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=uv({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(i=n.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new cv(this.client,t),this.tableOps=new dv(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},Ta=class extends Error{constructor(n,t="storage",s,i){super(n),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=i}};function Pa(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ca=class extends Ta{constructor(n,t,s,i="storage"){super(n,i,t,s),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$f=class extends Ta{constructor(n,t,s="storage"){super(n,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const fv=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),pv=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},tu=n=>{if(Array.isArray(n))return n.map(s=>tu(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,i])=>{const o=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[o]=tu(i)}),t},mv=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Us(n){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(n)}function gv(n,t){if(Us(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,t);if(Us(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function vv(n){var t=gv(n,"string");return Us(t)=="symbol"?t:t+""}function yv(n,t,s){return(t=vv(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Fh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),s.push.apply(s,i)}return s}function te(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Fh(Object(s),!0).forEach(function(i){yv(n,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Fh(Object(s)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(s,i))})}return n}const Wh=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},xv=async(n,t,s,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const o=n,c=o.status||500;if(typeof o.json=="function")o.json().then(h=>{const p=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||c+"";t(new ca(Wh(h),c,p,i))}).catch(()=>{if(i==="vectors"){const h=c+"";t(new ca(o.statusText||`HTTP ${c} error`,c,h,i))}else{const h=c+"";t(new ca(o.statusText||`HTTP ${c} error`,c,h,i))}});else{const h=c+"";t(new ca(o.statusText||`HTTP ${c} error`,c,h,i))}}else t(new $f(Wh(n),n,i))},wv=(n,t,s,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||n==="HEAD"||!i?te(te({},o),s):(pv(i)?(o.headers=te({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,t!=null&&t.duplex&&(o.duplex=t.duplex),te(te({},o),s))};async function Ts(n,t,s,i,o,c,h){return new Promise((p,m)=>{n(s,wv(t,i,o,c)).then(g=>{if(!g.ok)throw g;if(i!=null&&i.noResolveJson)return g;if(h==="vectors"){const y=g.headers.get("content-type");if(g.headers.get("content-length")==="0"||g.status===204)return{};if(!y||!y.includes("application/json"))return{}}return g.json()}).then(g=>p(g)).catch(g=>xv(g,m,i,h))})}function Uf(n="storage"){return{get:async(t,s,i,o)=>Ts(t,"GET",s,i,o,void 0,n),post:async(t,s,i,o,c)=>Ts(t,"POST",s,o,c,i,n),put:async(t,s,i,o,c)=>Ts(t,"PUT",s,o,c,i,n),head:async(t,s,i,o)=>Ts(t,"HEAD",s,te(te({},i),{},{noResolveJson:!0}),o,void 0,n),remove:async(t,s,i,o,c)=>Ts(t,"DELETE",s,o,c,i,n)}}const _v=Uf("storage"),{get:zs,post:Dt,put:ru,head:bv,remove:vu}=_v,xt=Uf("vectors");var Bn=class{constructor(n,t={},s,i="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.fetch=fv(s),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=te(te({},this.headers),{},{[n]:t}),this}async handleOperation(n){var t=this;try{return{data:await n(),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Pa(s))return{data:null,error:s};throw s}}},kv=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Pa(t))return{data:null,error:t};throw t}}};let zf;zf=Symbol.toStringTag;var jv=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[zf]="BlobDownloadBuilder",this.promise=null}asStream(){return new kv(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Pa(t))return{data:null,error:t};throw t}}};const Sv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Nv=class extends Bn{constructor(n,t={},s,i){super(n,t,i,"storage"),this.bucketId=s}async uploadOrUpdate(n,t,s,i){var o=this;return o.handleOperation(async()=>{let c;const h=te(te({},qh),i);let p=te(te({},o.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",o.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),m&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(m))):(c=s,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),i!=null&&i.headers&&(p=te(te({},p),i.headers));const g=o._removeEmptyFolders(t),y=o._getFinalPath(g),w=await(n=="PUT"?ru:Dt)(o.fetch,`${o.url}/object/${y}`,c,te({headers:p},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{path:g,id:w.Id,fullPath:w.Key}})}async upload(n,t,s){return this.uploadOrUpdate("POST",n,t,s)}async uploadToSignedUrl(n,t,s,i){var o=this;const c=o._removeEmptyFolders(n),h=o._getFinalPath(c),p=new URL(o.url+`/object/upload/sign/${h}`);return p.searchParams.set("token",t),o.handleOperation(async()=>{let m;const g=te({upsert:qh.upsert},i),y=te(te({},o.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",g.cacheControl)):(m=s,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType),{path:c,fullPath:(await ru(o.fetch,p.toString(),m,{headers:y})).Key}})}async createSignedUploadUrl(n,t){var s=this;return s.handleOperation(async()=>{let i=s._getFinalPath(n);const o=te({},s.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const c=await Dt(s.fetch,`${s.url}/object/upload/sign/${i}`,{},{headers:o}),h=new URL(s.url+c.url),p=h.searchParams.get("token");if(!p)throw new Ta("No token returned by API");return{signedUrl:h.toString(),path:n,token:p}})}async update(n,t,s){return this.uploadOrUpdate("PUT",n,t,s)}async move(n,t,s){var i=this;return i.handleOperation(async()=>await Dt(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:i.headers}))}async copy(n,t,s){var i=this;return i.handleOperation(async()=>({path:(await Dt(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(n,t,s){var i=this;return i.handleOperation(async()=>{let o=i._getFinalPath(n),c=await Dt(i.fetch,`${i.url}/object/sign/${o}`,te({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:i.headers});const h=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${i.url}${c.signedURL}${h}`)}})}async createSignedUrls(n,t,s){var i=this;return i.handleOperation(async()=>{const o=await Dt(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:n},{headers:i.headers}),c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o.map(h=>te(te({},h),{},{signedUrl:h.signedURL?encodeURI(`${i.url}${h.signedURL}${c}`):null}))})}download(n,t,s){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=o?`?${o}`:"",h=this._getFinalPath(n),p=()=>zs(this.fetch,`${this.url}/${i}/${h}${c}`,{headers:this.headers,noResolveJson:!0},s);return new jv(p,this.shouldThrowOnError)}async info(n){var t=this;const s=t._getFinalPath(n);return t.handleOperation(async()=>tu(await zs(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})))}async exists(n){var t=this;const s=t._getFinalPath(n);try{return await bv(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Pa(i)&&i instanceof $f){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,t){const s=this._getFinalPath(n),i=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&i.push(h);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${p}`)}}}async remove(n){var t=this;return t.handleOperation(async()=>await vu(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}))}async list(n,t,s){var i=this;return i.handleOperation(async()=>{const o=te(te(te({},Sv),t),{},{prefix:n||""});return await Dt(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},s)})}async listV2(n,t){var s=this;return s.handleOperation(async()=>{const i=te({},n);return await Dt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,i,{headers:s.headers},t)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const Ev="2.97.0",Ks={"X-Client-Info":`storage-js/${Ev}`};var Cv=class extends Bn{constructor(n,t={},s,i){const o=new URL(n);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),h=te(te({},Ks),t);super(c,h,s,"storage")}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=t.listBucketOptionsToQueryString(n);return await zs(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers})})}async getBucket(n){var t=this;return t.handleOperation(async()=>await zs(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}))}async createBucket(n,t={public:!1}){var s=this;return s.handleOperation(async()=>await Dt(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async updateBucket(n,t){var s=this;return s.handleOperation(async()=>await ru(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(n){var t=this;return t.handleOperation(async()=>await Dt(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await vu(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Tv=class extends Bn{constructor(n,t={},s){const i=n.replace(/\/$/,""),o=te(te({},Ks),t);super(i,o,s,"storage")}async createBucket(n){var t=this;return t.handleOperation(async()=>await Dt(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}))}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const i=s.toString(),o=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await zs(t.fetch,o,{headers:t.headers})})}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await vu(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}from(n){var t=this;if(!mv(n))throw new Ta("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new hv({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(s,{get(o,c){const h=o[c];return typeof h!="function"?h:async(...p)=>{try{return{data:await h.apply(o,p),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}},Pv=class extends Bn{constructor(n,t={},s){const i=n.replace(/\/$/,""),o=te(te({},Ks),{},{"Content-Type":"application/json"},t);super(i,o,s,"vectors")}async createIndex(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{})}async getIndex(n,t){var s=this;return s.handleOperation(async()=>await xt.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers}))}async listIndexes(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}))}async deleteIndex(n,t){var s=this;return s.handleOperation(async()=>await xt.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers})||{})}},Rv=class extends Bn{constructor(n,t={},s){const i=n.replace(/\/$/,""),o=te(te({},Ks),{},{"Content-Type":"application/json"},t);super(i,o,s,"vectors")}async putVectors(n){var t=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{})}async getVectors(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}))}async listVectors(n){var t=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}))}async queryVectors(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}))}async deleteVectors(n){var t=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{})}},Ov=class extends Bn{constructor(n,t={},s){const i=n.replace(/\/$/,""),o=te(te({},Ks),{},{"Content-Type":"application/json"},t);super(i,o,s,"vectors")}async createBucket(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}async getBucket(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}))}async listBuckets(n={}){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await xt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}},Av=class extends Ov{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new Iv(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,s=this;return t().call(s,n)}async getBucket(n){var t=()=>super.getBucket,s=this;return t().call(s,n)}async listBuckets(n={}){var t=()=>super.listBuckets,s=this;return t().call(s,n)}async deleteBucket(n){var t=()=>super.deleteBucket,s=this;return t().call(s,n)}},Iv=class extends Pv{constructor(n,t,s,i){super(n,t,i),this.vectorBucketName=s}async createIndex(n){var t=()=>super.createIndex,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,n)}index(n){return new Lv(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Lv=class extends Rv{constructor(n,t,s,i,o){super(n,t,o),this.vectorBucketName=s,this.indexName=i}async putVectors(n){var t=()=>super.putVectors,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var t=()=>super.getVectors,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,s=this;return t().call(s,te(te({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Dv=class extends Cv{constructor(n,t={},s,i){super(n,t,s,i)}from(n){return new Nv(this.url,this.headers,n,this.fetch)}get vectors(){return new Av(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Tv(this.url+"/iceberg",this.headers,this.fetch)}};const Bf="2.97.0",An=30*1e3,nu=3,Ml=nu*An,Mv="http://localhost:9999",$v="supabase.auth.token",Uv={"X-Client-Info":`gotrue-js/${Bf}`},su="X-Supabase-Api-Version",Ff={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Bv=600*1e3;class Bs extends Error{constructor(t,s,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function Q(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Fv extends Bs{constructor(t,s,i){super(t,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function Wv(n){return Q(n)&&n.name==="AuthApiError"}class Kr extends Bs{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class rr extends Bs{constructor(t,s,i,o){super(t,i,o),this.name=s,this.status=i}}class yt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $l(n){return Q(n)&&n.name==="AuthSessionMissingError"}class Sn extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class da extends rr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ha extends rr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qv(n){return Q(n)&&n.name==="AuthImplicitGrantRedirectError"}class Hh extends rr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hv extends rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class iu extends rr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Ul(n){return Q(n)&&n.name==="AuthRetryableFetchError"}class Vh extends rr{constructor(t,s,i){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class au extends rr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kh=` 	
\r=`.split(""),Vv=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<Kh.length;t+=1)n[Kh[t].charCodeAt(0)]=-2;for(let t=0;t<ya.length;t+=1)n[ya[t].charCodeAt(0)]=t;return n})();function Gh(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;s(ya[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;s(ya[i]),t.queuedBits-=6}}function Wf(n,t,s){const i=Vv[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Jh(n){const t=[],s=h=>{t.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=h=>{Jv(h,i,s)};for(let h=0;h<n.length;h+=1)Wf(n.charCodeAt(h),o,c);return t.join("")}function Kv(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Gv(n,t){for(let s=0;s<n.length;s+=1){let i=n.charCodeAt(s);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(n.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}Kv(i,t)}}function Jv(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Dn(n){const t=[],s={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)Wf(n.charCodeAt(o),s,i);return new Uint8Array(t)}function Yv(n){const t=[];return Gv(n,s=>t.push(s)),new Uint8Array(t)}function Gr(n){const t=[],s={queue:0,queuedBits:0},i=o=>{t.push(o)};return n.forEach(o=>Gh(o,s,i)),Gh(null,s,i),t.join("")}function Qv(n){return Math.round(Date.now()/1e3)+n}function Xv(){return Symbol("auth-callback")}const Qe=()=>typeof window<"u"&&typeof document<"u",Fr={tested:!1,writable:!1},qf=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fr.tested)return Fr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Fr.tested=!0,Fr.writable=!0}catch{Fr.tested=!0,Fr.writable=!1}return Fr.writable};function Zv(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,c)=>{t[c]=o})}catch{}return s.searchParams.forEach((i,o)=>{t[o]=i}),t}const Hf=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),ey=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",In=async(n,t,s)=>{await n.setItem(t,JSON.stringify(s))},Wr=async(n,t)=>{const s=await n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ye=async(n,t)=>{await n.removeItem(t)};class Ra{constructor(){this.promise=new Ra.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Ra.promiseConstructor=Promise;function fa(n){const t=n.split(".");if(t.length!==3)throw new au("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!zv.test(t[i]))throw new au("JWT not in base64url format");return{header:JSON.parse(Jh(t[0])),payload:JSON.parse(Jh(t[1])),signature:Dn(t[2]),raw:{header:t[0],payload:t[1]}}}async function ty(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function ry(n,t){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await n(c);if(!t(c,null,h)){i(h);return}}catch(h){if(!t(c,h)){o(h);return}}})()})}function ny(n){return("0"+n.toString(16)).substr(-2)}function sy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let o="";for(let c=0;c<56;c++)o+=s.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,ny).join("")}async function iy(n){const s=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function ay(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await iy(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nn(n,t,s=!1){const i=sy();let o=i;s&&(o+="/PASSWORD_RECOVERY"),await In(n,`${t}-code-verifier`,o);const c=await ay(i);return[c,i===c?"plain":"s256"]}const oy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ly(n){const t=n.headers.get(su);if(!t||!t.match(oy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function uy(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function cy(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function En(n){if(!dy.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zl(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hy(n,t){return new Proxy(n,{get:(s,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,i,o)}})}function Yh(n){return JSON.parse(JSON.stringify(n))}const qr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fy=[502,503,504];async function Qh(n){var t;if(!ey(n))throw new iu(qr(n),0);if(fy.includes(n.status))throw new iu(qr(n),n.status);let s;try{s=await n.json()}catch(c){throw new Kr(qr(c),c)}let i;const o=ly(n);if(o&&o.getTime()>=Ff["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new Vh(qr(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new yt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Vh(qr(s),n.status,s.weak_password.reasons);throw new Fv(qr(s),n.status||500,i)}const py=(n,t,s,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),s))};async function re(n,t,s,i){var o;const c=Object.assign({},i==null?void 0:i.headers);c[su]||(c[su]=Ff["2024-01-01"].name),i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const h=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(h.redirect_to=i.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await my(n,t,s+p,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function my(n,t,s,i,o,c){const h=py(t,i,o,c);let p;try{p=await n(s,Object.assign({},h))}catch(m){throw console.error(m),new iu(qr(m),0)}if(p.ok||await Qh(p),i!=null&&i.noResolveJson)return p;try{return await p.json()}catch(m){await Qh(m)}}function Lt(n){var t;let s=null;yy(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=Qv(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:i},error:null}}function Xh(n){const t=Lt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function jr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function gy(n){return{data:n,error:null}}function vy(n){const{action_link:t,email_otp:s,hashed_token:i,redirect_to:o,verification_type:c}=n,h=Ca(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:t,email_otp:s,hashed_token:i,redirect_to:o,verification_type:c},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function Zh(n){return n}function yy(n){return n.access_token&&n.refresh_token&&n.expires_in}const Bl=["global","local","others"];class xy{constructor({url:t="",headers:s={},fetch:i}){this.url=t,this.headers=s,this.fetch=Hf(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Bl[0]){if(Bl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bl.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Q(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,s={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:jr})}catch(i){if(Q(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:s}=t,i=Ca(t,["options"]),o=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:vy,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Q(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:jr})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,i,o,c,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},y=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Zh});if(y.error)throw y.error;const w=await y.json(),x=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return k.length>0&&(k.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(b.split(";")[1].split("=")[1]);g[`${N}Page`]=_}),g.total=parseInt(x)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(Q(g))return{data:{users:[]},error:g};throw g}}async getUserById(t){En(t);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:jr})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){En(t);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:jr})}catch(i){if(Q(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,s=!1){En(t);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:jr})}catch(i){if(Q(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){En(t.userId);try{const{data:s,error:i}=await re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:i}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _deleteFactor(t){En(t.userId),En(t.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,i,o,c,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},y=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Zh});if(y.error)throw y.error;const w=await y.json(),x=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return k.length>0&&(k.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(b.split(";")[1].split("=")[1]);g[`${N}Page`]=_}),g.total=parseInt(x)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(Q(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(t){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Q(s))return{data:null,error:s};throw s}}}function ef(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}const Cn={debug:!!(globalThis&&qf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tf extends Vf{}async function wy(n,t,s){Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;t>0&&setTimeout(()=>{i.abort(),Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await s()}finally{Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(t===0)throw Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new tf(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Cn.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}catch(o){throw(o==null?void 0:o.name)==="AbortError"?new tf(`Acquiring an exclusive Navigator LockManager lock "${n}" timed out waiting ${t}ms`):o}}function _y(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Kf(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function by(n){return parseInt(n,16)}function ky(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function jy(n){var t;const{chainId:s,domain:i,expirationTime:o,issuedAt:c=new Date,nonce:h,notBefore:p,requestId:m,resources:g,scheme:y,uri:w,version:x}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const k=Kf(n.address),b=y?`${y}://${i}`:i,_=n.statement?`${n.statement}
`:"",N=`${b} wants you to sign in with your Ethereum account:
${k}

${_}`;let L=`URI: ${w}
Version: ${x}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(o&&(L+=`
Expiration Time: ${o.toISOString()}`),p&&(L+=`
Not Before: ${p.toISOString()}`),m&&(L+=`
Request ID: ${m}`),g){let O=`
Resources:`;for(const I of g){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);O+=`
- ${I}`}L+=O}return`${N}
${L}`}class Ue extends Error{constructor({message:t,code:s,cause:i,name:o}){var c;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=o??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class xa extends Ue{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function Sy({error:n,options:t}){var s,i,o;const{publicKey:c}=t;if(!c)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ue({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const h=window.location.hostname;if(Gf(h)){if(c.rp.id!==h)return new Ue({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Ny({error:n,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ue({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(Gf(i)){if(s.rpId!==i)return new Ue({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Ey{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Cy=new Ey;function Ty(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:s,excludeCredentials:i}=n,o=Ca(n,["challenge","user","excludeCredentials"]),c=Dn(t).buffer,h=Object.assign(Object.assign({},s),{id:Dn(s.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:c,user:h});if(i&&i.length>0){p.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const g=i[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Dn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function Py(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:s}=n,i=Ca(n,["challenge","allowCredentials"]),o=Dn(t).buffer,c=Object.assign(Object.assign({},i),{challenge:o});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];c.allowCredentials[h]=Object.assign(Object.assign({},p),{id:Dn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function Ry(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:Gr(new Uint8Array(n.response.attestationObject)),clientDataJSON:Gr(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Oy(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,i=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Gr(new Uint8Array(o.authenticatorData)),clientDataJSON:Gr(new Uint8Array(o.clientDataJSON)),signature:Gr(new Uint8Array(o.signature)),userHandle:o.userHandle?Gr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Gf(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function rf(){var n,t;return!!(Qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Ay(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xa("Browser returned unexpected credential type",t)}:{data:null,error:new xa("Empty credential response",t)}}catch(t){return{data:null,error:Sy({error:t,options:n})}}}async function Iy(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xa("Browser returned unexpected credential type",t)}:{data:null,error:new xa("Empty credential response",t)}}catch(t){return{data:null,error:Ny({error:t,options:n})}}}const Ly={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Dy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wa(...n){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),s=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of n)if(o)for(const c in o){const h=o[c];if(h!==void 0)if(Array.isArray(h))i[c]=h;else if(s(h))i[c]=h;else if(t(h)){const p=i[c];t(p)?i[c]=wa(p,h):i[c]=wa(h)}else i[c]=h}return i}function My(n,t){return wa(Ly,n,t||{})}function $y(n,t){return wa(Dy,n,t||{})}class Uy{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:i,signal:o},c){var h;try{const{data:p,error:m}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!p)return{data:null,error:m};const g=o??Cy.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:y}=p.webauthn.credential_options.publicKey;if(!y.name){const w=i;if(w)y.name=`${y.id}:${w}`;else{const k=(await this.client.getUser()).data.user,b=((h=k==null?void 0:k.user_metadata)===null||h===void 0?void 0:h.name)||(k==null?void 0:k.email)||(k==null?void 0:k.id)||"User";y.name=`${y.id}:${b}`}}y.displayName||(y.displayName=y.name)}switch(p.webauthn.type){case"create":{const y=My(p.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:w,error:x}=await Ay({publicKey:y,signal:g});return w?{data:{factorId:t,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:w}},error:null}:{data:null,error:x}}case"request":{const y=$y(p.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:w,error:x}=await Iy(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:y,signal:g}));return w?{data:{factorId:t,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:w}},error:null}:{data:null,error:x}}}}catch(p){return Q(p)?{data:null,error:p}:{data:null,error:new Kr("Unexpected error in challenge",p)}}}async _verify({challengeId:t,factorId:s,webauthn:i}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!s)return{data:null,error:new Bs("rpId is required for WebAuthn authentication")};try{if(!rf())return{data:null,error:new Kr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:i},signal:o},{request:c});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:t,challengeId:h.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:i,credential_response:m.credential_response}})}catch(h){return Q(h)?{data:null,error:h}:{data:null,error:new Kr("Unexpected error in authenticate",h)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!s)return{data:null,error:new Bs("rpId is required for WebAuthn registration")};try{if(!rf())return{data:null,error:new Kr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:t});if(!h)return await this.client.mfa.listFactors().then(y=>{var w;return(w=y.data)===null||w===void 0?void 0:w.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:i},signal:o},{create:c});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return Q(h)?{data:null,error:h}:{data:null,error:new Kr("Unexpected error in register",h)}}}}_y();const zy={url:Mv,storageKey:$v,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function nf(n,t,s){return await s()}const Tn={};class Fs{get jwks(){var t,s;return(s=(t=Tn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Tn[this.storageKey]=Object.assign(Object.assign({},Tn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Tn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Tn[this.storageKey]=Object.assign(Object.assign({},Tn[this.storageKey]),{cachedAt:t})}constructor(t){var s,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},zy),t);if(this.storageKey=c.storageKey,this.instanceID=(s=Fs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Fs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Qe()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new xy({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Hf(c.fetch),this.lock=c.lock||nf,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&Qe()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=wy:this.lock=nf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Uy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:qf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ef(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=ef(this.memoryStorage)),Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(p){this._debug("#broadcastChannel","error",p)}})}c.skipAutoInitialize||this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Bf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},i="none";if(Qe()&&(s=Zv(window.location.href),this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce")),Qe()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:c}=await this._getSessionFromURL(s,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),qv(c)){const m=(t=c.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:h,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Q(s)?this._returnResult({error:s}):this._returnResult({error:new Kr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,i,o;try{const c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Lt}),{data:h,error:p}=c;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(Q(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(t){var s,i,o;try{let c;if("email"in t){const{email:y,password:w,options:x}=t;let k=null,b=null;this.flowType==="pkce"&&([k,b]=await Nn(this.storage,this.storageKey)),c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:y,password:w,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:k,code_challenge_method:b},xform:Lt})}else if("phone"in t){const{phone:y,password:w,options:x}=t;c=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(i=x==null?void 0:x.data)!==null&&i!==void 0?i:{},channel:(o=x==null?void 0:x.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Lt})}else throw new da("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return await Ye(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(t){try{let s;if("email"in t){const{email:c,password:h,options:p}=t;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Xh})}else if("phone"in t){const{phone:c,password:h,options:p}=t;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Xh})}else throw new da("You must provide either an email or phone number and a password");const{data:i,error:o}=s;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const c=new Sn;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,i,o,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,i,o,c,h,p,m,g,y,w,x;let k,b;if("message"in t)k=t.message,b=t.signature;else{const{chain:_,wallet:N,statement:L,options:O}=t;let I;if(Qe())if(typeof N=="object")I=N;else{const Ae=window;if("ethereum"in Ae&&typeof Ae.ethereum=="object"&&"request"in Ae.ethereum&&typeof Ae.ethereum.request=="function")I=Ae.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=N}const z=new URL((s=O==null?void 0:O.url)!==null&&s!==void 0?s:window.location.href),G=await I.request({method:"eth_requestAccounts"}).then(Ae=>Ae).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=Kf(G[0]);let ae=(i=O==null?void 0:O.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ae){const Ae=await I.request({method:"eth_chainId"});ae=by(Ae)}const Ee={domain:z.host,address:J,statement:L,uri:z.href,version:"1",chainId:ae,nonce:(o=O==null?void 0:O.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(c=O==null?void 0:O.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=O==null?void 0:O.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=O==null?void 0:O.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=O==null?void 0:O.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=O==null?void 0:O.signInWithEthereum)===null||y===void 0?void 0:y.resources};k=jy(Ee),b=await I.request({method:"personal_sign",params:[ky(k),J]})}try{const{data:_,error:N}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:b},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Lt});if(N)throw N;if(!_||!_.session||!_.user){const L=new Sn;return this._returnResult({data:{user:null,session:null},error:L})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:N})}catch(_){if(Q(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var s,i,o,c,h,p,m,g,y,w,x,k;let b,_;if("message"in t)b=t.message,_=t.signature;else{const{chain:N,wallet:L,statement:O,options:I}=t;let z;if(Qe())if(typeof L=="object")z=L;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))z=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=L}const G=new URL((s=I==null?void 0:I.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in z&&z.signIn){const J=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),O?{statement:O}:null));let ae;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")ae=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)ae=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ae&&"signature"in ae&&(typeof ae.signedMessage=="string"||ae.signedMessage instanceof Uint8Array)&&ae.signature instanceof Uint8Array)b=typeof ae.signedMessage=="string"?ae.signedMessage:new TextDecoder().decode(ae.signedMessage),_=ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${G.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(o=(i=I==null?void 0:I.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=I==null?void 0:I.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((h=I==null?void 0:I.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I==null?void 0:I.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((g=I==null?void 0:I.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((w=(y=I==null?void 0:I.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...I.signInWithSolana.resources.map(ae=>`- ${ae}`)]:[]].join(`
`);const J=await z.signMessage(new TextEncoder().encode(b),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=J}}try{const{data:N,error:L}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Gr(_)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(k=t.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Lt});if(L)throw L;if(!N||!N.session||!N.user){const O=new Sn;return this._returnResult({data:{user:null,session:null},error:O})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:L})}catch(N){if(Q(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const s=await Wr(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(s??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Hv;const{data:c,error:h}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Lt});if(await Ye(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const p=new Sn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:h})}catch(c){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(t){try{const{options:s,provider:i,token:o,access_token:c,nonce:h}=t,p=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Lt}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const y=new Sn;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,i,o,c,h;try{if("email"in t){const{email:p,options:m}=t;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Nn(this.storage,this.storageKey));const{error:w}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in t){const{phone:p,options:m}=t,{data:g,error:y}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y})}throw new da("You must provide either an email or phone number.")}catch(p){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(t){var s,i;try{let o,c;"options"in t&&(o=(s=t.options)===null||s===void 0?void 0:s.redirectTo,c=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:p}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Lt});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(o){if(Q(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var s,i,o,c,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Nn(this.storage,this.storageKey));const g=await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:gy});return!((c=g.data)===null||c===void 0)&&c.url&&Qe()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:i}=t;if(i)throw i;if(!s)throw new yt;const{error:o}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(Q(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:c}=t,{error:h}=await re(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:i,type:o,options:c}=t,{data:h,error:p}=await re(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new da("You must provide either an email or phone number and a type")}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Wr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Ml:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const h=await Wr(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=zl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=hy(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:jr}):await this._useSession(async s=>{var i,o,c;const{data:h,error:p}=s;if(p)throw p;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:jr})})}catch(s){if(Q(s))return $l(s)&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new yt;const h=o.session;let p=null,m=null;this.flowType==="pkce"&&t.email!=null&&([p,m]=await Nn(this.storage,this.storageKey));const{data:g,error:y}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:jr});if(y)throw y;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(i){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yt;const s=Date.now()/1e3;let i=s,o=!0,c=null;const{payload:h}=fa(t.access_token);if(h.exp&&(i=h.exp,o=i<=s),o){const{data:p,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(t.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:t.access_token,refresh_token:t.refresh_token,user:p.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(Q(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var i;if(!t){const{data:h,error:p}=s;if(p)throw p;t=(i=h.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new yt;const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!Qe())throw new ha("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ha(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Hh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ha("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Hh("No code detected.");const{data:O,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:h,expires_in:p,expires_at:m,token_type:g}=t;if(!c||!p||!h||!g)throw new ha("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(p);let x=y+w;m&&(x=parseInt(m));const k=x-y;k*1e3<=An&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${w}s`);const b=x-w;y-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,y):y-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,y);const{data:_,error:N}=await this._getUser(c);if(N)throw N;const L={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:w,expires_at:x,refresh_token:h,token_type:g,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:t.type},error:null})}catch(i){if(Q(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Wr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:o,error:c}=s;if(c&&!$l(c))return this._returnResult({error:c});const h=(i=o.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:p}=await this.admin.signOut(h,t);if(p&&!(Wv(p)&&(p.status===404||p.status===401||p.status===403)||$l(p)))return this._returnResult({error:p})}return t!=="others"&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=Xv(),i={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async s=>{var i,o;try{const{data:{session:c},error:h}=s;if(h)throw h;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,s={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Nn(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var t;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:i,error:o}=await this._useSession(async c=>{var h,p,m,g,y;const{data:w,error:x}=c;if(x)throw x;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=t.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",k,{headers:this.headers,jwt:(y=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return Qe()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Q(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var i;try{const{error:o,data:{session:c}}=s;if(o)throw o;const{options:h,provider:p,token:m,access_token:g,nonce:y}=t,w=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c==null?void 0:c.access_token)!==null&&i!==void 0?i:void 0,body:{provider:p,id_token:m,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Lt}),{data:x,error:k}=w;return k?this._returnResult({data:{user:null,session:null},error:k}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Sn}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:k}))}catch(o){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),Q(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var i,o;const{data:c,error:h}=s;if(h)throw h;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await ry(async o=>(o>0&&await ty(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Lt})),(o,c)=>{const h=200*Math.pow(2,o);return c&&Ul(c)&&Date.now()+h-i<An})}catch(i){if(this._debug(s,"error",i),Q(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",i),Qe()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Wr(this.storage,this.storageKey);if(o&&this.userStorage){let h=await Wr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await In(this.userStorage,this.storageKey+"-user",h)),o.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:zl()}else if(o&&!o.user&&!o.user){const h=await Wr(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(o.user=h.user,await Ye(this.storage,this.storageKey+"-user"),await In(this.storage,this.storageKey,o)):o.user=zl()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const c=((s=o.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ml;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${Ml}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),Ul(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(o.access_token);!p&&(h!=null&&h.user)?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var s,i;if(!t)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ra;const{data:c,error:h}=await this._refreshAccessToken(t);if(h)throw h;if(!c.session)throw new yt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(o,"error",c),Q(c)){const h={data:null,error:c};return Ul(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,s,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(t,s)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ye(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await In(this.userStorage,this.storageKey+"-user",{user:s.user});const o=Object.assign({},s);delete o.user;const c=Yh(o);await In(this.storage,this.storageKey,c)}else{const o=Yh(s);await In(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ye(this.storage,this.storageKey),await Ye(this.storage,this.storageKey+"-code-verifier"),await Ye(this.storage,this.storageKey+"-user"),this.userStorage&&await Ye(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),An);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/An);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${An}ms, refresh threshold is ${nu} ticks`),o<=nu&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Vf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,i){const o=[`provider=${encodeURIComponent(s)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,h]=await Nn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(p.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var i;const{data:o,error:c}=s;return c?this._returnResult({data:null,error:c}):await re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var i,o;const{data:c,error:h}=s;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:g}=await re(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var i;const{data:o,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Ry(t.webauthn.credential_response):Oy(t.webauthn.credential_response)})}:{code:t.code}),{data:p,error:m}=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var i;const{data:o,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Ty(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Py(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(t=s==null?void 0:s.factors)!==null&&t!==void 0?t:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(t){var s,i,o,c;if(t)try{const{payload:k}=fa(t);let b=null;k.aal&&(b=k.aal);let _=b;const{data:{user:N},error:L}=await this.getUser(t);if(L)return this._returnResult({data:null,error:L});((i=(s=N==null?void 0:N.factors)===null||s===void 0?void 0:s.filter(z=>z.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(_="aal2");const I=k.amr||[];return{data:{currentLevel:b,nextLevel:_,currentAuthenticationMethods:I},error:null}}catch(k){if(Q(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:h},error:p}=await this.getSession();if(p)return this._returnResult({data:null,error:p});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=fa(h.access_token);let g=null;m.aal&&(g=m.aal);let y=g;((c=(o=h.user.factors)===null||o===void 0?void 0:o.filter(k=>k.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(y="aal2");const x=m.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;return o?this._returnResult({data:null,error:o}):i?await re(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new yt})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new yt});const h=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Qe()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(i){if(Q(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,s){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new yt});const h=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Qe()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(i){if(Q(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:i}=t;return i?this._returnResult({data:null,error:i}):s?await re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new yt})})}catch(t){if(Q(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;return o?this._returnResult({data:null,error:o}):i?(await re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yt})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let i=s.keys.find(p=>p.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(p=>p.kid===t),i&&this.jwks_cached_at+Bv>o)return i;const{data:c,error:h}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,i=c.keys.find(p=>p.kid===t),!i)?null:i}async getClaims(t,s={}){try{let i=t;if(!i){const{data:k,error:b}=await this.getSession();if(b||!k.session)return this._returnResult({data:null,error:b});i=k.session.access_token}const{header:o,payload:c,signature:h,raw:{header:p,payload:m}}=fa(i);s!=null&&s.allowExpired||uy(c.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!g){const{error:k}=await this.getUser(i);if(k)throw k;return{data:{claims:c,header:o,signature:h},error:null}}const y=cy(o.alg),w=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,h,Yv(`${p}.${m}`)))throw new au("Invalid JWT signature");return{data:{claims:c,header:o,signature:h},error:null}}catch(i){if(Q(i))return this._returnResult({data:null,error:i});throw i}}}Fs.nextInstanceID={};const By=Fs,Fy="2.97.0";let Os="";typeof Deno<"u"?Os="deno":typeof document<"u"?Os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Os="react-native":Os="node";const Wy={"X-Client-Info":`supabase-js-${Os}/${Fy}`},qy={headers:Wy},Hy={schema:"public"},Vy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ky={};function Ws(n){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(n)}function Gy(n,t){if(Ws(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,t);if(Ws(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Jy(n){var t=Gy(n,"string");return Ws(t)=="symbol"?t:t+""}function Yy(n,t,s){return(t=Jy(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function sf(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),s.push.apply(s,i)}return s}function Oe(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?sf(Object(s),!0).forEach(function(i){Yy(n,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):sf(Object(s)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(s,i))})}return n}const Qy=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Xy=()=>Headers,Zy=(n,t,s)=>{const i=Qy(s),o=Xy();return async(c,h)=>{var p;const m=(p=await t())!==null&&p!==void 0?p:n;let g=new o(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),i(c,Oe(Oe({},h),{},{headers:g}))}};function ex(n){return n.endsWith("/")?n:n+"/"}function tx(n,t){var s,i;const{db:o,auth:c,realtime:h,global:p}=n,{db:m,auth:g,realtime:y,global:w}=t,x={db:Oe(Oe({},m),o),auth:Oe(Oe({},g),c),realtime:Oe(Oe({},y),h),storage:{},global:Oe(Oe(Oe({},w),p),{},{headers:Oe(Oe({},(s=w==null?void 0:w.headers)!==null&&s!==void 0?s:{}),(i=p==null?void 0:p.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?x.accessToken=n.accessToken:delete x.accessToken,x}function rx(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ex(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var nx=class extends By{constructor(n){super(n)}},sx=class{constructor(n,t,s){var i,o;this.supabaseUrl=n,this.supabaseKey=t;const c=rx(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:Hy,realtime:Ky,auth:Oe(Oe({},Vy),{},{storageKey:h}),global:qy},m=tx(s??{},p);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=Zy(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Oe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Wg(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new Dv(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Lg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,s)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,s;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(t=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:c,flowType:h,lock:p,debug:m,throwOnError:g},y,w){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nx({url:this.authUrl.href,headers:Oe(Oe({},x),y),storageKey:c,autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:i,userStorage:o,flowType:h,lock:p,debug:m,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new av(this.realtimeUrl.href,Oe(Oe({},n),{},{params:Oe(Oe({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(n,t,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ix=(n,t,s)=>new sx(n,t,s);function ax(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}ax()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ox=void 0,lx=void 0;throw new Error("Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY environment variables");const Ne=ix(ox,lx,{auth:{persistSession:!0,autoRefreshToken:!0}}),Jf=T.createContext(null),Fl="folloagency.com";function ux({children:n}){const[t,s]=T.useState(null),[i,o]=T.useState(null),[c,h]=T.useState(!0),p=T.useCallback(w=>{const x=w.user.user_metadata??{};return{id:w.user.id,email:w.user.email??"",full_name:x.full_name||x.name||void 0,avatar_url:x.avatar_url||void 0}},[]),m=T.useCallback(async w=>{if(!w){s(null),o(null);return}if(!(w.user.email??"").endsWith(`@${Fl}`)){await Ne.auth.signOut(),s(null),o(null),alert(`Access restricted to @${Fl} accounts. Please sign in with your Follo email.`);return}s(w),o(p(w))},[p]);T.useEffect(()=>{Ne.auth.getSession().then(({data:{session:x}})=>{m(x).finally(()=>h(!1))});const{data:{subscription:w}}=Ne.auth.onAuthStateChange((x,k)=>{m(k)});return()=>w.unsubscribe()},[m]);const g=async()=>{await Ne.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`,queryParams:{hd:Fl}}})},y=async()=>{await Ne.auth.signOut()};return u.jsx(Jf.Provider,{value:{session:t,user:i,loading:c,signInWithGoogle:g,signOut:y},children:n})}function Fn(){const n=T.useContext(Jf);if(!n)throw new Error("useAuth must be used inside AuthProvider");return n}function cx(){const{session:n,loading:t,signInWithGoogle:s}=Fn();return t?null:n?u.jsx(Kl,{to:"/",replace:!0}):u.jsx("div",{className:"min-h-screen bg-navy-950 flex items-center justify-center px-4",children:u.jsx("div",{className:"w-full max-w-sm",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-500 flex items-center justify-center mb-4",children:u.jsx("span",{className:"text-white font-bold text-xl",children:"F"})}),u.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Follo AI Platform"}),u.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Marketplace Intelligence"})]}),u.jsxs("p",{className:"text-sm text-slate-600 text-center mb-6",children:["Sign in with your"," ",u.jsx("span",{className:"font-medium text-slate-900",children:"@folloagency.com"})," ","Google account to continue."]}),u.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 text-slate-700 text-sm font-medium transition-colors shadow-sm",children:[u.jsx(dx,{}),"Continue with Google"]}),u.jsx("p",{className:"text-xs text-slate-400 text-center mt-6",children:"Access restricted to Follo team members."})]})})})}function dx(){return u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:[u.jsx("path",{d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4"}),u.jsx("path",{d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z",fill:"#34A853"}),u.jsx("path",{d:"M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05"}),u.jsx("path",{d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z",fill:"#EA4335"})]})}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yf=(...n)=>n.filter((t,s,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=T.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:h,...p},m)=>T.createElement("svg",{ref:m,...fx,width:t,height:t,stroke:n,strokeWidth:i?Number(s)*24/Number(t):s,className:Yf("lucide",o),...p},[...h.map(([g,y])=>T.createElement(g,y)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(n,t)=>{const s=T.forwardRef(({className:i,...o},c)=>T.createElement(px,{ref:c,iconNode:t,className:Yf(`lucide-${hx(n)}`,i),...o}));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=ie("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ie("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=ie("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=ie("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ie("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=ie("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function ap(n){var t,s,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(t=0;t<o;t++)n[t]&&(s=ap(n[t]))&&(i&&(i+=" "),i+=s)}else for(s in n)n[s]&&(i&&(i+=" "),i+=s);return i}function se(){for(var n,t,s=0,i="",o=arguments.length;s<o;s++)(n=arguments[s])&&(t=ap(n))&&(i&&(i+=" "),i+=t);return i}function $x({children:n}){const{user:t,signOut:s}=Fn(),i=Cr(),[o,c]=T.useState([]),[h,p]=T.useState(()=>i.pathname.includes("/bol"));T.useEffect(()=>{fetch("/api/bol-customers").then(g=>g.ok?g.json():{customers:[]}).then(g=>{c((g.customers??[]).filter(y=>y.client_id))}).catch(()=>{})},[]),T.useEffect(()=>{i.pathname.includes("/bol")&&p(!0)},[i.pathname]);const m=i.pathname.includes("/bol");return u.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50",children:[u.jsxs("aside",{className:"w-56 flex-shrink-0 bg-navy-950 flex flex-col text-white",children:[u.jsx("div",{className:"px-5 py-5 border-b border-navy-800",children:u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-7 h-7 rounded-md bg-brand-500 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-xs",children:"F"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-white leading-tight",children:"Follo AI"}),u.jsx("p",{className:"text-[10px] text-navy-300 leading-tight",children:"Marketplace Platform"})]})]})}),u.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-0.5 overflow-y-auto",children:[u.jsxs(Nt,{to:"/",className:se("flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors",i.pathname==="/"?"bg-brand-600 text-white":"text-navy-200 hover:bg-navy-800 hover:text-white"),children:[u.jsx(Cx,{size:15}),"Clients"]}),o.length>0&&u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>p(g=>!g),className:se("flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors w-full",m?"text-orange-300":"text-navy-200 hover:bg-navy-800 hover:text-white"),children:[u.jsx("div",{className:"w-3.5 h-3.5 bg-orange-500 rounded-sm flex-shrink-0"}),u.jsx("span",{className:"flex-1 text-left",children:"Bol.com"}),u.jsx(Qf,{size:12,className:se("transition-transform duration-150",h&&"rotate-180")})]}),h&&u.jsx("div",{className:"mt-0.5 ml-2 space-y-0.5",children:o.map(g=>u.jsxs(Nt,{to:`/clients/${g.client_id}/bol`,className:se("flex items-center gap-2 pl-5 pr-3 py-1.5 rounded-md text-xs transition-colors",i.pathname===`/clients/${g.client_id}/bol`?"bg-orange-500/20 text-orange-300 font-medium":"text-navy-300 hover:bg-navy-800 hover:text-white"),children:[u.jsx(Yr,{size:11,className:"flex-shrink-0 opacity-60"}),g.seller_name]},g.id))})]}),u.jsxs(Nt,{to:"/settings",className:se("flex items-center gap-2.5 px-3 py-2 rounded-md text-sm transition-colors",i.pathname==="/settings"?"bg-brand-600 text-white":"text-navy-200 hover:bg-navy-800 hover:text-white"),children:[u.jsx(Ax,{size:15}),"Settings"]})]}),u.jsxs("div",{className:"px-3 py-4 border-t border-navy-800",children:[t&&u.jsxs("div",{className:"flex items-center gap-2.5 mb-3 px-2",children:[t.avatar_url?u.jsx("img",{src:t.avatar_url,alt:t.full_name??t.email,className:"w-7 h-7 rounded-full object-cover"}):u.jsx("div",{className:"w-7 h-7 rounded-full bg-brand-600 flex items-center justify-center text-xs font-medium text-white",children:(t.full_name??t.email)[0].toUpperCase()}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-xs font-medium text-white truncate",children:t.full_name??t.email.split("@")[0]}),u.jsx("p",{className:"text-[10px] text-navy-400 truncate",children:t.email})]})]}),u.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-md text-sm text-navy-300 hover:text-white hover:bg-navy-800 transition-colors",children:[u.jsx(Px,{size:14}),"Sign out"]})]})]}),u.jsxs("main",{className:"flex-1 overflow-hidden flex flex-col",children:[u.jsx(Ux,{}),u.jsx("div",{className:"flex-1 overflow-auto",children:n})]})]})}function Ux(){const t=Cr().pathname.split("/").filter(Boolean);if(t.length===0)return null;const s=[{label:"Clients",to:"/"}];return t[0]==="clients"&&t[1]&&(s.push({label:"Client Detail"}),t[2]==="history"&&(s[s.length-1].to=`/clients/${t[1]}`,s.push({label:"Conversation History"}))),u.jsx("div",{className:"h-10 border-b border-slate-200 bg-white flex items-center px-6 gap-1 flex-shrink-0",children:s.map((i,o)=>u.jsxs(uu.Fragment,{children:[o>0&&u.jsx(xu,{size:13,className:"text-slate-400"}),i.to?u.jsx(Nt,{to:i.to,className:"text-xs text-slate-500 hover:text-slate-900 transition-colors",children:i.label}):u.jsx("span",{className:"text-xs text-slate-900 font-medium",children:i.label})]},o))})}function zx({client:n}){const t=n.name.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase();return u.jsxs(Nt,{to:`/clients/${n.id}`,className:"bg-white rounded-xl border border-slate-200 p-5 flex flex-col gap-4 hover:border-brand-400 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"flex-shrink-0",children:n.logo_url?u.jsx("img",{src:n.logo_url,alt:n.name,className:"w-10 h-10 rounded-lg object-contain bg-slate-50 border border-slate-100"}):u.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-50 border border-brand-100 flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-brand-600",children:t})})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h3",{className:"font-semibold text-slate-900 text-sm group-hover:text-brand-600 transition-colors truncate",children:n.name}),u.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Added ",new Date(n.created_at).toLocaleDateString("en-GB",{month:"short",year:"numeric"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(of,{icon:u.jsx(jx,{size:12}),value:n.market_count??0,label:"market"}),u.jsx(of,{icon:u.jsx(wx,{size:12}),value:n.pending_proposals??0,label:"pending",highlight:(n.pending_proposals??0)>0})]}),n.last_summary&&u.jsxs("div",{className:"flex items-start gap-2 pt-2 border-t border-slate-100",children:[u.jsx(ba,{size:12,className:"text-slate-400 mt-0.5 flex-shrink-0"}),u.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 leading-relaxed",children:n.last_summary})]})]})}function of({icon:n,value:t,label:s,highlight:i=!1}){return u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:se("text-slate-400",i&&t>0&&"text-amber-500"),children:n}),u.jsxs("span",{className:se("text-xs font-medium",i&&t>0?"text-amber-600":"text-slate-600"),children:[t," ",s,t!==1?"s":""]})]})}function Bx(n){const t=n.split(`
`),s=[];let i=0,o=0;for(;i<t.length;){const c=t[i];if(i+1<t.length&&t[i+1].match(/^\|[\s\-|]+\|$/)){const h=[];for(;i<t.length&&t[i].startsWith("|");)h.push(t[i]),i++;s.push(u.jsx(Fx,{lines:h},o++));continue}if(c.startsWith("```")){const h=[];for(i++;i<t.length&&!t[i].startsWith("```");)h.push(t[i]),i++;i++,s.push(u.jsx("pre",{className:"bg-slate-100 p-3 rounded text-xs font-mono overflow-x-auto my-2 whitespace-pre-wrap",children:h.join(`
`)},o++));continue}if(c.startsWith("### ")){s.push(u.jsx("h3",{className:"font-semibold text-slate-900 text-sm mt-3 mb-1 first:mt-0",children:Pn(c.slice(4))},o++)),i++;continue}if(c.startsWith("## ")){s.push(u.jsx("h2",{className:"font-semibold text-slate-900 text-sm mt-3 mb-1 first:mt-0",children:Pn(c.slice(3))},o++)),i++;continue}if(c.startsWith("# ")){s.push(u.jsx("h1",{className:"font-semibold text-slate-900 text-base mt-3 mb-1 first:mt-0",children:Pn(c.slice(2))},o++)),i++;continue}if(c.match(/^[\-\*] /)){const h=[];for(;i<t.length&&t[i].match(/^[\-\*] /);)h.push(u.jsx("li",{children:Pn(t[i].slice(2))},i)),i++;s.push(u.jsx("ul",{className:"list-disc pl-4 my-1.5 space-y-0.5 text-sm",children:h},o++));continue}if(c.match(/^\d+\. /)){const h=[];for(;i<t.length&&t[i].match(/^\d+\. /);)h.push(u.jsx("li",{children:Pn(t[i].replace(/^\d+\. /,""))},i)),i++;s.push(u.jsx("ol",{className:"list-decimal pl-4 my-1.5 space-y-0.5 text-sm",children:h},o++));continue}if(c.trim()===""){i++;continue}s.push(u.jsx("p",{className:"text-sm leading-relaxed mb-1.5 last:mb-0",children:Pn(c)},o++)),i++}return s}function Pn(n){return n.split(/(\*\*[^*]+\*\*|`[^`]+`)/g).map((s,i)=>s.startsWith("**")&&s.endsWith("**")?u.jsx("strong",{className:"font-semibold",children:s.slice(2,-2)},i):s.startsWith("`")&&s.endsWith("`")?u.jsx("code",{className:"bg-slate-100 text-slate-800 px-1 py-0.5 rounded text-xs font-mono",children:s.slice(1,-1)},i):s)}function Fx({lines:n}){const t=n.map(o=>o.split("|").filter((c,h,p)=>h>0&&h<p.length-1).map(c=>c.trim())),[s,,...i]=t;return u.jsx("div",{className:"my-2 overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse text-xs",children:[u.jsx("thead",{children:u.jsx("tr",{children:s==null?void 0:s.map((o,c)=>u.jsx("th",{className:"bg-slate-100 text-left px-3 py-1.5 font-semibold text-slate-700 border border-slate-200",children:o},c))})}),u.jsx("tbody",{children:i.map((o,c)=>u.jsx("tr",{className:"even:bg-slate-50",children:o.map((h,p)=>u.jsx("td",{className:"px-3 py-1.5 border border-slate-200",children:h},p))},c))})]})})}function op({message:n}){return n.role==="user"?u.jsx("div",{className:"flex justify-end",children:u.jsx("div",{className:"max-w-[75%] bg-brand-500 text-white rounded-2xl rounded-tr-sm px-4 py-2.5",children:u.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:n.content})})}):u.jsx("div",{className:"flex justify-start",children:u.jsx("div",{className:"max-w-[85%] bg-white border border-slate-200 rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm",children:n.isStreaming?u.jsxs("div",{className:"flex items-center gap-1 py-1",children:[u.jsx("span",{className:"typing-dot"}),u.jsx("span",{className:"typing-dot"}),u.jsx("span",{className:"typing-dot"})]}):u.jsx("div",{className:"text-slate-800",children:Bx(n.content)})})})}const lp="/api";async function _u(n,t){const s=await fetch(`${lp}${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const i=await s.json().catch(()=>({error:s.statusText}));throw new Error(i.error||`HTTP ${s.status}`)}return s.json()}async function Wx(n,t){const s=await fetch(`${lp}${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const i=await s.json().catch(()=>({error:s.statusText}));throw new Error(i.error||`HTTP ${s.status}`)}return s.json()}function qx(n){return _u("/chat",{conversationId:n.conversationId,clientId:n.clientId,marketId:n.marketId,messages:n.messages,clientContext:{clientName:n.clientContext.clientName,countryCode:n.clientContext.country_code,roasTarget:n.clientContext.roas_target,dailyBudgetCap:n.clientContext.daily_budget_cap,currency:n.clientContext.currency,amazonAdvertiserProfileId:n.clientContext.amazon_advertiser_profile_id,amazonAdvertiserAccountId:n.clientContext.amazon_advertiser_account_id},memory:n.memory,previousSummary:n.previousSummary})}function Hx(n){return _u("/chat",{conversationId:"__global__",clientId:"__global__",marketId:"__global__",messages:n.messages,clientContext:{clientName:"Global",countryCode:"",roasTarget:null,dailyBudgetCap:null,currency:"",amazonAdvertiserProfileId:"",amazonAdvertiserAccountId:""},memory:[],previousSummary:null})}function Vx(n){return _u("/conversation-summary",n)}function Kx(n){return Wx("/proposal",n)}const Gx=["Which client has the highest ROAS this week?","Compare NL campaigns across all clients","Show underperforming campaigns portfolio-wide"];function Jx({data:n,onCreated:t}){const[s,i]=T.useState(n.clientName),[o,c]=T.useState(n.markets),[h,p]=T.useState(!1),[m,g]=T.useState(null),y=x=>{c(k=>k.map((b,_)=>_===x?{...b,selected:!b.selected}:b))},w=async()=>{const x=o.filter(k=>k.selected);if(!(!s.trim()||x.length===0)){p(!0);try{const{data:k,error:b}=await Ne.from("clients").insert({name:s.trim()}).select().single();if(b)throw b;const _=x.map(L=>({client_id:k.id,country_code:L.country_code.toUpperCase(),amazon_advertiser_profile_id:L.profile_id,amazon_advertiser_account_id:n.accountId??"",currency:L.currency,state:"active",roas_target:null,daily_budget_cap:null})),{error:N}=await Ne.from("client_markets").insert(_);if(N)throw N;g(k.id),t(k.id,k.name)}catch(k){alert(k instanceof Error?k.message:"Failed to create client")}finally{p(!1)}}};return m?u.jsxs("div",{className:"border border-green-200 bg-green-50 rounded-xl p-4 mt-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[u.jsx(vx,{size:15}),u.jsx("span",{className:"text-sm font-medium",children:"Client created!"})]}),u.jsxs("button",{onClick:()=>t(m,s),className:"mt-2 flex items-center gap-1 text-xs text-brand-600 hover:text-brand-700 font-medium",children:["Open ",s," ",u.jsx(xu,{size:13})]})]}):u.jsxs("div",{className:"border border-brand-200 bg-brand-50 rounded-xl p-4 mt-2",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-100 flex items-center justify-center",children:u.jsx($n,{size:12,className:"text-brand-600"})}),u.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Quick Add Client"})]}),u.jsxs("div",{className:"mb-3",children:[u.jsx("label",{className:"block text-[10px] font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Client name"}),u.jsx("input",{type:"text",value:s,onChange:x=>i(x.target.value),className:"w-full px-2.5 py-1.5 text-sm border border-slate-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-brand-400"})]}),u.jsxs("div",{className:"mb-3",children:[u.jsxs("label",{className:"block text-[10px] font-medium text-slate-500 uppercase tracking-wide mb-1.5",children:["Markets (",o.filter(x=>x.selected).length,"/",o.length," selected)"]}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto pr-1",children:o.map((x,k)=>u.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-white cursor-pointer group",children:[u.jsx("input",{type:"checkbox",checked:x.selected,onChange:()=>y(k),className:"rounded border-slate-300 text-brand-500 focus:ring-brand-400"}),u.jsxs("span",{className:"text-xs font-medium text-slate-700 w-7",children:[Yx(x.country_code)," ",x.country_code]}),u.jsx("span",{className:"text-[10px] text-slate-400 font-mono truncate flex-1",children:x.profile_id}),u.jsx("span",{className:"text-[10px] text-slate-400",children:x.currency})]},k))})]}),u.jsx("button",{onClick:w,disabled:h||!s.trim()||o.filter(x=>x.selected).length===0,className:"w-full py-2 text-sm font-medium bg-brand-500 hover:bg-brand-600 text-white rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-1.5",children:h?u.jsxs(u.Fragment,{children:[u.jsx(Oa,{size:13,className:"animate-spin"})," Creating"]}):u.jsxs(u.Fragment,{children:[u.jsx($n,{size:13})," Create Client"]})})]})}function Yx(n){return String.fromCodePoint(n.toUpperCase().charCodeAt(0)+127397,n.toUpperCase().charCodeAt(1)+127397)}function Qx({onClose:n}){const t=Ea(),[s,i]=T.useState([]),[o,c]=T.useState(""),[h,p]=T.useState(!1),[m,g]=T.useState(null),y=T.useRef(null),w=T.useRef(null);T.useEffect(()=>{var _;(_=y.current)==null||_.scrollIntoView({behavior:"smooth"})},[s,m]);const x=async _=>{var I;const N=(_??o).trim();if(!N||h)return;const L={role:"user",content:N},O=[...s,L];i([...O,{role:"assistant",content:"",isStreaming:!0}]),g(null),c(""),p(!0),w.current&&(w.current.style.height="auto");try{const z=await Hx({messages:O});i([...O,{role:"assistant",content:z.content||"*(No response)*"}]);const G=(I=z.toolCalls)==null?void 0:I.find(J=>J.name==="suggest_client_setup");if(G){const J=G.input;g({clientName:J.clientName,accountId:J.accountId,markets:J.markets.map(ae=>({...ae,selected:!0}))})}}catch(z){i([...O,{role:"assistant",content:`Error: ${z instanceof Error?z.message:"Something went wrong"}`}])}finally{p(!1)}},k=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),x())},b=_=>{n(),t(`/clients/${_}`)};return u.jsxs("div",{className:"fixed inset-y-0 right-0 w-[480px] bg-white border-l border-slate-200 shadow-2xl z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-7 h-7 rounded-full bg-brand-50 flex items-center justify-center",children:u.jsx(af,{size:14,className:"text-brand-500"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"General Chat"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:"All clients  Amazon Ads"})]})]}),u.jsx("button",{onClick:n,className:"p-1.5 rounded-md hover:bg-slate-100 text-slate-400 hover:text-slate-700 transition-colors",children:u.jsx(ip,{size:16})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-3",children:[s.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-8",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-50 flex items-center justify-center mb-3",children:u.jsx(af,{size:22,className:"text-brand-400"})}),u.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Ask about any client"}),u.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-[280px] leading-relaxed",children:"Query campaigns, compare performance, or spot opportunities across the full portfolio."}),u.jsx("div",{className:"mt-5 flex flex-col gap-2 w-full max-w-xs",children:Gx.map(_=>u.jsx("button",{onClick:()=>x(_),className:"text-left text-xs text-brand-600 bg-brand-50 hover:bg-brand-100 px-3 py-2 rounded-lg transition-colors leading-snug",children:_},_))})]}):u.jsxs(u.Fragment,{children:[s.map((_,N)=>u.jsx(op,{message:_},N)),m&&u.jsx(Jx,{data:m,onCreated:b})]}),u.jsx("div",{ref:y})]}),u.jsxs("div",{className:"border-t border-slate-100 px-4 py-3 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("textarea",{ref:w,value:o,onChange:_=>{c(_.target.value),_.target.style.height="auto",_.target.style.height=`${Math.min(_.target.scrollHeight,120)}px`},onKeyDown:k,placeholder:"Ask about any client or campaign",className:"flex-1 resize-none px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent min-h-[40px] max-h-[120px] leading-relaxed",rows:1,disabled:h}),u.jsx("button",{onClick:()=>x(),disabled:!o.trim()||h,className:"flex-shrink-0 w-9 h-9 flex items-center justify-center bg-brand-500 hover:bg-brand-600 text-white rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:h?u.jsx(Oa,{size:14,className:"animate-spin"}):u.jsx(rp,{size:14})})]}),u.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5",children:"Enter to send  Shift+Enter for new line"})]})]})}function Xx(){const[n,t]=T.useState([]),[s,i]=T.useState(!0),[o,c]=T.useState(null),h=T.useCallback(async()=>{i(!0),c(null);try{const{data:p,error:m}=await Ne.from("clients").select(`
          *,
          client_markets(count),
          optimization_proposals(count),
          conversations(summary, updated_at)
        `).order("name");if(m)throw m;const g=(p??[]).map(y=>{var _,N,L;const w=y.client_markets,x=y.optimization_proposals,b=(y.conversations??[]).filter(O=>O.summary).sort((O,I)=>new Date(I.updated_at).getTime()-new Date(O.updated_at).getTime());return{id:y.id,name:y.name,logo_url:y.logo_url,created_at:y.created_at,market_count:((_=w==null?void 0:w[0])==null?void 0:_.count)??0,pending_proposals:((N=x==null?void 0:x[0])==null?void 0:N.count)??0,last_summary:((L=b[0])==null?void 0:L.summary)??null}});t(g)}catch(p){c(p instanceof Error?p.message:"Failed to load clients")}finally{i(!1)}},[]);return T.useEffect(()=>{h()},[h]),{clients:n,loading:s,error:o,refetch:h}}const up=[{code:"NL",currency:"EUR"},{code:"DE",currency:"EUR"},{code:"FR",currency:"EUR"},{code:"IT",currency:"EUR"},{code:"ES",currency:"EUR"},{code:"BE",currency:"EUR"},{code:"GB",currency:"GBP"},{code:"SE",currency:"SEK"},{code:"PL",currency:"PLN"},{code:"TR",currency:"TRY"},{code:"AE",currency:"AED"},{code:"SA",currency:"SAR"},{code:"EG",currency:"EGP"},{code:"IN",currency:"INR"},{code:"JP",currency:"JPY"},{code:"AU",currency:"AUD"},{code:"CA",currency:"CAD"},{code:"MX",currency:"MXN"},{code:"US",currency:"USD"}],Zx=n=>{var t;return((t=up.find(s=>s.code===n))==null?void 0:t.currency)??"EUR"};function ew(n){return String.fromCodePoint(n.toUpperCase().charCodeAt(0)+127397,n.toUpperCase().charCodeAt(1)+127397)}const lf=()=>({_key:crypto.randomUUID(),country_code:"NL",amazon_advertiser_profile_id:"",amazon_advertiser_account_id:"",roas_target:"",daily_budget_cap:"",currency:"EUR"});function tw(){const{clients:n,loading:t,error:s,refetch:i}=Xx(),[o,c]=T.useState(""),[h,p]=T.useState(!1),[m,g]=T.useState(!1),y=n.filter(w=>w.name.toLowerCase().includes(o.toLowerCase()));return u.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Clients"}),u.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:[n.length," client",n.length!==1?"s":""," managed"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1.5 px-3.5 py-2 border border-slate-200 hover:border-brand-400 hover:bg-brand-50 text-slate-600 hover:text-brand-600 text-sm font-medium rounded-lg transition-colors",children:[u.jsx(ba,{size:15}),"General Chat"]}),u.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-1.5 px-3.5 py-2 bg-brand-500 hover:bg-brand-600 text-white text-sm font-medium rounded-lg transition-colors",children:[u.jsx($n,{size:15}),"Add Client"]})]})]}),u.jsxs("div",{className:"relative mb-6 max-w-xs",children:[u.jsx(tp,{size:15,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),u.jsx("input",{type:"text",placeholder:"Search clients",value:o,onChange:w=>c(w.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-slate-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent"})]}),t?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:6}).map((w,x)=>u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 h-36 animate-pulse",children:[u.jsxs("div",{className:"flex gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-3 bg-slate-100 rounded w-2/3"}),u.jsx("div",{className:"h-2 bg-slate-100 rounded w-1/3"})]})]}),u.jsx("div",{className:"h-2 bg-slate-100 rounded w-1/2"})]},x))}):s?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("p",{className:"text-slate-500 text-sm",children:s}),u.jsx("button",{onClick:i,className:"mt-3 text-sm text-brand-500 hover:underline",children:"Try again"})]}):y.length===0?u.jsx("div",{className:"text-center py-16",children:u.jsx("p",{className:"text-slate-500 text-sm",children:o?`No clients matching "${o}"`:"No clients yet. Add your first client."})}):u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:y.map(w=>u.jsx(zx,{client:w},w.id))}),h&&u.jsx(rw,{onClose:()=>p(!1),onCreated:()=>{p(!1),i()}}),m&&u.jsx(Qx,{onClose:()=>g(!1)})]})}function rw({onClose:n,onCreated:t}){const[s,i]=T.useState(""),[o,c]=T.useState(""),[h,p]=T.useState([lf()]),[m,g]=T.useState(!1),y=()=>p(b=>[...b,lf()]),w=b=>p(_=>_.filter(N=>N._key!==b)),x=(b,_,N)=>p(L=>L.map(O=>{if(O._key!==b)return O;const I={...O,[_]:N};return _==="country_code"&&(I.currency=Zx(N)),I})),k=async b=>{if(b.preventDefault(),!!s.trim()){g(!0);try{const{data:_,error:N}=await Ne.from("clients").insert({name:s.trim(),logo_url:o.trim()||null}).select().single();if(N)throw N;const L=h.filter(O=>O.amazon_advertiser_profile_id.trim());if(L.length>0){const{error:O}=await Ne.from("client_markets").insert(L.map(I=>({client_id:_.id,country_code:I.country_code.toUpperCase(),amazon_advertiser_profile_id:I.amazon_advertiser_profile_id.trim(),amazon_advertiser_account_id:I.amazon_advertiser_account_id.trim(),roas_target:I.roas_target?parseFloat(I.roas_target):null,daily_budget_cap:I.daily_budget_cap?parseFloat(I.daily_budget_cap):null,currency:I.currency,state:"active"})));if(O)throw O}t()}catch(_){alert(_ instanceof Error?_.message:"Failed to create client")}finally{g(!1)}}};return u.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-start justify-center z-50 p-4 overflow-y-auto",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl my-8",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-slate-100",children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Add New Client"}),u.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Fill in client details and add one or more markets in one go."})]}),u.jsxs("form",{onSubmit:k,children:[u.jsxs("div",{className:"px-6 py-5 space-y-5",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Client Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",value:s,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400",placeholder:"e.g. Bloomique",required:!0,autoFocus:!0})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Logo URL ",u.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),u.jsx("input",{type:"url",value:o,onChange:b=>c(b.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400",placeholder:"https://"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Markets"}),u.jsx("p",{className:"text-[11px] text-slate-400 mt-0.5",children:"Add one or more country markets. Profile ID is required per market."})]}),u.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 text-xs text-brand-600 hover:text-brand-700 font-medium transition-colors",children:[u.jsx($n,{size:13})," Add country"]})]}),u.jsx("div",{className:"space-y-3",children:h.map(b=>u.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 relative",children:[h.length>1&&u.jsx("button",{type:"button",onClick:()=>w(b._key),className:"absolute top-3 right-3 p-1 rounded hover:bg-slate-200 text-slate-400 hover:text-red-500 transition-colors",children:u.jsx(np,{size:13})}),u.jsxs("div",{className:"grid grid-cols-[120px_1fr_1fr] gap-3 mb-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] font-medium text-slate-600 mb-1",children:"Country"}),u.jsx("select",{value:b.country_code,onChange:_=>x(b._key,"country_code",_.target.value),className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-brand-400",children:up.map(_=>u.jsxs("option",{value:_.code,children:[ew(_.code)," ",_.code]},_.code))})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[11px] font-medium text-slate-600 mb-1",children:["Advertiser Profile ID ",u.jsx("span",{className:"text-red-400",children:"*"})]}),u.jsx("input",{type:"text",value:b.amazon_advertiser_profile_id,onChange:_=>x(b._key,"amazon_advertiser_profile_id",_.target.value),placeholder:"amzn1.ads-account",className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-400"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] font-medium text-slate-600 mb-1",children:"Advertiser Account ID"}),u.jsx("input",{type:"text",value:b.amazon_advertiser_account_id,onChange:_=>x(b._key,"amazon_advertiser_account_id",_.target.value),placeholder:"ENTITY",className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-400"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] font-medium text-slate-600 mb-1",children:"Currency"}),u.jsx("input",{type:"text",value:b.currency,onChange:_=>x(b._key,"currency",_.target.value.toUpperCase()),maxLength:3,className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-400"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] font-medium text-slate-600 mb-1",children:"Daily Budget Cap"}),u.jsx("input",{type:"number",value:b.daily_budget_cap,onChange:_=>x(b._key,"daily_budget_cap",_.target.value),placeholder:"500",min:"0",className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-400"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] font-medium text-slate-600 mb-1",children:"ROAS Target (x)"}),u.jsx("input",{type:"number",value:b.roas_target,onChange:_=>x(b._key,"roas_target",_.target.value),placeholder:"4.0",min:"0",step:"0.1",className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-400"})]})]})]},b._key))})]})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-slate-100 flex justify-between items-center",children:[u.jsx("p",{className:"text-[11px] text-slate-400",children:"Markets without a Profile ID will be skipped."}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm text-slate-600 hover:text-slate-900 transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:m||!s.trim(),className:"px-4 py-2 text-sm bg-brand-500 hover:bg-brand-600 text-white rounded-lg font-medium disabled:opacity-50 transition-colors",children:m?"Creating":"Create Client"})]})]})]})]})})}function cp(n){const[t,s]=T.useState(null),[i,o]=T.useState([]),[c,h]=T.useState([]),[p,m]=T.useState([]),[g,y]=T.useState([]),[w,x]=T.useState(!0),[k,b]=T.useState(null),_=T.useCallback(async()=>{x(!0),b(null);try{const[O,I,z,G,J]=await Promise.all([Ne.from("clients").select("*").eq("id",n).single(),Ne.from("client_markets").select("*").eq("client_id",n).order("country_code"),Ne.from("agent_memory").select("*").eq("client_id",n).eq("is_active",!0).order("created_at",{ascending:!1}),Ne.from("conversations").select("*").eq("client_id",n).order("updated_at",{ascending:!1}).limit(20),Ne.from("optimization_proposals").select("*").eq("client_id",n).order("created_at",{ascending:!1})]);if(O.error)throw O.error;if(I.error)throw I.error;if(z.error)throw z.error;if(G.error)throw G.error;if(J.error)throw J.error;s(O.data),o(I.data??[]),h(z.data??[]),m(G.data??[]),y(J.data??[])}catch(O){b(O instanceof Error?O.message:"Failed to load client data")}finally{x(!1)}},[n]);T.useEffect(()=>{n&&_()},[n,_]);const N=T.useCallback(async()=>{const{data:O}=await Ne.from("optimization_proposals").select("*").eq("client_id",n).order("created_at",{ascending:!1});y(O??[])},[n]),L=T.useCallback(async()=>{const{data:O}=await Ne.from("agent_memory").select("*").eq("client_id",n).eq("is_active",!0).order("created_at",{ascending:!1});h(O??[])},[n]);return{client:t,markets:i,memory:c,conversations:p,proposals:g,loading:w,error:k,refetch:_,refetchProposals:N,refetchMemory:L,setProposals:y}}const nw=["goal","rule","decision","note"],uf={goal:"bg-blue-100 text-blue-700",rule:"bg-purple-100 text-purple-700",decision:"bg-amber-100 text-amber-700",note:"bg-slate-100 text-slate-600"};function sw({clientId:n,memory:t,onClose:s,onRefresh:i}){const{user:o}=Fn(),[c,h]=T.useState(!1),[p,m]=T.useState("goal"),[g,y]=T.useState(""),[w,x]=T.useState(!1),k=async _=>{if(_.preventDefault(),!(!g.trim()||!o)){x(!0);try{const{error:N}=await Ne.from("agent_memory").insert({client_id:n,memory_type:p,content:g.trim(),created_by:o.id,is_active:!0});if(N)throw N;y(""),h(!1),i()}catch(N){alert(N instanceof Error?N.message:"Failed to add memory")}finally{x(!1)}}},b=async _=>{const{error:N}=await Ne.from("agent_memory").update({is_active:!1}).eq("id",_);N||i()};return u.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-start justify-end z-50",children:u.jsxs("div",{className:"bg-white w-96 h-full flex flex-col shadow-xl",children:[u.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Agent Memory"}),u.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[t.length," active item",t.length!==1?"s":""," ","injected into every conversation"]})]}),u.jsx("button",{onClick:s,className:"p-1.5 rounded-md hover:bg-slate-100 text-slate-400 hover:text-slate-700 transition-colors",children:u.jsx(ip,{size:16})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[t.length===0&&!c&&u.jsx("p",{className:"text-center text-xs text-slate-400 py-8",children:"No memory items yet. Add goals, rules, or notes to guide the agent."}),t.map(_=>u.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 flex items-start gap-2 group",children:[u.jsx("span",{className:se("text-[10px] font-semibold px-1.5 py-0.5 rounded uppercase flex-shrink-0 mt-0.5",uf[_.memory_type]),children:_.memory_type}),u.jsx("p",{className:"text-xs text-slate-700 flex-1 leading-relaxed",children:_.content}),u.jsx("button",{onClick:()=>b(_.id),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-red-50 text-slate-400 hover:text-red-500 transition-all flex-shrink-0",title:"Deactivate memory item",children:u.jsx(np,{size:12})})]},_.id))]}),u.jsx("div",{className:"border-t border-slate-200 p-4",children:c?u.jsxs("form",{onSubmit:k,className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Type"}),u.jsx("div",{className:"flex gap-1.5 flex-wrap",children:nw.map(_=>u.jsx("button",{type:"button",onClick:()=>m(_),className:se("text-[10px] font-semibold px-2 py-1 rounded uppercase transition-colors",p===_?uf[_]:"bg-slate-100 text-slate-500 hover:bg-slate-200"),children:_},_))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Content"}),u.jsx("textarea",{value:g,onChange:_=>y(_.target.value),className:"w-full px-3 py-2 text-xs border border-slate-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-brand-400",rows:3,placeholder:p==="goal"?"e.g. Maintain ROAS above 4.0 across all campaigns":p==="rule"?"e.g. Never pause the top 10 revenue-generating keywords":p==="decision"?"e.g. Excluded brand terms from auto campaigns in June 2025":"Free text note",autoFocus:!0,required:!0})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>{h(!1),y("")},className:"px-3 py-1.5 text-xs text-slate-600 hover:text-slate-900 transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:w||!g.trim(),className:"px-3 py-1.5 text-xs bg-brand-500 hover:bg-brand-600 text-white rounded-md font-medium disabled:opacity-50 transition-colors",children:w?"Saving":"Add Memory"})]})]}):u.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 border border-dashed border-slate-300 rounded-lg text-xs text-slate-500 hover:text-slate-700 hover:border-slate-400 transition-colors",children:[u.jsx($n,{size:13}),"Add memory item"]})})]})})}function iw({clientId:n,clientName:t,market:s,memory:i,recentConversation:o,onProposalsCreated:c,onRefreshMemory:h}){const{user:p}=Fn(),[m,g]=T.useState([]),[y,w]=T.useState(""),[x,k]=T.useState(!1),[b,_]=T.useState(null),[N,L]=T.useState(!1),[O,I]=T.useState(null),z=T.useRef(null),G=T.useRef(null);T.useEffect(()=>{J()},[s.id]);const J=T.useCallback(async()=>{if(g([]),_(null),I((o==null?void 0:o.summary)??null),!p)return;const{data:ce,error:Me}=await Ne.from("conversations").insert({client_id:n,market_id:s.id,user_id:p.id}).select().single();!Me&&ce&&_(ce.id)},[n,s.id,p,o==null?void 0:o.summary]),ae=T.useCallback(()=>{var ce;(ce=z.current)==null||ce.scrollIntoView({behavior:"smooth"})},[]);T.useEffect(()=>{ae()},[m,ae]);const Ee=async()=>{if(b&&m.length>0)try{await Vx({conversationId:b,messages:m})}catch(ce){console.error("Failed to generate summary:",ce)}await J()},Ae=async()=>{var ht;const ce=y.trim();if(!ce||x||!b)return;const Me={role:"user",content:ce};g(Ce=>[...Ce,Me]),w(""),k(!0),G.current&&(G.current.style.height="auto"),await Ne.from("messages").insert({conversation_id:b,role:"user",content:ce});const dt={role:"assistant",content:"",isStreaming:!0};g(Ce=>[...Ce,dt]);try{const Ce=[...m,Me],ye=await qx({conversationId:b,clientId:n,marketId:s.id,messages:Ce,clientContext:{...s,clientName:t},memory:i.filter(X=>X.is_active),previousSummary:O}),F={role:"assistant",content:ye.content||"*(No text response)*"};g(X=>[...X.slice(0,-1),F]),(ht=ye.proposals)!=null&&ht.length&&c(ye.proposals)}catch(Ce){const ye={role:"assistant",content:`Error: ${Ce instanceof Error?Ce.message:"Something went wrong. Please try again."}`};g(F=>[...F.slice(0,-1),ye])}finally{k(!1)}},Et=ce=>{ce.key==="Enter"&&!ce.shiftKey&&(ce.preventDefault(),Ae())},Wt=ce=>{w(ce.target.value),ce.target.style.height="auto",ce.target.style.height=`${Math.min(ce.target.scrollHeight,120)}px`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col h-full bg-white rounded-xl border border-slate-200 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Conversation"}),O&&u.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-50 px-1.5 py-0.5 rounded",children:"Continuing from previous session"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-md hover:bg-slate-100 text-xs text-slate-500 hover:text-slate-700 transition-colors",title:"View agent memory",children:[u.jsx(mx,{size:13}),u.jsxs("span",{children:[i.length," memories"]})]}),u.jsxs("button",{onClick:Ee,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-md hover:bg-slate-100 text-xs text-slate-500 hover:text-slate-700 transition-colors",title:"Start new conversation (saves summary of current)",children:[u.jsx($n,{size:13}),"New"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-3",children:[m.length===0&&u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-8",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-50 flex items-center justify-center mb-3",children:u.jsx("span",{className:"text-brand-500 font-bold text-sm",children:"F"})}),u.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Ready for ",t,"  ",s.country_code]}),u.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-xs",children:"Ask about campaign performance, budgets, or let the agent identify optimization opportunities."}),O&&u.jsxs("div",{className:"mt-4 max-w-sm bg-slate-50 rounded-lg p-3 text-left",children:[u.jsx("p",{className:"text-[10px] font-medium text-slate-500 uppercase mb-1",children:"Previous session"}),u.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:O})]})]}),m.map((ce,Me)=>u.jsx(op,{message:ce},Me)),u.jsx("div",{ref:z})]}),u.jsxs("div",{className:"border-t border-slate-100 px-4 py-3 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("textarea",{ref:G,value:y,onChange:Wt,onKeyDown:Et,placeholder:`Ask about ${t} ${s.country_code} campaigns`,className:"flex-1 resize-none px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent min-h-[40px] max-h-[120px] leading-relaxed",rows:1,disabled:x||!b}),u.jsx("button",{onClick:Ae,disabled:!y.trim()||x||!b,className:"flex-shrink-0 w-9 h-9 flex items-center justify-center bg-brand-500 hover:bg-brand-600 text-white rounded-lg disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:x?u.jsx(Oa,{size:14,className:"animate-spin"}):u.jsx(rp,{size:14})})]}),u.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5",children:"Enter to send  Shift+Enter for new line"})]})]}),N&&u.jsx(sw,{clientId:n,memory:i,onClose:()=>L(!1),onRefresh:h})]})}const dp=6048e5,aw=864e5,pa=43200,cf=1440,df=Symbol.for("constructDateFrom");function er(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&df in n?n[df](t):n instanceof Date?new n.constructor(t):new Date(t)}function Ke(n,t){return er(t||n,n)}let ow={};function Gs(){return ow}function Hs(n,t){var p,m,g,y;const s=Gs(),i=(t==null?void 0:t.weekStartsOn)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??s.weekStartsOn??((y=(g=s.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,o=Ke(n,t==null?void 0:t.in),c=o.getDay(),h=(c<i?7:0)+c-i;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function ja(n,t){return Hs(n,{...t,weekStartsOn:1})}function hp(n,t){const s=Ke(n,t==null?void 0:t.in),i=s.getFullYear(),o=er(s,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const c=ja(o),h=er(s,0);h.setFullYear(i,0,4),h.setHours(0,0,0,0);const p=ja(h);return s.getTime()>=c.getTime()?i+1:s.getTime()>=p.getTime()?i:i-1}function Sa(n){const t=Ke(n),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+n-+s}function Aa(n,...t){const s=er.bind(null,n||t.find(i=>typeof i=="object"));return t.map(s)}function hf(n,t){const s=Ke(n,t==null?void 0:t.in);return s.setHours(0,0,0,0),s}function lw(n,t,s){const[i,o]=Aa(s==null?void 0:s.in,n,t),c=hf(i),h=hf(o),p=+c-Sa(c),m=+h-Sa(h);return Math.round((p-m)/aw)}function uw(n,t){const s=hp(n,t),i=er(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),ja(i)}function ma(n,t){const s=+Ke(n)-+Ke(t);return s<0?-1:s>0?1:s}function cw(n){return er(n,Date.now())}function dw(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function hw(n){return!(!dw(n)&&typeof n!="number"||isNaN(+Ke(n)))}function fw(n,t,s){const[i,o]=Aa(s==null?void 0:s.in,n,t),c=i.getFullYear()-o.getFullYear(),h=i.getMonth()-o.getMonth();return c*12+h}function pw(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function mw(n,t){return+Ke(n)-+Ke(t)}function gw(n,t){const s=Ke(n,t==null?void 0:t.in);return s.setHours(23,59,59,999),s}function vw(n,t){const s=Ke(n,t==null?void 0:t.in),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}function yw(n,t){const s=Ke(n,t==null?void 0:t.in);return+gw(s,t)==+vw(s,t)}function xw(n,t,s){const[i,o,c]=Aa(s==null?void 0:s.in,n,n,t),h=ma(o,c),p=Math.abs(fw(o,c));if(p<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-h*p);let m=ma(o,c)===-h;yw(i)&&p===1&&ma(i,c)===1&&(m=!1);const g=h*(p-+m);return g===0?0:g}function ww(n,t,s){const i=mw(n,t)/1e3;return pw(s==null?void 0:s.roundingMethod)(i)}function _w(n,t){const s=Ke(n,t==null?void 0:t.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const bw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kw=(n,t,s)=>{let i;const o=bw[n];return typeof o=="string"?i=o:t===1?i=o.one:i=o.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+i:i+" ago":i};function Wl(n){return(t={})=>{const s=t.width?String(t.width):n.defaultWidth;return n.formats[s]||n.formats[n.defaultWidth]}}const jw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ew={date:Wl({formats:jw,defaultWidth:"full"}),time:Wl({formats:Sw,defaultWidth:"full"}),dateTime:Wl({formats:Nw,defaultWidth:"full"})},Cw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tw=(n,t,s,i)=>Cw[n];function Ps(n){return(t,s)=>{const i=s!=null&&s.context?String(s.context):"standalone";let o;if(i==="formatting"&&n.formattingValues){const h=n.defaultFormattingWidth||n.defaultWidth,p=s!=null&&s.width?String(s.width):h;o=n.formattingValues[p]||n.formattingValues[h]}else{const h=n.defaultWidth,p=s!=null&&s.width?String(s.width):n.defaultWidth;o=n.values[p]||n.values[h]}const c=n.argumentCallback?n.argumentCallback(t):t;return o[c]}}const Pw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ow={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Aw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Iw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Lw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dw=(n,t)=>{const s=Number(n),i=s%100;if(i>20||i<10)switch(i%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Mw={ordinalNumber:Dw,era:Ps({values:Pw,defaultWidth:"wide"}),quarter:Ps({values:Rw,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ps({values:Ow,defaultWidth:"wide"}),day:Ps({values:Aw,defaultWidth:"wide"}),dayPeriod:Ps({values:Iw,defaultWidth:"wide",formattingValues:Lw,defaultFormattingWidth:"wide"})};function Rs(n){return(t,s={})=>{const i=s.width,o=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],c=t.match(o);if(!c)return null;const h=c[0],p=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(p)?Uw(p,w=>w.test(h)):$w(p,w=>w.test(h));let g;g=n.valueCallback?n.valueCallback(m):m,g=s.valueCallback?s.valueCallback(g):g;const y=t.slice(h.length);return{value:g,rest:y}}}function $w(n,t){for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&t(n[s]))return s}function Uw(n,t){for(let s=0;s<n.length;s++)if(t(n[s]))return s}function zw(n){return(t,s={})=>{const i=t.match(n.matchPattern);if(!i)return null;const o=i[0],c=t.match(n.parsePattern);if(!c)return null;let h=n.valueCallback?n.valueCallback(c[0]):c[0];h=s.valueCallback?s.valueCallback(h):h;const p=t.slice(o.length);return{value:h,rest:p}}}const Bw=/^(\d+)(th|st|nd|rd)?/i,Fw=/\d+/i,Ww={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qw={any:[/^b/i,/^(a|c)/i]},Hw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vw={any:[/1/i,/2/i,/3/i,/4/i]},Kw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Gw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Qw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Xw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zw={ordinalNumber:zw({matchPattern:Bw,parsePattern:Fw,valueCallback:n=>parseInt(n,10)}),era:Rs({matchPatterns:Ww,defaultMatchWidth:"wide",parsePatterns:qw,defaultParseWidth:"any"}),quarter:Rs({matchPatterns:Hw,defaultMatchWidth:"wide",parsePatterns:Vw,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Rs({matchPatterns:Kw,defaultMatchWidth:"wide",parsePatterns:Gw,defaultParseWidth:"any"}),day:Rs({matchPatterns:Jw,defaultMatchWidth:"wide",parsePatterns:Yw,defaultParseWidth:"any"}),dayPeriod:Rs({matchPatterns:Qw,defaultMatchWidth:"any",parsePatterns:Xw,defaultParseWidth:"any"})},fp={code:"en-US",formatDistance:kw,formatLong:Ew,formatRelative:Tw,localize:Mw,match:Zw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function e_(n,t){const s=Ke(n,t==null?void 0:t.in);return lw(s,_w(s))+1}function t_(n,t){const s=Ke(n,t==null?void 0:t.in),i=+ja(s)-+uw(s);return Math.round(i/dp)+1}function pp(n,t){var y,w,x,k;const s=Ke(n,t==null?void 0:t.in),i=s.getFullYear(),o=Gs(),c=(t==null?void 0:t.firstWeekContainsDate)??((w=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??o.firstWeekContainsDate??((k=(x=o.locale)==null?void 0:x.options)==null?void 0:k.firstWeekContainsDate)??1,h=er((t==null?void 0:t.in)||n,0);h.setFullYear(i+1,0,c),h.setHours(0,0,0,0);const p=Hs(h,t),m=er((t==null?void 0:t.in)||n,0);m.setFullYear(i,0,c),m.setHours(0,0,0,0);const g=Hs(m,t);return+s>=+p?i+1:+s>=+g?i:i-1}function r_(n,t){var p,m,g,y;const s=Gs(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(g=s.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,o=pp(n,t),c=er((t==null?void 0:t.in)||n,0);return c.setFullYear(o,0,i),c.setHours(0,0,0,0),Hs(c,t)}function n_(n,t){const s=Ke(n,t==null?void 0:t.in),i=+Hs(s,t)-+r_(s,t);return Math.round(i/dp)+1}function ve(n,t){const s=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return s+i}const br={y(n,t){const s=n.getFullYear(),i=s>0?s:1-s;return ve(t==="yy"?i%100:i,t.length)},M(n,t){const s=n.getMonth();return t==="M"?String(s+1):ve(s+1,2)},d(n,t){return ve(n.getDate(),t.length)},a(n,t){const s=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(n,t){return ve(n.getHours()%12||12,t.length)},H(n,t){return ve(n.getHours(),t.length)},m(n,t){return ve(n.getMinutes(),t.length)},s(n,t){return ve(n.getSeconds(),t.length)},S(n,t){const s=t.length,i=n.getMilliseconds(),o=Math.trunc(i*Math.pow(10,s-3));return ve(o,t.length)}},Rn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ff={G:function(n,t,s){const i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(i,{width:"abbreviated"});case"GGGGG":return s.era(i,{width:"narrow"});case"GGGG":default:return s.era(i,{width:"wide"})}},y:function(n,t,s){if(t==="yo"){const i=n.getFullYear(),o=i>0?i:1-i;return s.ordinalNumber(o,{unit:"year"})}return br.y(n,t)},Y:function(n,t,s,i){const o=pp(n,i),c=o>0?o:1-o;if(t==="YY"){const h=c%100;return ve(h,2)}return t==="Yo"?s.ordinalNumber(c,{unit:"year"}):ve(c,t.length)},R:function(n,t){const s=hp(n);return ve(s,t.length)},u:function(n,t){const s=n.getFullYear();return ve(s,t.length)},Q:function(n,t,s){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return ve(i,2);case"Qo":return s.ordinalNumber(i,{unit:"quarter"});case"QQQ":return s.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,s){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return ve(i,2);case"qo":return s.ordinalNumber(i,{unit:"quarter"});case"qqq":return s.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,s){const i=n.getMonth();switch(t){case"M":case"MM":return br.M(n,t);case"Mo":return s.ordinalNumber(i+1,{unit:"month"});case"MMM":return s.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,s){const i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return ve(i+1,2);case"Lo":return s.ordinalNumber(i+1,{unit:"month"});case"LLL":return s.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,s,i){const o=n_(n,i);return t==="wo"?s.ordinalNumber(o,{unit:"week"}):ve(o,t.length)},I:function(n,t,s){const i=t_(n);return t==="Io"?s.ordinalNumber(i,{unit:"week"}):ve(i,t.length)},d:function(n,t,s){return t==="do"?s.ordinalNumber(n.getDate(),{unit:"date"}):br.d(n,t)},D:function(n,t,s){const i=e_(n);return t==="Do"?s.ordinalNumber(i,{unit:"dayOfYear"}):ve(i,t.length)},E:function(n,t,s){const i=n.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(i,{width:"short",context:"formatting"});case"EEEE":default:return s.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,s,i){const o=n.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return ve(c,2);case"eo":return s.ordinalNumber(c,{unit:"day"});case"eee":return s.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(o,{width:"short",context:"formatting"});case"eeee":default:return s.day(o,{width:"wide",context:"formatting"})}},c:function(n,t,s,i){const o=n.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return ve(c,t.length);case"co":return s.ordinalNumber(c,{unit:"day"});case"ccc":return s.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(o,{width:"narrow",context:"standalone"});case"cccccc":return s.day(o,{width:"short",context:"standalone"});case"cccc":default:return s.day(o,{width:"wide",context:"standalone"})}},i:function(n,t,s){const i=n.getDay(),o=i===0?7:i;switch(t){case"i":return String(o);case"ii":return ve(o,t.length);case"io":return s.ordinalNumber(o,{unit:"day"});case"iii":return s.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(i,{width:"short",context:"formatting"});case"iiii":default:return s.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,s){const o=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(n,t,s){const i=n.getHours();let o;switch(i===12?o=Rn.noon:i===0?o=Rn.midnight:o=i/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(n,t,s){const i=n.getHours();let o;switch(i>=17?o=Rn.evening:i>=12?o=Rn.afternoon:i>=4?o=Rn.morning:o=Rn.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(n,t,s){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),s.ordinalNumber(i,{unit:"hour"})}return br.h(n,t)},H:function(n,t,s){return t==="Ho"?s.ordinalNumber(n.getHours(),{unit:"hour"}):br.H(n,t)},K:function(n,t,s){const i=n.getHours()%12;return t==="Ko"?s.ordinalNumber(i,{unit:"hour"}):ve(i,t.length)},k:function(n,t,s){let i=n.getHours();return i===0&&(i=24),t==="ko"?s.ordinalNumber(i,{unit:"hour"}):ve(i,t.length)},m:function(n,t,s){return t==="mo"?s.ordinalNumber(n.getMinutes(),{unit:"minute"}):br.m(n,t)},s:function(n,t,s){return t==="so"?s.ordinalNumber(n.getSeconds(),{unit:"second"}):br.s(n,t)},S:function(n,t){return br.S(n,t)},X:function(n,t,s){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return mf(i);case"XXXX":case"XX":return Hr(i);case"XXXXX":case"XXX":default:return Hr(i,":")}},x:function(n,t,s){const i=n.getTimezoneOffset();switch(t){case"x":return mf(i);case"xxxx":case"xx":return Hr(i);case"xxxxx":case"xxx":default:return Hr(i,":")}},O:function(n,t,s){const i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+pf(i,":");case"OOOO":default:return"GMT"+Hr(i,":")}},z:function(n,t,s){const i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+pf(i,":");case"zzzz":default:return"GMT"+Hr(i,":")}},t:function(n,t,s){const i=Math.trunc(+n/1e3);return ve(i,t.length)},T:function(n,t,s){return ve(+n,t.length)}};function pf(n,t=""){const s=n>0?"-":"+",i=Math.abs(n),o=Math.trunc(i/60),c=i%60;return c===0?s+String(o):s+String(o)+t+ve(c,2)}function mf(n,t){return n%60===0?(n>0?"-":"+")+ve(Math.abs(n)/60,2):Hr(n,t)}function Hr(n,t=""){const s=n>0?"-":"+",i=Math.abs(n),o=ve(Math.trunc(i/60),2),c=ve(i%60,2);return s+o+t+c}const gf=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},mp=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},s_=(n,t)=>{const s=n.match(/(P+)(p+)?/)||[],i=s[1],o=s[2];if(!o)return gf(n,t);let c;switch(i){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",gf(i,t)).replace("{{time}}",mp(o,t))},i_={p:mp,P:s_},a_=/^D+$/,o_=/^Y+$/,l_=["D","DD","YY","YYYY"];function u_(n){return a_.test(n)}function c_(n){return o_.test(n)}function d_(n,t,s){const i=h_(n,t,s);if(console.warn(i),l_.includes(n))throw new RangeError(i)}function h_(n,t,s){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const f_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,p_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m_=/^'([^]*?)'?$/,g_=/''/g,v_=/[a-zA-Z]/;function y_(n,t,s){var y,w,x,k;const i=Gs(),o=i.locale??fp,c=i.firstWeekContainsDate??((w=(y=i.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,h=i.weekStartsOn??((k=(x=i.locale)==null?void 0:x.options)==null?void 0:k.weekStartsOn)??0,p=Ke(n,s==null?void 0:s.in);if(!hw(p))throw new RangeError("Invalid time value");let m=t.match(p_).map(b=>{const _=b[0];if(_==="p"||_==="P"){const N=i_[_];return N(b,o.formatLong)}return b}).join("").match(f_).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:x_(b)};if(ff[_])return{isToken:!0,value:b};if(_.match(v_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});o.localize.preprocessor&&(m=o.localize.preprocessor(p,m));const g={firstWeekContainsDate:c,weekStartsOn:h,locale:o};return m.map(b=>{if(!b.isToken)return b.value;const _=b.value;(c_(_)||u_(_))&&d_(_,t,String(n));const N=ff[_[0]];return N(p,_,o.localize,g)}).join("")}function x_(n){const t=n.match(m_);return t?t[1].replace(g_,"'"):n}function w_(n,t,s){const i=Gs(),o=(s==null?void 0:s.locale)??i.locale??fp,c=2520,h=ma(n,t);if(isNaN(h))throw new RangeError("Invalid time value");const p=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:h}),[m,g]=Aa(s==null?void 0:s.in,...h>0?[t,n]:[n,t]),y=ww(g,m),w=(Sa(g)-Sa(m))/1e3,x=Math.round((y-w)/60);let k;if(x<2)return s!=null&&s.includeSeconds?y<5?o.formatDistance("lessThanXSeconds",5,p):y<10?o.formatDistance("lessThanXSeconds",10,p):y<20?o.formatDistance("lessThanXSeconds",20,p):y<40?o.formatDistance("halfAMinute",0,p):y<60?o.formatDistance("lessThanXMinutes",1,p):o.formatDistance("xMinutes",1,p):x===0?o.formatDistance("lessThanXMinutes",1,p):o.formatDistance("xMinutes",x,p);if(x<45)return o.formatDistance("xMinutes",x,p);if(x<90)return o.formatDistance("aboutXHours",1,p);if(x<cf){const b=Math.round(x/60);return o.formatDistance("aboutXHours",b,p)}else{if(x<c)return o.formatDistance("xDays",1,p);if(x<pa){const b=Math.round(x/cf);return o.formatDistance("xDays",b,p)}else if(x<pa*2)return k=Math.round(x/pa),o.formatDistance("aboutXMonths",k,p)}if(k=xw(g,m),k<12){const b=Math.round(x/pa);return o.formatDistance("xMonths",b,p)}else{const b=k%12,_=Math.trunc(k/12);return b<3?o.formatDistance("aboutXYears",_,p):b<9?o.formatDistance("overXYears",_,p):o.formatDistance("almostXYears",_+1,p)}}function Vs(n,t){return w_(n,cw(n),t)}const __={bid:"Bid",budget:"Budget",keyword:"Keyword",targeting:"Targeting"},b_={bid:"bg-blue-100 text-blue-700",budget:"bg-violet-100 text-violet-700",keyword:"bg-emerald-100 text-emerald-700",targeting:"bg-orange-100 text-orange-700"},k_={pending:"bg-amber-100 text-amber-700",approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",executed:"bg-blue-100 text-blue-700"};function j_({proposal:n,onUpdated:t}){const{user:s}=Fn(),[i,o]=T.useState(!1),[c,h]=T.useState(!1),p=async m=>{if(s){o(!0);try{const{proposal:g}=await Kx({proposalId:n.id,action:m,reviewedBy:s.id});t(g)}catch(g){alert(g instanceof Error?g.message:"Action failed")}finally{o(!1)}}};return u.jsx("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[u.jsx("span",{className:se("text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded",b_[n.proposal_type]),children:__[n.proposal_type]}),u.jsx("span",{className:se("text-[10px] font-semibold uppercase px-1.5 py-0.5 rounded",k_[n.status]),children:n.status})]}),u.jsx("span",{className:"text-[10px] text-slate-400 flex-shrink-0",children:Vs(new Date(n.created_at),{addSuffix:!0})})]}),u.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2",children:n.title}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 mb-2",children:[u.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded font-mono",children:n.current_value??""}),u.jsx("span",{className:"text-slate-400",children:""}),u.jsx("span",{className:"bg-green-50 text-green-700 border border-green-200 px-2 py-0.5 rounded font-mono font-medium",children:n.proposed_value??""})]}),n.expected_impact&&u.jsxs("p",{className:"text-xs text-slate-500 mb-3",children:[u.jsx("span",{className:"font-medium text-slate-700",children:"Expected: "}),n.expected_impact]}),n.description&&u.jsxs("button",{onClick:()=>h(m=>!m),className:"flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-600 mb-2 transition-colors",children:[c?u.jsx(xx,{size:11}):u.jsx(Qf,{size:11}),c?"Hide":"Show"," details"]}),c&&n.description&&u.jsx("p",{className:"text-xs text-slate-600 leading-relaxed bg-slate-50 rounded-md p-2.5 mb-2",children:n.description}),n.status==="pending"&&u.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-100",children:[u.jsxs("button",{onClick:()=>p("approve"),disabled:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-50 hover:bg-green-100 text-green-700 text-xs font-medium rounded-md transition-colors disabled:opacity-50",children:[u.jsx(Xf,{size:12}),"Approve"]}),u.jsxs("button",{onClick:()=>p("reject"),disabled:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-700 text-xs font-medium rounded-md transition-colors disabled:opacity-50",children:[u.jsx(Mn,{size:12}),"Reject"]})]}),n.status==="approved"&&u.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Ready for execution"}),u.jsxs("button",{onClick:()=>p("execute"),disabled:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-brand-500 hover:bg-brand-600 text-white text-xs font-medium rounded-md transition-colors disabled:opacity-50",children:[u.jsx(Mx,{size:12}),"Execute via n8n"]})]})}),n.status==="executed"&&n.executed_at&&u.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 pt-2 border-t border-slate-100",children:["Executed"," ",Vs(new Date(n.executed_at),{addSuffix:!0})]})]})})}const S_=[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"approved",label:"Approved"},{key:"rejected",label:"Rejected"},{key:"executed",label:"Executed"}];function N_({proposals:n,marketId:t,onUpdated:s}){const[i,o]=T.useState("pending"),c=n.filter(m=>!t||m.market_id===t||m.market_id===null),h=i==="all"?c:c.filter(m=>m.status===i),p=c.filter(m=>m.status==="pending").length;return u.jsxs("div",{className:"flex flex-col h-full bg-white rounded-xl border border-slate-200 overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(_a,{size:14,className:"text-amber-500"}),u.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Proposals"}),p>0&&u.jsxs("span",{className:"text-[10px] font-semibold bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full",children:[p," pending"]})]}),u.jsx("div",{className:"flex gap-0.5",children:S_.map(({key:m,label:g})=>{const y=m==="all"?c.length:c.filter(w=>w.status===m).length;return u.jsxs("button",{onClick:()=>o(m),className:se("px-2.5 py-1 text-xs rounded-md font-medium transition-colors",i===m?"bg-slate-900 text-white":"text-slate-500 hover:text-slate-700 hover:bg-slate-100"),children:[g,y>0&&u.jsx("span",{className:"ml-1 opacity-60",children:y})]},m)})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:h.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[u.jsx(_a,{size:24,className:"text-slate-300 mb-2"}),u.jsx("p",{className:"text-xs text-slate-400",children:i==="pending"?"No pending proposals. Chat with the agent to generate optimization ideas.":`No ${i} proposals.`})]}):h.map(m=>u.jsx(j_,{proposal:m,onUpdated:s},m.id))})]})}const gp="/api";async function Ia(n,t){const s=await fetch(`${gp}${n}`,{headers:{"Content-Type":"application/json"},...t});if(!s.ok){const i=await s.json().catch(()=>({error:s.statusText}));throw new Error(i.error||`HTTP ${s.status}`)}return s.json()}function E_(){return Ia("/bol-customers")}async function vp(n){const{customers:t}=await E_(),s=t.find(N=>N.client_id===n);if(!s)return null;const i=await Ia(`/bol-analyses?customerId=${s.id}`),o=N=>i.analyses.filter(L=>L.category===N).sort((L,O)=>new Date(O.analyzed_at).getTime()-new Date(L.analyzed_at).getTime())[0]??null,c=o("content"),h=o("inventory"),p=o("orders"),m=o("advertising"),g=o("returns"),y=o("performance"),w={};(c==null?void 0:c.score)!==void 0&&(w.content=c.score),(h==null?void 0:h.score)!==void 0&&(w.inventory=h.score),(p==null?void 0:p.score)!==void 0&&(w.orders=p.score),(m==null?void 0:m.score)!==void 0&&(w.advertising=m.score),(g==null?void 0:g.score)!==void 0&&(w.returns=g.score),(y==null?void 0:y.score)!==void 0&&(w.performance=y.score);const x={content:.3,inventory:.25,orders:.2,advertising:.15,returns:.05,performance:.05};let k=0,b=0;for(const[N,L]of Object.entries(x)){const O=w[N];O!==void 0&&(k+=O*L,b+=L)}const _=b>0?Math.round(k/b):null;return{customer:s,content:c,inventory:h,orders:p,advertising:m,returns:g,performance:y,overall_score:_,last_sync_at:s.last_sync_at}}async function C_(n){return Ia(`/bol-competitors?customerId=${n}`)}async function T_(n){return Ia(`/bol-keywords?customerId=${n}`)}async function P_(n,t){const{data:{session:s}}=await Ne.auth.getSession();if(!(s!=null&&s.access_token))throw new Error("Not authenticated  please sign in again");const i=await fetch(`${gp}/bol-sync-trigger`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({customerId:n,syncType:t})}),o=await i.json();if(!i.ok)throw new Error(o.error||`HTTP ${i.status}`);return o}function R_(n){const t=Date.now()-new Date(n).getTime(),s=Math.floor(t/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;const i=Math.floor(s/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function yp(n){return n===null?"#94a3b8":n>=80?"#16a34a":n>=60?"#d97706":"#dc2626"}function xp(n){return n===null?"bg-slate-100 text-slate-400 border-slate-200":n>=80?"bg-green-50 text-green-700 border-green-200":n>=60?"bg-amber-50 text-amber-700 border-amber-200":"bg-red-50 text-red-700 border-red-200"}function O_({score:n}){const s=2*Math.PI*26,i=(n??0)/100*s,o=yp(n);return u.jsxs("div",{className:"relative flex items-center justify-center w-16 h-16 flex-shrink-0",children:[u.jsxs("svg",{width:"64",height:"64",className:"absolute inset-0 -rotate-90",children:[u.jsx("circle",{cx:"32",cy:"32",r:26,fill:"none",stroke:"#e2e8f0",strokeWidth:"5"}),u.jsx("circle",{cx:"32",cy:"32",r:26,fill:"none",stroke:o,strokeWidth:"5",strokeDasharray:`${i} ${s}`,strokeLinecap:"round"})]}),u.jsx("div",{className:"relative flex flex-col items-center leading-none",children:u.jsx("span",{className:"text-lg font-bold",style:{color:o},children:n??""})})]})}function ql({icon:n,title:t,analysis:s}){if(!s)return u.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[u.jsx("span",{className:"text-slate-400",children:n}),u.jsx("span",{className:"text-xs font-medium text-slate-600",children:t})]}),u.jsx("p",{className:"text-[11px] text-slate-400",children:"No data yet  sync pending"})]});const i=(s.recommendations??[]).slice(0,3);return u.jsxs("div",{className:`border rounded-lg p-3 ${xp(s.score)}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"opacity-60",children:n}),u.jsx("span",{className:"text-xs font-medium text-slate-700",children:t})]}),u.jsx("span",{className:"text-sm font-bold",style:{color:yp(s.score)},children:s.score})]}),i.length>0?u.jsx("ul",{className:"space-y-1",children:i.map((o,c)=>u.jsxs("li",{className:"flex items-start gap-1.5",children:[u.jsx("span",{className:"text-slate-400 mt-0.5 shrink-0 text-[10px]",children:""}),u.jsx("span",{className:"text-[11px] text-slate-600 leading-tight",children:o.title})]},c))}):u.jsx("p",{className:"text-[11px] text-green-600 font-medium",children:" All good"})]})}function A_({clientId:n}){const[t,s]=T.useState(void 0),[i,o]=T.useState(!0);if(T.useEffect(()=>{o(!0),vp(n).then(s).catch(()=>s(null)).finally(()=>o(!1))},[n]),i)return u.jsxs("div",{className:"flex flex-col h-full bg-white rounded-xl border border-slate-200 overflow-hidden",children:[u.jsx(vf,{}),u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsx(Jr,{size:16,className:"text-slate-400 animate-spin"})})]});if(!t)return u.jsxs("div",{className:"flex flex-col h-full bg-white rounded-xl border border-slate-200 overflow-hidden",children:[u.jsx(vf,{}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 px-5 text-center",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 border border-orange-100 flex items-center justify-center",children:u.jsx(Yr,{size:15,className:"text-orange-400"})}),u.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Not connected"}),u.jsx("p",{className:"text-[11px] text-slate-400 leading-relaxed",children:"Link a bol.com seller account to this client to see performance data here."})]})]});const c=t.last_sync_at?R_(t.last_sync_at):"Never synced";return u.jsxs("div",{className:"flex flex-col h-full bg-white rounded-xl border border-slate-200 overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-sm flex-shrink-0"}),u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Bol.com"}),u.jsx("span",{className:"text-[10px] text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded font-medium truncate max-w-[120px]",children:t.customer.seller_name})]}),u.jsx("span",{className:"text-[10px] text-slate-400 flex-shrink-0",children:c})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-100",children:[u.jsx(O_,{score:t.overall_score}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Overall Score"}),u.jsx("p",{className:"text-[11px] text-slate-400 mt-0.5 leading-snug",children:"Content, inventory & order performance combined."}),t.overall_score!==null&&u.jsx("span",{className:`inline-block mt-1.5 text-[10px] font-semibold px-1.5 py-0.5 rounded border ${xp(t.overall_score)}`,children:t.overall_score>=80?"Healthy":t.overall_score>=60?"Needs attention":"Action required"})]})]}),u.jsx(ql,{icon:u.jsx(kx,{size:12}),title:"Content",analysis:t.content}),u.jsx(ql,{icon:u.jsx(ep,{size:12}),title:"Inventory",analysis:t.inventory}),u.jsx(ql,{icon:u.jsx(Yr,{size:12}),title:"Orders",analysis:t.orders})]}),u.jsx("div",{className:"flex-shrink-0 px-3 py-2.5 border-t border-slate-100",children:u.jsxs(Nt,{to:`/clients/${n}/bol`,className:"flex items-center justify-center gap-1.5 w-full py-1.5 text-xs font-medium text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-md transition-colors",children:[u.jsx(bx,{size:11}),"View full dashboard"]})})]})}function vf(){return u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center gap-2 flex-shrink-0",children:[u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-sm"}),u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Bol.com"})]})}function I_(){const{clientId:n}=mu(),{client:t,markets:s,memory:i,conversations:o,proposals:c,loading:h,error:p,refetch:m,refetchMemory:g,setProposals:y}=cp(n),[w,x]=T.useState(0),[k,b]=T.useState("proposals"),_=s[w]??null,N=T.useCallback(O=>{y(I=>[...O,...I])},[y]),L=T.useCallback(O=>{y(I=>I.map(z=>z.id===O.id?O:z))},[y]);return h?u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("svg",{className:"animate-spin h-5 w-5 text-brand-500",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})}):p||!t?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3",children:[u.jsx("p",{className:"text-slate-500 text-sm",children:p??"Client not found"}),u.jsx(Nt,{to:"/",className:"text-sm text-brand-500 hover:underline",children:" Back to clients"})]}):u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Nt,{to:"/",className:"p-1.5 rounded-md hover:bg-slate-100 text-slate-400 hover:text-slate-700 transition-colors",children:u.jsx(yu,{size:16})}),t.logo_url?u.jsx("img",{src:t.logo_url,alt:t.name,className:"w-9 h-9 rounded-lg object-contain border border-slate-100"}):u.jsx("div",{className:"w-9 h-9 rounded-lg bg-brand-50 border border-brand-100 flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-brand-600",children:t.name[0]})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-base font-semibold text-slate-900",children:t.name}),u.jsxs("p",{className:"text-xs text-slate-500",children:[s.length," market",s.length!==1?"s":""]})]})]}),u.jsxs(Nt,{to:`/clients/${n}/history`,className:"flex items-center gap-1.5 text-xs text-slate-500 hover:text-slate-700 transition-colors",children:[u.jsx(Sx,{size:13}),"Conversation history"]})]}),s.length>0&&u.jsx("div",{className:"flex items-center gap-0.5 mt-4",children:s.map((O,I)=>u.jsxs("button",{onClick:()=>x(I),className:se("px-3.5 py-1.5 text-xs font-medium rounded-t-md border-b-2 transition-colors",I===w?"text-brand-600 border-brand-500 bg-brand-50":"text-slate-500 border-transparent hover:text-slate-700 hover:bg-slate-50"),children:[u.jsx("span",{className:"mr-1",children:D_(O.country_code)}),O.country_code,O.state==="paused"&&u.jsx("span",{className:"ml-1.5 text-[9px] font-bold text-slate-400 uppercase",children:"paused"})]},O.id))})]}),u.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[_&&u.jsx(L_,{market:_}),u.jsxs("div",{className:"flex-1 overflow-hidden grid grid-cols-[1fr_380px] gap-4 p-4",children:[s.length===0?u.jsx(M_,{clientId:n,onCreated:m}):_?u.jsx(iw,{clientId:n,clientName:t.name,market:_,memory:i,recentConversation:o[0]??null,onProposalsCreated:N,onRefreshMemory:g},_.id):null,u.jsxs("div",{className:"flex flex-col overflow-hidden gap-2",children:[u.jsxs("div",{className:"flex items-center bg-white border border-slate-200 rounded-lg p-0.5 flex-shrink-0",children:[u.jsxs("button",{onClick:()=>b("proposals"),disabled:!_,className:se("flex-1 flex items-center justify-center gap-1.5 py-1.5 text-xs font-medium rounded-md transition-colors",k==="proposals"&&_?"bg-brand-500 text-white shadow-sm":"text-slate-500 hover:text-slate-700",!_&&"opacity-40 cursor-not-allowed"),children:[u.jsx(_a,{size:11}),"Proposals"]}),u.jsxs("button",{onClick:()=>b("bol"),className:se("flex-1 flex items-center justify-center gap-1.5 py-1.5 text-xs font-medium rounded-md transition-colors",k==="bol"?"bg-orange-500 text-white shadow-sm":"text-slate-500 hover:text-slate-700"),children:[u.jsx(Yr,{size:11}),"Bol.com"]})]}),u.jsx("div",{className:"flex-1 overflow-hidden",children:k==="proposals"&&_?u.jsx(N_,{proposals:c,marketId:_.id,onUpdated:L}):k==="proposals"?u.jsx("div",{className:"flex h-full items-center justify-center text-xs text-slate-400 px-4 text-center",children:"Add a market to see proposals"}):u.jsx(A_,{clientId:n})})]})]})]})]})}function L_({market:n}){return u.jsxs("div",{className:"flex items-center gap-6 px-6 py-2.5 bg-slate-50 border-b border-slate-200 flex-shrink-0",children:[u.jsx(Hl,{icon:u.jsx(Lx,{size:11}),label:"ROAS Target",value:n.roas_target?`${n.roas_target}x`:""}),u.jsx(Hl,{icon:u.jsx(_x,{size:11}),label:"Daily Budget",value:n.daily_budget_cap?`${n.currency} ${n.daily_budget_cap.toLocaleString()}`:""}),u.jsx(Hl,{icon:u.jsx(Zf,{size:11}),label:"Profile ID",value:n.amazon_advertiser_profile_id,mono:!0}),u.jsx("span",{className:se("text-[10px] font-semibold uppercase px-2 py-0.5 rounded",n.state==="active"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"),children:n.state})]})}function Hl({icon:n,label:t,value:s,mono:i=!1}){return u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-slate-400",children:n}),u.jsxs("span",{className:"text-[10px] text-slate-500",children:[t,":"]}),u.jsx("span",{className:se("text-xs text-slate-800 font-medium",i&&"font-mono text-[11px]"),children:s})]})}function D_(n){return String.fromCodePoint(n.toUpperCase().charCodeAt(0)+127397,n.toUpperCase().charCodeAt(1)+127397)}function M_({clientId:n,onCreated:t}){const[s,i]=T.useState(!1);return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3",children:[u.jsx("p",{className:"text-slate-500 text-sm",children:"No markets configured yet."}),u.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-brand-500 hover:bg-brand-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Add Market"}),s&&u.jsx($_,{clientId:n,onClose:()=>i(!1),onCreated:()=>{i(!1),t()}})]})}function $_({clientId:n,onClose:t,onCreated:s}){const[i,o]=T.useState({country_code:"NL",amazon_advertiser_profile_id:"",amazon_advertiser_account_id:"",roas_target:"",daily_budget_cap:"",currency:"EUR"}),[c,h]=T.useState(!1),p=(y,w)=>o(x=>({...x,[y]:w})),m=async y=>{y.preventDefault(),h(!0);try{const{error:w}=await Ne.from("client_markets").insert({client_id:n,country_code:i.country_code.toUpperCase(),amazon_advertiser_profile_id:i.amazon_advertiser_profile_id,amazon_advertiser_account_id:i.amazon_advertiser_account_id,roas_target:i.roas_target?parseFloat(i.roas_target):null,daily_budget_cap:i.daily_budget_cap?parseFloat(i.daily_budget_cap):null,currency:i.currency,state:"active"});if(w)throw w;s()}catch(w){alert(w instanceof Error?w.message:"Failed to create market")}finally{h(!1)}},g=(y,w,x="text",k=!1,b="")=>u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:[y," ",k&&u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:x,value:i[w],onChange:_=>p(w,_.target.value),required:k,placeholder:b,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400"})]});return u.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900 mb-4",children:"Add Market"}),u.jsxs("form",{onSubmit:m,className:"space-y-3",children:[g("Country Code","country_code","text",!0,"NL"),g("Amazon Advertiser Profile ID","amazon_advertiser_profile_id","text",!0,"12345678"),g("Amazon Advertiser Account ID","amazon_advertiser_account_id","text",!0,"A1B2C3D4E5"),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g("ROAS Target","roas_target","number",!1,"4.0"),g("Daily Budget Cap","daily_budget_cap","number",!1,"500")]}),g("Currency","currency","text",!1,"EUR"),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[u.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-slate-600 hover:text-slate-900",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 text-sm bg-brand-500 hover:bg-brand-600 text-white rounded-lg font-medium disabled:opacity-50",children:c?"Saving":"Add Market"})]})]})]})})}function ga(n){return n===null?"text-slate-400":n>=80?"text-green-600":n>=60?"text-amber-600":"text-red-600"}function yf(n){return n===null?"bg-slate-50 border-slate-200":n>=80?"bg-green-50 border-green-200":n>=60?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}function ou(n){return n===null?"No data":n>=80?"Healthy":n>=60?"Needs attention":"Action required"}function U_(n){return n==="high"?"bg-red-50 text-red-700 border-red-200":n==="medium"?"bg-amber-50 text-amber-700 border-amber-200":"bg-blue-50 text-blue-700 border-blue-200"}function wp(n){const t=Date.now()-new Date(n).getTime(),s=Math.floor(t/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;const i=Math.floor(s/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function Xe(n,t=0){return n.toLocaleString("nl-NL",{minimumFractionDigits:t,maximumFractionDigits:t})}function _p({score:n,size:t="sm"}){const s=t==="lg"?72:52,i=t==="lg"?29:21,o=t==="lg"?6:4,c=2*Math.PI*i,h=(n??0)/100*c,p=n===null?"#94a3b8":n>=80?"#16a34a":n>=60?"#d97706":"#dc2626";return u.jsxs("div",{className:"relative flex-shrink-0",style:{width:s,height:s},children:[u.jsxs("svg",{width:s,height:s,className:"absolute inset-0 -rotate-90",children:[u.jsx("circle",{cx:s/2,cy:s/2,r:i,fill:"none",stroke:"#e2e8f0",strokeWidth:o}),u.jsx("circle",{cx:s/2,cy:s/2,r:i,fill:"none",stroke:p,strokeWidth:o,strokeDasharray:`${h} ${c}`,strokeLinecap:"round"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:se("font-bold",t==="lg"?"text-xl":"text-sm"),style:{color:p},children:n??""})})]})}function Qr(){return u.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[u.jsx(Jr,{size:24,className:"text-slate-300 mb-3"}),u.jsx("p",{className:"text-sm font-medium text-slate-500",children:"No data yet"}),u.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Data will appear after the next sync."})]})}function Js({recs:n}){return n.length?u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-2",children:"Recommendations"}),u.jsx("div",{className:"space-y-2",children:n.map((t,s)=>u.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg text-xs",children:[u.jsx("span",{className:se("inline-block text-[10px] font-bold uppercase px-1.5 py-0.5 rounded border mr-2",U_(t.priority)),children:t.priority}),u.jsx("span",{className:"font-medium text-slate-800",children:t.title}),u.jsx("p",{className:"text-slate-500 mt-1 leading-relaxed",children:t.action}),u.jsxs("p",{className:"text-[11px] text-green-700 font-medium mt-1.5",children:[" ",t.impact]})]},s))})]}):null}function Ve({label:n,value:t,sub:s,color:i="default"}){const o={default:"text-slate-800",green:"text-green-600",amber:"text-amber-600",red:"text-red-600",blue:"text-blue-600"}[i],c={default:"bg-white border-slate-200",green:"bg-green-50 border-green-200",amber:"bg-amber-50 border-amber-200",red:"bg-red-50 border-red-200",blue:"bg-blue-50 border-blue-200"}[i];return u.jsxs("div",{className:se("p-4 rounded-xl border",c),children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:n}),u.jsx("span",{className:se("text-3xl font-bold",o),children:t}),s&&u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:s})]})}function z_({summary:n}){var p;const t=[{label:"Content Quality",analysis:n.content,description:"Title completeness, pricing & keyword compliance"},{label:"Inventory Health",analysis:n.inventory,description:"Stock levels and fulfilment model"},{label:"Order Performance",analysis:n.orders,description:"Cancellation rate and fulfilment quality"},{label:"Ad Performance",analysis:n.advertising,description:"ROAS, budget utilisation and campaign health"}],s=(p=n.performance)==null?void 0:p.findings,i=(s==null?void 0:s.indicators)??[],o={CANCELLATION_RATE:"Cancellation Rate",FULFILMENT_RATE:"Fulfilment Rate",REVIEW_SCORE:"Review Score"},c=m=>m==="GOOD"?"bg-green-50 text-green-700 border-green-200":m==="NEEDS_IMPROVEMENT"?"bg-amber-50 text-amber-700 border-amber-200":"bg-red-50 text-red-700 border-red-200",h=m=>m==="GOOD"?u.jsx(qs,{size:11,className:"text-green-500"}):m==="NEEDS_IMPROVEMENT"?u.jsx(ka,{size:11,className:"text-amber-500"}):u.jsx(Mn,{size:11,className:"text-red-500"});return u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"flex items-center gap-5 p-5 bg-white border border-slate-200 rounded-xl",children:[u.jsx(_p,{score:n.overall_score,size:"lg"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Overall Health Score"}),u.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Weighted across content, inventory, orders, advertising, returns & performance."}),n.overall_score!==null&&u.jsx("span",{className:se("inline-block mt-2 text-xs font-semibold px-2 py-0.5 rounded border",yf(n.overall_score),ga(n.overall_score)),children:ou(n.overall_score)})]}),n.last_sync_at&&u.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-400 flex-shrink-0",children:[u.jsx(wu,{size:11}),wp(n.last_sync_at)]})]}),u.jsx("div",{className:"grid grid-cols-4 gap-4",children:t.map(({label:m,analysis:g,description:y})=>u.jsxs("div",{className:se("p-4 rounded-xl border",yf((g==null?void 0:g.score)??null)),children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-semibold text-slate-800",children:m}),u.jsx("span",{className:se("text-2xl font-bold",ga((g==null?void 0:g.score)??null)),children:(g==null?void 0:g.score)??""})]}),u.jsx("p",{className:"text-xs text-slate-500 mb-3 leading-relaxed",children:y}),g?u.jsxs("div",{className:"flex items-center gap-1.5",children:[g.score>=80?u.jsx(qs,{size:11,className:"text-green-500"}):g.score>=60?u.jsx(ka,{size:11,className:"text-amber-500"}):u.jsx(Mn,{size:11,className:"text-red-500"}),u.jsx("span",{className:se("text-xs font-medium",ga(g.score)),children:ou(g.score)})]}):u.jsx("span",{className:"text-xs text-slate-400",children:"Sync pending"})]},m))}),i.length>0&&u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Official bol.com KPIs"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Status as reported by the bol.com Retailer API"})]}),u.jsx("div",{className:"flex divide-x divide-slate-100",children:i.map(m=>u.jsxs("div",{className:"flex-1 p-4",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-2",children:o[m.name]??m.name}),u.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[h(m.status),u.jsx("span",{className:se("text-xs font-bold px-2 py-0.5 rounded border",c(m.status)),children:m.status.replace(/_/g," ")})]}),m.score!==null&&u.jsxs("p",{className:"text-xs text-slate-400",children:["Score: ",u.jsx("span",{className:"font-semibold text-slate-600",children:m.score}),m.norm!==null&&u.jsxs("span",{className:"text-slate-300",children:[" / norm ",m.norm]})]})]},m.name))})]})]})}function B_({summary:n}){var h,p,m,g,y,w;const t=[...(((h=n.content)==null?void 0:h.recommendations)??[]).map(x=>({...x,category:"Content"})),...(((p=n.inventory)==null?void 0:p.recommendations)??[]).map(x=>({...x,category:"Inventory"})),...(((m=n.orders)==null?void 0:m.recommendations)??[]).map(x=>({...x,category:"Orders"})),...(((g=n.advertising)==null?void 0:g.recommendations)??[]).map(x=>({...x,category:"Ads"})),...(((y=n.returns)==null?void 0:y.recommendations)??[]).map(x=>({...x,category:"Returns"})),...(((w=n.performance)==null?void 0:w.recommendations)??[]).map(x=>({...x,category:"KPIs"}))],s=t.filter(x=>x.priority==="high"),i=t.filter(x=>x.priority==="medium"),o=t.filter(x=>x.priority==="low");if(!t.length)return u.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[u.jsx(qs,{size:32,className:"text-green-400 mb-3"}),u.jsx("p",{className:"text-sm font-medium text-slate-700",children:"No recommendations"}),u.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Everything looks great across all categories."})]});const c=({label:x,recs:k,headColor:b})=>k.length?u.jsxs("div",{children:[u.jsxs("h3",{className:se("text-xs font-bold uppercase tracking-wide mb-2",b),children:[x," Priority  ",k.length]}),u.jsx("div",{className:"space-y-2 mb-6",children:k.map((_,N)=>u.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3 mb-1.5",children:[u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:_.title}),u.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded flex-shrink-0",children:_.category})]}),u.jsx("p",{className:"text-xs text-slate-600 leading-relaxed mb-2",children:_.action}),u.jsxs("p",{className:"text-[11px] text-green-700 font-medium",children:[" ",_.impact]})]},N))})]}):null;return u.jsxs("div",{children:[u.jsx(c,{label:"High",recs:s,headColor:"text-red-600"}),u.jsx(c,{label:"Medium",recs:i,headColor:"text-amber-600"}),u.jsx(c,{label:"Low",recs:o,headColor:"text-blue-600"})]})}function F_({analysis:n}){var y;if(!n)return u.jsx(Qr,{});const t=n.findings,s=t.offers_count??0,i=t.titles_in_range??0,o=t.titles_short??0,c=t.titles_missing??0,h=s>0?Math.round(i/s*100):0,p=(((y=t.per_offer_insights)==null?void 0:y.length)??0)>0,m=[...t.per_offer_insights??[]].sort((w,x)=>x.visits-w.visits),g=w=>w>=80?"text-green-600":w>=50?"text-amber-600":"text-red-600";return u.jsxs("div",{className:"space-y-4",children:[t.forbidden_keyword_warning&&u.jsxs("div",{className:"flex items-start gap-2.5 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[u.jsx(ka,{size:13,className:"text-amber-500 mt-0.5 flex-shrink-0"}),u.jsxs("p",{className:"text-xs text-amber-800",children:[u.jsx("strong",{children:"Sustainability keyword warning:"}),' One or more titles contain eco/sustainability claims that bol.com restricts (e.g. "Milieuvriendelijk", "Duurzaam").']})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsx(Ve,{label:"Total offers",value:s}),u.jsx(Ve,{label:"Avg title score",value:`${t.avg_title_score??0}`,sub:"out of 100",color:t.avg_title_score?t.avg_title_score>=80?"green":t.avg_title_score>=60?"amber":"red":"default"}),u.jsx(Ve,{label:"Offers with price",value:`${t.price_set_pct??100}%`,color:(t.price_set_pct??100)<100?"red":"green"})]}),p&&u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsx(Ve,{label:"Total visits (30d)",value:Xe(t.total_visits??0),color:"blue"}),u.jsx(Ve,{label:"Total impressions (30d)",value:Xe(t.total_impressions??0),color:"blue"}),u.jsx(Ve,{label:"Avg buy box %",value:`${t.avg_buy_box_pct??0}%`,color:t.avg_buy_box_pct?t.avg_buy_box_pct>=80?"green":t.avg_buy_box_pct>=50?"amber":"red":"default"})]}),u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Title Quality Breakdown"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Optimal: 150175 characters, starts with brand name"})]}),u.jsx("div",{className:"divide-y divide-slate-100",children:[{label:"Optimal (150175 chars)",count:i,pct:h,good:!0},{label:"Short (< 150 chars)",count:o,pct:s>0?Math.round(o/s*100):0,bad:o>0},{label:"Missing / empty",count:c,pct:s>0?Math.round(c/s*100):0,bad:c>0}].map(w=>u.jsxs("div",{className:"flex items-center gap-4 px-4 py-3",children:[u.jsx("span",{className:"text-xs text-slate-600 flex-1",children:w.label}),u.jsx("div",{className:"w-32 bg-slate-100 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:se("h-full rounded-full",w.good?"bg-green-500":w.bad?"bg-red-400":"bg-slate-300"),style:{width:`${w.pct}%`}})}),u.jsx("span",{className:se("text-xs font-semibold w-10 text-right",w.good?"text-green-600":w.bad&&w.count>0?"text-red-600":"text-slate-400"),children:w.count}),u.jsxs("span",{className:"text-xs text-slate-400 w-8 text-right",children:[w.pct,"%"]})]},w.label))})]}),p&&u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Offer Insights"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Sorted by visits (last 30 days)"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[u.jsx("th",{className:"px-4 py-2 text-left font-semibold text-slate-500",children:"Title"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Visits"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Impressions"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Buy Box %"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:m.slice(0,20).map((w,x)=>u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-4 py-2.5 text-slate-700 max-w-xs",children:u.jsx("span",{className:"block truncate",title:w.title??w.offerId,children:w.title?w.title.slice(0,55)+(w.title.length>55?"":""):w.offerId})}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600 font-medium",children:Xe(w.visits)}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:Xe(w.impressions)}),u.jsx("td",{className:"px-4 py-2.5 text-right",children:u.jsxs("span",{className:se("font-bold",g(w.buyBoxPct)),children:[w.buyBoxPct,"%"]})})]},x))})]})})]}),u.jsx(Js,{recs:n.recommendations??[]})]})}function W_({analysis:n}){if(!n)return u.jsx(Qr,{});const t=n.findings,s=t.fulfilment_model==="FBR";return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("div",{className:se("px-3 py-1.5 rounded-lg text-sm font-bold",s?"bg-slate-100 text-slate-700":t.fulfilment_model==="MIXED"?"bg-blue-50 text-blue-700":"bg-orange-50 text-orange-700"),children:t.fulfilment_model??""}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Fulfilment Model"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:s?"Stock managed in own warehouse  bol.com does not track FBR inventory":"Fulfilled by Bol"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.items_count??0}),u.jsx("p",{className:"text-xs text-slate-400",children:"total SKUs"})]})]}),s?u.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm text-slate-600 leading-relaxed",children:" As an FBR (Fulfilled by Retailer) seller, your stock is managed in your own warehouse. bol.com doesn't receive inventory updates, so no stock-level alerts are available. Consider migrating best-selling SKUs to FBB for faster delivery and Buy Box advantage."}):u.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Out of stock",value:t.fbb_out_of_stock??0,bad:(t.fbb_out_of_stock??0)>0},{label:"Critically low",value:t.fbb_critical_low??0,warn:(t.fbb_critical_low??0)>0},{label:"Low stock",value:t.fbb_low_stock??0,warn:(t.fbb_low_stock??0)>0},{label:"Healthy",value:t.fbb_healthy??0,good:!0}].map(i=>u.jsxs("div",{className:se("p-4 rounded-xl border",i.bad?"bg-red-50 border-red-200":i.warn?"bg-amber-50 border-amber-200":i.good?"bg-green-50 border-green-200":"bg-white border-slate-200"),children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:i.label}),u.jsx("span",{className:se("text-2xl font-bold",i.bad?"text-red-600":i.warn?"text-amber-600":i.good?"text-green-600":"text-slate-800"),children:i.value})]},i.label))}),t.fulfilment_model==="MIXED"&&u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"FBR SKUs"}),u.jsx("span",{className:"text-2xl font-bold text-slate-700",children:t.fbr_items??0})]}),u.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"FBB SKUs"}),u.jsx("span",{className:"text-2xl font-bold text-orange-600",children:t.fbb_items??0})]})]}),u.jsx(Js,{recs:n.recommendations??[]})]})}function q_({analysis:n}){if(!n)return u.jsx(Qr,{});const t=n.findings;if((t.orders_count??0)===0)return u.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[u.jsx(Yr,{size:32,className:"text-slate-300 mb-3"}),u.jsx("p",{className:"text-sm font-medium text-slate-600",children:"No orders in the last 30 days"}),u.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Order data will appear here once orders come in."})]});const s=t.cancel_rate_pct??0,i=t.fbb_rate_pct??0;return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total orders"}),u.jsx("span",{className:"text-3xl font-bold text-slate-800",children:t.orders_count??0})]}),u.jsxs("div",{className:se("p-4 rounded-xl border",s>5?"bg-red-50 border-red-200":s>2?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"),children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Cancel rate"}),u.jsxs("span",{className:se("text-3xl font-bold",s>5?"text-red-600":s>2?"text-amber-600":"text-green-600"),children:[s,"%"]})]}),u.jsxs("div",{className:se("p-4 rounded-xl border",i>=50?"bg-green-50 border-green-200":"bg-amber-50 border-amber-200"),children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"FBB rate"}),u.jsxs("span",{className:se("text-3xl font-bold",i>=50?"text-green-600":"text-amber-600"),children:[i,"%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"FBR orders"}),u.jsx("span",{className:"text-xl font-bold text-slate-700",children:t.fbr_orders??0})]}),u.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"FBB orders"}),u.jsx("span",{className:"text-xl font-bold text-orange-600",children:t.fbb_orders??0})]})]}),u.jsx(Js,{recs:n.recommendations??[]})]})}function H_({analysis:n}){var o;if(!n)return u.jsx(Qr,{});const t=n.findings,s=t.roas??0,i=s>=5?"green":s>=3?"amber":"red";return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[u.jsx(Ve,{label:"Total ad spend",value:`${Xe(t.total_spend??0,2)}`,sub:"last 30 days"}),u.jsx(Ve,{label:"ROAS",value:`${Xe(s,2)}`,sub:"revenue per 1 spent",color:i}),u.jsx(Ve,{label:"CTR",value:`${Xe(t.ctr_pct??0,2)}%`,sub:`${Xe(t.total_clicks??0)} clicks`,color:(t.ctr_pct??0)>.5?"green":"amber"}),u.jsx(Ve,{label:"Conversions",value:Xe(Math.round((t.total_clicks??0)*((t.conversion_rate_pct??0)/100))),sub:`${Xe(t.conversion_rate_pct??0,1)}% conv. rate`})]}),(((o=t.per_campaign)==null?void 0:o.length)??0)>0&&u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Campaign Breakdown"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Sorted by spend descending  Amber = budget >95% used"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[u.jsx("th",{className:"px-4 py-2 text-left font-semibold text-slate-500",children:"Campaign"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Spend"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Impressions"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Clicks"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"ROAS"}),u.jsx("th",{className:"px-4 py-2 text-left font-semibold text-slate-500 w-32",children:"Budget used"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:t.per_campaign.map((c,h)=>{const p=c.budget_utilisation_pct>95;return u.jsxs("tr",{className:se("hover:bg-slate-50",p&&"bg-amber-50/40"),children:[u.jsx("td",{className:"px-4 py-2.5 text-slate-700 max-w-xs",children:u.jsx("span",{className:"block truncate",title:c.name,children:c.name})}),u.jsxs("td",{className:"px-4 py-2.5 text-right font-medium text-slate-800",children:["",Xe(c.spend,2)]}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:Xe(c.impressions)}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:Xe(c.clicks)}),u.jsxs("td",{className:se("px-4 py-2.5 text-right font-bold",c.roas>=5?"text-green-600":c.roas>=3?"text-amber-600":"text-red-600"),children:[Xe(c.roas,2),""]}),u.jsx("td",{className:"px-4 py-2.5",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:se("h-full rounded-full transition-all",p?"bg-amber-400":"bg-blue-400"),style:{width:`${Math.min(c.budget_utilisation_pct,100)}%`}})}),u.jsxs("span",{className:se("text-[10px] font-semibold w-8 text-right",p?"text-amber-600":"text-slate-500"),children:[Math.round(c.budget_utilisation_pct),"%"]})]})})]},h)})})]})})]}),u.jsx(Js,{recs:n.recommendations??[]})]})}function V_({bolCustomerId:n}){const[t,s]=T.useState(null),[i,o]=T.useState(!0),[c,h]=T.useState(0),p=15;if(T.useEffect(()=>{o(!0),C_(n).then(b=>s(b.competitors)).catch(()=>s([])).finally(()=>o(!1))},[n]),i)return u.jsx("div",{className:"flex items-center justify-center py-16",children:u.jsx(Jr,{size:18,className:"animate-spin text-slate-400"})});if(!(t!=null&&t.length))return u.jsx(Qr,{});const m=t.filter(b=>b.buy_box_winner).length,g=Math.round(m/t.length*100),y=Math.round(t.reduce((b,_)=>b+(_.competitor_count??0),0)/t.length),w=[...t].sort((b,_)=>{if(b.buy_box_winner&&!_.buy_box_winner)return 1;if(!b.buy_box_winner&&_.buy_box_winner)return-1;const N=b.our_price&&b.lowest_competing_price?b.our_price-b.lowest_competing_price:0;return(_.our_price&&_.lowest_competing_price?_.our_price-_.lowest_competing_price:0)-N}),x=w.slice(c*p,(c+1)*p),k=Math.ceil(w.length/p);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsx(Ve,{label:"Buy box win rate",value:`${g}%`,sub:`${m} of ${t.length} products`,color:g>=70?"green":g>=40?"amber":"red"}),u.jsx(Ve,{label:"Products tracked",value:t.length}),u.jsx(Ve,{label:"Avg competitors",value:y,sub:"per product"})]}),u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Competitor Overview"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Losers shown first  Red = competitor lower than us"})]}),k>1&&u.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[u.jsx("button",{onClick:()=>h(b=>Math.max(0,b-1)),disabled:c===0,className:"p-1 rounded hover:bg-slate-100 disabled:opacity-30",children:u.jsx(yx,{size:14})}),u.jsxs("span",{children:[c+1,"/",k]}),u.jsx("button",{onClick:()=>h(b=>Math.min(k-1,b+1)),disabled:c===k-1,className:"p-1 rounded hover:bg-slate-100 disabled:opacity-30",children:u.jsx(xu,{size:14})})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[u.jsx("th",{className:"px-4 py-2 text-left font-semibold text-slate-500",children:"EAN"}),u.jsx("th",{className:"px-4 py-2 text-center font-semibold text-slate-500",children:"Buy Box"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Our Price"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Lowest"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Competitors"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Rating"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:x.map((b,_)=>{const N=b.lowest_competing_price!==null&&b.our_price!==null&&b.lowest_competing_price<b.our_price;return u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-4 py-2.5 font-mono text-slate-600",children:b.ean}),u.jsx("td",{className:"px-4 py-2.5 text-center",children:b.buy_box_winner?u.jsx(qs,{size:14,className:"text-green-500 inline"}):u.jsx(Mn,{size:14,className:"text-red-400 inline"})}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:b.our_price!==null?`${Xe(b.our_price,2)}`:""}),u.jsxs("td",{className:se("px-4 py-2.5 text-right font-medium flex items-center justify-end gap-1",N?"text-red-600":"text-slate-600"),children:[b.lowest_competing_price!==null?`${Xe(b.lowest_competing_price,2)}`:"",N&&u.jsx(sp,{size:11,className:"text-red-500"})]}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:b.competitor_count??""}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:b.rating_score!==null?u.jsxs("span",{children:[b.rating_score," ",u.jsxs("span",{className:"text-slate-400",children:["(",b.rating_count,")"]})]}):""})]},_)})})]})})]})]})}function K_({bolCustomerId:n}){const[t,s]=T.useState(null),[i,o]=T.useState(!0);if(T.useEffect(()=>{o(!0),T_(n).then(x=>s(x.rankings)).catch(()=>s([])).finally(()=>o(!1))},[n]),i)return u.jsx("div",{className:"flex items-center justify-center py-16",children:u.jsx(Jr,{size:18,className:"animate-spin text-slate-400"})});if(!(t!=null&&t.length))return u.jsx(Qr,{});const c=t.filter(x=>x.search_type==="SEARCH"),h=t.filter(x=>x.search_type==="BROWSE"),p=c.length>0?Math.round(c.reduce((x,k)=>x+(k.current_rank??0),0)/c.length):null,m=h.length>0?Math.round(h.reduce((x,k)=>x+(k.current_rank??0),0)/h.length):null,g=new Map;for(const x of t)g.has(x.ean)||g.set(x.ean,{}),x.search_type==="SEARCH"?g.get(x.ean).search=x:g.get(x.ean).browse=x;const y=Array.from(g.entries()).sort((x,k)=>{var N,L;const b=((N=x[1].search)==null?void 0:N.current_rank)??9999,_=((L=k[1].search)==null?void 0:L.current_rank)??9999;return b-_}),w=({trend:x})=>x==="up"?u.jsx(Dx,{size:12,className:"text-green-500"}):x==="down"?u.jsx(sp,{size:12,className:"text-red-500"}):x==="new"?u.jsx(Ix,{size:12,className:"text-blue-500"}):u.jsx(Rx,{size:12,className:"text-slate-400"});return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsx(Ve,{label:"Ranked products",value:g.size}),u.jsx(Ve,{label:"Avg search rank",value:p??"",sub:"lower = better",color:p!==null?p<=20?"green":p<=50?"amber":"red":"default"}),u.jsx(Ve,{label:"Avg browse rank",value:m??"",sub:"lower = better",color:m!==null?m<=20?"green":m<=50?"amber":"red":"default"})]}),u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Product Rankings"}),u.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Sorted by search rank (best first)  Lower number = better position"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[u.jsx("th",{className:"px-4 py-2 text-left font-semibold text-slate-500",children:"EAN"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Search Rank"}),u.jsx("th",{className:"px-4 py-2 text-center font-semibold text-slate-500",children:"Trend"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Browse Rank"}),u.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-500",children:"Impressions"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:y.map(([x,k],b)=>{var _,N,L,O,I,z;return u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-4 py-2.5 font-mono text-slate-600",children:x}),u.jsx("td",{className:"px-4 py-2.5 text-right",children:((_=k.search)==null?void 0:_.current_rank)!==null&&((N=k.search)==null?void 0:N.current_rank)!==void 0?u.jsxs("span",{className:se("font-bold",k.search.current_rank<=20?"text-green-600":k.search.current_rank<=50?"text-amber-600":"text-slate-600"),children:["#",k.search.current_rank]}):u.jsx("span",{className:"text-slate-300",children:""})}),u.jsx("td",{className:"px-4 py-2.5 flex justify-center",children:u.jsx(w,{trend:(L=k.search)==null?void 0:L.trend})}),u.jsx("td",{className:"px-4 py-2.5 text-right",children:((O=k.browse)==null?void 0:O.current_rank)!==null&&((I=k.browse)==null?void 0:I.current_rank)!==void 0?u.jsxs("span",{className:"text-slate-600 font-medium",children:["#",k.browse.current_rank]}):u.jsx("span",{className:"text-slate-300",children:""})}),u.jsx("td",{className:"px-4 py-2.5 text-right text-slate-600",children:((z=k.search)==null?void 0:z.current_impressions)!=null?Xe(k.search.current_impressions):""})]},b)})})]})})]})]})}function G_({analysis:n}){var h,p,m,g;if(!n)return u.jsx(Qr,{});const t=n.findings,s=t.open_count??0,i=t.handled_count??0;t.total_count??s+i;const o=((p=(h=t.top_reasons)==null?void 0:h[0])==null?void 0:p.reason)??"",c=Math.max(...((m=t.top_reasons)==null?void 0:m.map(y=>y.count))??[1]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsx(Ve,{label:"Open returns",value:s,sub:"awaiting processing",color:s>50?"red":s>20?"amber":"green"}),u.jsx(Ve,{label:"Total processed",value:i,sub:"last period"}),u.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:[u.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Top return reason"}),u.jsx("span",{className:"text-sm font-semibold text-slate-800 leading-snug block",children:o})]})]}),(((g=t.top_reasons)==null?void 0:g.length)??0)>0&&u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-slate-100",children:u.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Top Return Reasons"})}),u.jsx("div",{className:"p-4 space-y-3",children:t.top_reasons.map((y,w)=>u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs text-slate-600 w-48 truncate flex-shrink-0",title:y.reason,children:y.reason}),u.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"h-full rounded-full bg-orange-400 transition-all",style:{width:`${Math.round(y.count/c*100)}%`}})}),u.jsx("span",{className:"text-xs font-semibold text-slate-600 w-8 text-right",children:y.count})]},w))})]}),u.jsx(Js,{recs:n.recommendations??[]})]})}function J_({bolCustomerId:n}){const[t,s]=T.useState({main:{status:"idle",message:""},complete:{status:"idle",message:""},extended:{status:"idle",message:""}}),[i,o]=T.useState(!1),c=(x,k)=>s(b=>({...b,[x]:k})),h=async x=>{var k,b,_,N,L;c(x,{status:"running",message:""});try{const O=await P_(n,x);let I="success",z="";if(x==="main"){const G=[];((k=O.inventory)==null?void 0:k.status)==="ok"&&G.push("Inv"),((b=O.orders)==null?void 0:b.status)==="ok"&&G.push("Orders"),((_=O.advertising)==null?void 0:_.status)==="ok"&&G.push("Ads"),((N=O.returns)==null?void 0:N.status)==="ok"&&G.push("Returns"),((L=O.offers_export)==null?void 0:L.status)==="job_submitted"&&G.push("Export queued"),z=G.join("  ")||"Done"}else if(x==="complete"){const G=O.still_pending??0,J=O.completed??0;G>0?(I="pending",z=`${J} done  ${G} still waiting`):J===0&&(O.checked??0)===0?z="No pending jobs":z=`${J} export${J!==1?"s":""} processed`}else{const G=O.detail??{};z=[G.competitors,G.rankings,G.catalog].filter(Boolean).join("  ")||"Done",O.message&&(I="pending",z=O.message)}return c(x,{status:I,message:z}),I}catch(O){const I=O.message;return c(x,{status:"error",message:I}),"error"}},p=async()=>{o(!0);try{await h("main"),await new Promise(k=>setTimeout(k,8e3)),await h("complete")==="pending"&&(await new Promise(k=>setTimeout(k,4e4)),await h("complete")),await h("extended")}finally{o(!1)}},m=[{id:"main",label:"1. Main Sync",sub:"Inventory  Orders  Ads"},{id:"complete",label:"2. Process Offers",sub:"CSV download + analysis"},{id:"extended",label:"3. Extended Data",sub:"Competitors  Keywords"}],g=Object.values(t).some(x=>x.status==="running")||i,y=(x,k)=>k?u.jsx(Jr,{size:11,className:"animate-spin flex-shrink-0 mt-0.5"}):x==="success"?u.jsx(qs,{size:11,className:"flex-shrink-0 mt-0.5"}):x==="error"?u.jsx(Mn,{size:11,className:"flex-shrink-0 mt-0.5"}):x==="pending"?u.jsx(wu,{size:11,className:"flex-shrink-0 mt-0.5"}):u.jsx("div",{className:"w-2.5 h-2.5 rounded-full border border-current flex-shrink-0 mt-0.5"}),w=(x,k)=>se("w-full flex items-start gap-2 px-2.5 py-1.5 rounded-lg text-left transition-colors disabled:cursor-not-allowed",k?"bg-blue-50 text-blue-700":x==="success"?"bg-green-50 text-green-700":x==="error"?"bg-red-50 text-red-600":x==="pending"?"bg-amber-50 text-amber-700":"bg-slate-50 text-slate-600 hover:bg-slate-100 hover:text-slate-900");return u.jsxs("div",{className:"p-3 border-t border-slate-100 flex-shrink-0",children:[u.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wide mb-2 px-0.5",children:"Data Sync"}),u.jsx("div",{className:"space-y-1",children:m.map(({id:x,label:k,sub:b})=>{const _=t[x],N=_.status==="running";return u.jsxs("button",{onClick:()=>!g&&h(x),disabled:g,className:w(_.status,N),children:[y(_.status,N),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"text-[11px] font-semibold leading-tight truncate",children:k}),u.jsx("p",{className:"text-[10px] leading-tight mt-0.5 truncate opacity-70",children:_.message||b})]})]},x)})}),u.jsx("button",{onClick:p,disabled:g,className:se("mt-2 w-full py-1.5 px-3 rounded-lg text-[11px] font-semibold transition-colors",g?"bg-slate-100 text-slate-400 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600"),children:i?u.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[u.jsx(Jr,{size:10,className:"animate-spin"})," Running"]}):" Run All"})]})}const xf=[{id:"overview",label:"Health Scores",icon:u.jsx(Ex,{size:14})},{id:"recommendations",label:"Recommendations",icon:u.jsx(_a,{size:14})},{id:"products",label:"Products",icon:u.jsx(ep,{size:14})},{id:"inventory",label:"Inventory",icon:u.jsx(Zf,{size:14})},{id:"orders",label:"Orders",icon:u.jsx(Yr,{size:14})},{id:"campaigns",label:"Campaign Performance",icon:u.jsx(gx,{size:14})},{id:"returns",label:"Returns",icon:u.jsx(Ox,{size:14})},{id:"keywords",label:"Keyword Intelligence",icon:u.jsx(Nx,{size:14})},{id:"competitors",label:"Competitor Research",icon:u.jsx(tp,{size:14})}];function Y_(){var y,w,x,k,b;const{clientId:n}=mu(),[t,s]=T.useState("overview"),[i,o]=T.useState(void 0),[c,h]=T.useState(!0);T.useEffect(()=>{n&&(h(!0),vp(n).then(o).catch(()=>o(null)).finally(()=>h(!1)))},[n]);const p=((w=(y=i==null?void 0:i.customer)==null?void 0:y.clients)==null?void 0:w.name)??"Client",m=((x=i==null?void 0:i.customer)==null?void 0:x.seller_name)??"",g=((k=i==null?void 0:i.customer)==null?void 0:k.id)??"";return u.jsxs("div",{className:"flex h-full flex-col",children:[u.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-3 flex-shrink-0 flex items-center gap-3",children:[u.jsx(Nt,{to:`/clients/${n}`,className:"p-1.5 rounded-md hover:bg-slate-100 text-slate-400 hover:text-slate-700 transition-colors",children:u.jsx(yu,{size:15})}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[u.jsx(Nt,{to:`/clients/${n}`,className:"hover:text-slate-700 transition-colors",children:p}),u.jsx("span",{children:"/"}),u.jsxs("div",{className:"flex items-center gap-1.5 text-slate-900 font-medium",children:[u.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-sm"}),"Bol.com",m&&u.jsxs("span",{className:"text-slate-400 font-normal text-xs",children:[" ",m]})]})]}),(i==null?void 0:i.last_sync_at)&&u.jsxs("span",{className:"ml-auto text-[11px] text-slate-400 flex items-center gap-1.5",children:[u.jsx(wu,{size:11})," Synced ",wp(i.last_sync_at)]})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[u.jsxs("div",{className:"w-52 flex-shrink-0 bg-white border-r border-slate-200 flex flex-col overflow-y-auto",children:[!c&&i&&u.jsx("div",{className:"p-4 border-b border-slate-100",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_p,{score:i.overall_score,size:"sm"}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-800 truncate",children:m}),u.jsx("p",{className:se("text-[10px] font-medium mt-0.5",ga(i.overall_score)),children:ou(i.overall_score)})]})]})}),u.jsx("nav",{className:"flex-1 p-2 space-y-0.5",children:xf.map(_=>u.jsxs("button",{onClick:()=>s(_.id),className:se("w-full flex items-center gap-2.5 px-3 py-2 rounded-lg text-xs font-medium transition-colors text-left",t===_.id?"bg-orange-50 text-orange-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[_.icon,u.jsx("span",{className:"flex-1",children:_.label})]},_.id))}),!c&&i&&g&&u.jsx(J_,{bolCustomerId:g})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:c?u.jsx("div",{className:"flex items-center justify-center py-16",children:u.jsx(Jr,{size:18,className:"animate-spin text-slate-400"})}):i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-5",children:u.jsx("h1",{className:"text-lg font-semibold text-slate-900",children:(b=xf.find(_=>_.id===t))==null?void 0:b.label})}),t==="overview"&&u.jsx(z_,{summary:i}),t==="recommendations"&&u.jsx(B_,{summary:i}),t==="products"&&u.jsx(F_,{analysis:i.content}),t==="inventory"&&u.jsx(W_,{analysis:i.inventory}),t==="orders"&&u.jsx(q_,{analysis:i.orders}),t==="campaigns"&&u.jsx(H_,{analysis:i.advertising}),t==="returns"&&u.jsx(G_,{analysis:i.returns}),t==="competitors"&&g&&u.jsx(V_,{bolCustomerId:g}),t==="keywords"&&g&&u.jsx(K_,{bolCustomerId:g})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[u.jsx(Yr,{size:32,className:"text-slate-300 mb-3"}),u.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Not connected"}),u.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"No bol.com account linked to this client."})]})})]})]})}function Q_(){const{clientId:n}=mu(),{client:t,conversations:s,loading:i}=cp(n);return i?u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("svg",{className:"animate-spin h-5 w-5 text-brand-500",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})}):u.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx(Nt,{to:`/clients/${n}`,className:"p-1.5 rounded-md hover:bg-slate-100 text-slate-400 hover:text-slate-700 transition-colors",children:u.jsx(yu,{size:16})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-semibold text-slate-900",children:"Conversation History"}),t&&u.jsx("p",{className:"text-sm text-slate-500",children:t.name})]})]}),s.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx(ba,{size:32,className:"text-slate-300 mx-auto mb-3"}),u.jsx("p",{className:"text-slate-500 text-sm",children:"No conversations yet."})]}):u.jsx("div",{className:"space-y-3",children:s.map(o=>u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ba,{size:14,className:"text-brand-500"}),u.jsx("span",{className:"text-xs font-medium text-slate-700",children:y_(new Date(o.created_at),"MMM d, yyyy  HH:mm")})]}),u.jsx("span",{className:"text-[10px] text-slate-400",children:Vs(new Date(o.updated_at),{addSuffix:!0})})]}),o.summary?u.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:o.summary}):u.jsx("p",{className:"text-xs text-slate-400 italic",children:"No summary generated."})]},o.id))})]})}function X_(){const[n,t]=Rg(),[s,i]=T.useState(null),[o,c]=T.useState(!0),h=n.get("amazon_connected"),p=n.get("amazon_error");T.useEffect(()=>{m(),(h||p)&&t({},{replace:!0})},[]);const m=async()=>{c(!0);const{data:w}=await Ne.from("amazon_credentials").select("connected_at, access_token_expires_at, refresh_token").eq("id",1).single();i(w??null),c(!1)},g=!!(s!=null&&s.refresh_token),y={access_denied:"You denied access. Please try again and click Allow.",no_code:"No authorization code received. Please try again.",token_exchange_failed:"Failed to exchange the authorization code. Check your Client ID and Secret in Vercel.",db_error:"Connected but failed to save credentials. Check Supabase.",unknown:"An unexpected error occurred. Check Vercel logs."};return u.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[u.jsx("h1",{className:"text-xl font-semibold text-slate-900 mb-1",children:"Settings"}),u.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Manage integrations and connections."}),h&&u.jsxs("div",{className:"flex items-center gap-2 bg-green-50 border border-green-200 text-green-700 rounded-lg px-4 py-3 mb-4 text-sm",children:[u.jsx(Xf,{size:15}),"Amazon Ads connected successfully."]}),p&&u.jsxs("div",{className:"flex items-center gap-2 bg-red-50 border border-red-200 text-red-700 rounded-lg px-4 py-3 mb-4 text-sm",children:[u.jsx(Mn,{size:15}),y[p]??"Connection failed."]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-50 border border-amber-100 flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-amber-600 font-bold text-sm",children:"A"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Amazon Advertising"}),u.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Connect your Amazon Ads account to enable AI-powered campaign management."})]})]}),!o&&u.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-1 rounded-full flex-shrink-0 ${g?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:g?"Connected":"Not connected"})]}),!o&&g&&(s==null?void 0:s.connected_at)&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 space-y-1.5",children:[u.jsx(wf,{label:"Connected",value:Vs(new Date(s.connected_at),{addSuffix:!0})}),s.access_token_expires_at&&u.jsx(wf,{label:"Access token expires",value:Vs(new Date(s.access_token_expires_at),{addSuffix:!0})}),u.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Access tokens are refreshed automatically before expiry."})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center gap-2",children:[u.jsxs("a",{href:"/api/amazon-connect",className:"flex items-center gap-1.5 px-4 py-2 bg-brand-500 hover:bg-brand-600 text-white text-sm font-medium rounded-lg transition-colors",children:[u.jsx(Tx,{size:13}),g?"Reconnect Amazon Ads":"Connect Amazon Ads"]}),g&&u.jsxs("button",{onClick:m,className:"flex items-center gap-1.5 px-3 py-2 text-sm text-slate-500 hover:text-slate-700 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[u.jsx(Oa,{size:13}),"Refresh status"]})]}),!g&&!o&&u.jsxs("div",{className:"mt-3 flex items-start gap-2 bg-amber-50 border border-amber-100 rounded-lg px-3 py-2.5",children:[u.jsx(ka,{size:13,className:"text-amber-500 mt-0.5 flex-shrink-0"}),u.jsxs("p",{className:"text-xs text-amber-700",children:["Before connecting, make sure"," ",u.jsx("code",{className:"bg-amber-100 px-1 rounded text-[11px]",children:"https://amazon-mcp-eight.vercel.app/api/amazon-callback"})," ","is added as an Allowed Return URL in your Amazon LwA app."]})]})]})]})}function wf({label:n,value:t}){return u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-slate-500 w-36",children:n}),u.jsx("span",{className:"text-slate-700 font-medium",children:t})]})}function Z_(){const{session:n,loading:t}=Fn();return t?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:u.jsxs("div",{className:"flex items-center gap-3 text-slate-500",children:[u.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),u.jsx("span",{className:"text-sm font-medium",children:"Loading"})]})}):n?u.jsx($x,{children:u.jsxs(Of,{children:[u.jsx(Zt,{path:"/",element:u.jsx(tw,{})}),u.jsx(Zt,{path:"/clients/:clientId",element:u.jsx(I_,{})}),u.jsx(Zt,{path:"/clients/:clientId/bol",element:u.jsx(Y_,{})}),u.jsx(Zt,{path:"/clients/:clientId/history",element:u.jsx(Q_,{})}),u.jsx(Zt,{path:"/settings",element:u.jsx(X_,{})}),u.jsx(Zt,{path:"*",element:u.jsx(Kl,{to:"/",replace:!0})})]})}):u.jsx(Kl,{to:"/login",replace:!0})}function eb(){return u.jsx(ux,{children:u.jsx(Eg,{children:u.jsxs(Of,{children:[u.jsx(Zt,{path:"/login",element:u.jsx(cx,{})}),u.jsx(Zt,{path:"/*",element:u.jsx(Z_,{})})]})})})}C0.createRoot(document.getElementById("root")).render(u.jsx(uu.StrictMode,{children:u.jsx(eb,{})}));
